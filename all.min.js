window.BMAP_AUTHENTIC_KEY="",function(){function aa(t){throw t}function s(){return function(){}}function ba(t){return function(e){this[t]=e}}function t(t){return function(){return this[t]}}function ca(t){return function(){return t}}function ha(t){return function(){return ga[t].apply(this,arguments)}}function ia(t,e){return ga[t]=e}function ma(t,e){if(t.domEvent=e=window.event||e,t.clientX=e.clientX||e.pageX,t.clientY=e.clientY||e.pageY,t.offsetX=e.offsetX||e.layerX,t.offsetY=e.offsetY||e.layerY,t.screenX=e.screenX,t.screenY=e.screenY,t.ctrlKey=e.ctrlKey||e.metaKey,t.shiftKey=e.shiftKey,t.altKey=e.altKey,e.touches){t.touches=[];for(var i=0;i<e.touches.length;i++)t.touches.push({clientX:e.touches[i].clientX,clientY:e.touches[i].clientY,screenX:e.touches[i].screenX,screenY:e.touches[i].screenY,pageX:e.touches[i].pageX,pageY:e.touches[i].pageY,target:e.touches[i].target,identifier:e.touches[i].identifier})}if(e.changedTouches)for(t.changedTouches=[],i=0;i<e.changedTouches.length;i++)t.changedTouches.push({clientX:e.changedTouches[i].clientX,clientY:e.changedTouches[i].clientY,screenX:e.changedTouches[i].screenX,screenY:e.changedTouches[i].screenY,pageX:e.changedTouches[i].pageX,pageY:e.changedTouches[i].pageY,target:e.changedTouches[i].target,identifier:e.changedTouches[i].identifier});if(e.targetTouches)for(t.targetTouches=[],i=0;i<e.targetTouches.length;i++)t.targetTouches.push({clientX:e.targetTouches[i].clientX,clientY:e.targetTouches[i].clientY,screenX:e.targetTouches[i].screenX,screenY:e.targetTouches[i].screenY,pageX:e.targetTouches[i].pageX,pageY:e.targetTouches[i].pageY,target:e.targetTouches[i].target,identifier:e.targetTouches[i].identifier});return t.rotation=e.rotation,t.scale=e.scale,t}function Ka(t,e){if(t=x.$(t)){var i=this;x.lang.Ba.call(i),e=e||{},i.M={gC:200,bc:o,Xw:q,cD:o,Oo:o,Po:o,HK:o,eD:o,Es:o,Vw:o,lm:o,Mo:e.enable3DBuilding||q,Gc:25,c0:240,yU:450,Wb:F.Wb,Dd:F.Dd,Ix:!!e.Ix,dc:Math.round(e.minZoom)||1,Yb:Math.round(e.maxZoom)||19,Hb:e.mapType||La,E3:q,Ww:o,Tw:500,iW:e.enableHighResolution!==q,nj:e.enableMapClick!==q,devicePixelRatio:e.devicePixelRatio||window.devicePixelRatio||1,LF:e.vectorMapLevel||(G()?3:99),se:e.mapStyle||p,sY:e.logoControl===q?q:o,SU:[],ww:e.beforeClickIcon||p},i.M.se&&(this.SX(i.M.se.controls),this.OL(i.M.se.geotableId)),i.M.se&&i.M.se.styleId&&i.w2(i.M.se.styleId),i.M.dm={dark:{backColor:"#2D2D2D",textColor:"#bfbfbf",iconUrl:"dicons"},normal:{backColor:"#F3F1EC",textColor:"#c61b1b",iconUrl:"icons"},light:{backColor:"#EBF8FC",textColor:"#017fb4",iconUrl:"licons"}},e.enableAutoResize&&(i.M.Vw=e.enableAutoResize),e.enableStreetEntrance===q&&(i.M.lm=e.enableStreetEntrance),e.enableDeepZoom===q&&(i.M.HK=e.enableDeepZoom);var n=i.M.SU;if(G())for(var s=0,a=n.length;a>s;s++)if(x.ea[n[s]]){i.M.devicePixelRatio=1;break}for(n=-1<navigator.userAgent.toLowerCase().indexOf("android"),s=-1<navigator.userAgent.toLowerCase().indexOf("mqqbrowser"),(-1<navigator.userAgent.toLowerCase().indexOf("UCBrowser")||n&&s)&&(i.M.LF=99),i.Ua=t,i.tB(t),t.unselectable="on",t.innerHTML="",t.appendChild(i.ta()),e.size&&this.we(e.size),n=i.wb(),i.width=n.width,i.height=n.height,i.offsetX=0,i.offsetY=0,i.platform=t.firstChild,i.te=i.platform.firstChild,i.te.style.width=i.width+"px",i.te.style.height=i.height+"px",i.Sd={},i.ef=new H(0,0),i.wc=new H(0,0),i.Ha=3,i.Hc=0,i.yC=p,i.xC=p,i.Vb="",i.Bw="",i.Oh={},i.Oh.custom={},i.Sa=0,i.P=new Ma(t,{Of:"api",BS:o}),i.P.U(),i.P.nF(i),e=e||{},n=i.Hb=i.M.Hb,i.ve=n.bp(),n===Na&&Oa(xa),n===Pa&&Oa(ya),n=i.M,n.zO=Math.round(e.minZoom),n.yO=Math.round(e.maxZoom),i.Su(),i.R={Ic:q,kc:0,mt:0,fM:0,Q2:0,ZB:q,WE:-1,Ne:[]},i.platform.style.cursor=i.M.Wb,s=0;s<z.Br.length;s++)z.Br[s](i);i.R.WE=s,i.ba(),I.load("map",function(){i.vb()}),i.M.nj&&(setTimeout(function(){Oa(za)},1e3),I.load("mapclick",function(){window.MPC_Mgr=window.MPC_Mgr||{},window.MPC_Mgr[i.ca]=new Ra(i)},o)),Sa()&&I.load("oppc",function(){i.nz()}),G()&&I.load("opmb",function(){i.nz()}),t=p,i.IB=[]}}function Oa(t,e){if(t){var i,e=e||{},n="";for(i in e)n=n+"&"+i+"="+encodeURIComponent(e[i]);var s=function(t){t&&(nb=o,setTimeout(function(){},50))},a=function(){var t=pb.shift();t&&s(t)};i=(1e8*Math.random()).toFixed(0),nb?pb.push({src:"product=jsapi&sub_product=jsapi&v="+z.version+"&sub_product_v="+z.version+"&t="+i+"&code="+t+"&da_src="+t+n}):s({src:"product=jsapi&sub_product=jsapi&v="+z.version+"&sub_product_v="+z.version+"&t="+i+"&code="+t+"&da_src="+t+n}),qb||(x.K(ob,"load",function(){nb=q,a()}),x.K(ob,"error",function(){nb=q,a()}),qb=o)}}function rb(t){var e={duration:1e3,Gc:30,Io:0,hc:sb.jM,yt:s()};if(this.Zf=[],t)for(var i in t)e[i]=t[i];if(this.k=e,Ua(e.Io)){var n=this;setTimeout(function(){n.start()},e.Io)}else e.Io!=tb&&this.start()}function ub(t){var e=$a();e>=t.Uz?(Va(t.k.ta)&&t.k.ta(t.k.hc(1)),Va(t.k.finish)&&t.k.finish(),0<t.Zf.length&&(e=t.Zf[0],e.Zf=[].concat(t.Zf.slice(1)),e.start())):(t.qy=t.k.hc((e-t.Lu)/t.k.duration),Va(t.k.ta)&&t.k.ta(t.qy),t.zF||(t.Rr=setTimeout(function(){ub(t)},1e3/t.k.Gc)))}function vb(t,e){var i=t.style;i.left=e[0]+"px",i.top=e[1]+"px"}function wb(t){0<x.ea.la?t.unselectable="on":t.style.MozUserSelect="none"}function xb(t){return t&&t.parentNode&&11!==t.parentNode.nodeType}function yb(t,e){return x.D.Fx(t,"beforeEnd",e),t.lastChild}function zb(t){for(var e={left:0,top:0};t&&t.offsetParent;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e}function na(t){t=window.event||t,t.stopPropagation?t.stopPropagation():t.cancelBubble=o}function Ab(t){return t=window.event||t,t.preventDefault?t.preventDefault():t.returnValue=q,q}function oa(t){return na(t),Ab(t)}function Bb(){var t=document.documentElement,e=document.body;return t&&(t.scrollTop||t.scrollLeft)?[t.scrollTop,t.scrollLeft]:e?[e.scrollTop,e.scrollLeft]:[0,0]}function Db(t,e){return t&&e?Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))):void 0}function Eb(t,e){var i,n=[],e=e||function(t){return t};for(i in t)n.push(i+"="+e(t[i]));return n.join("&")}function K(t,e,i){var n=document.createElement(t);return i&&(n=document.createElementNS(i,t)),x.D.jF(n,e||{})}function Ta(t){return t.currentStyle?t.currentStyle:t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,p):void 0}function Va(t){return"function"==typeof t}function Ua(t){return"number"==typeof t}function Xa(t){return"string"==typeof t}function Fb(t){return"undefined"!=typeof t}function Gb(t){return"object"==typeof t}function Ib(t){var e,i,n,o="",s="",a="",r=0;if(n=/[^A-Za-z0-9\+\/\=]/g,!t||n.exec(t))return t;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=Hb.indexOf(t.charAt(r++)),i=Hb.indexOf(t.charAt(r++)),n=Hb.indexOf(t.charAt(r++)),a=Hb.indexOf(t.charAt(r++)),e=e<<2|i>>4,i=(15&i)<<4|n>>2,s=(3&n)<<6|a,o+=String.fromCharCode(e),64!=n&&(o+=String.fromCharCode(i)),64!=a&&(o+=String.fromCharCode(s));while(r<t.length);return o}function G(){return!(!x.platform.kE&&!x.platform.cY&&!x.platform.Gm)}function Sa(){return!(!x.platform.bM&&!x.platform.UL&&!x.platform.iY)}function $a(){return(new Date).getTime()}function Jb(){var t=document.body.appendChild(K("div"));t.innerHTML='<v:shape id="vml_tester1" adj="1" />';var e=t.firstChild;return e.style?(e.style.behavior="url(#default#VML)",e=e?"object"==typeof e.adj:o,t.parentNode.removeChild(t),e):q}function Kb(){return!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")}function Lb(){return!!K("canvas").getContext}function Mb(t){return t*Math.PI/180}function Nb(t,e,i){e.Mm||(e.Mm=[],e.handle={}),e.Mm.push({filter:i,mm:t}),e.addEventListener||(e.addEventListener=function(t,i){e.attachEvent("on"+t,i)}),e.handle.click||(e.addEventListener("click",function(t){for(var i=t.target||t.srcElement;i!=e;)Ob(e.Mm,function(e,n){RegExp(n.filter).test(i.getAttribute("filter"))&&n.mm.call(i,t,i.getAttribute("filter"))}),i=i.parentNode},q),e.handle.click=o)}function Ob(t,e){for(var i=0,n=t.length;n>i;i++)e(i,t[i])}function Pb(t,e){if(!/^http/.test(t)){if(e){var i=(1e5*Math.random()).toFixed(0);z._rd["_cbk"+i]=function(t){e&&e(t),delete z._rd["_cbk"+i]},t+="&callback=BMap._rd._cbk"+i}var n=K("script",{type:"text/javascript"});n.charset="utf-8",n.src=t,n.addEventListener?n.addEventListener("load",function(t){t=t.target,t.parentNode.removeChild(t)},q):n.attachEvent&&n.attachEvent("onreadystatechange",function(){var t=window.event.srcElement;t&&("loaded"==t.readyState||"complete"==t.readyState)&&t.parentNode.removeChild(t)}),setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(n),n=p},1)}}function I(){}function Q(t,e){this.x=t||0,this.y=e||0,this.x=this.x,this.y=this.y}function L(t,e){this.width=t||0,this.height=e||0}function hb(t,e){t&&(this.Kb=t,this.ca="spot"+hb.ca++,e=e||{},this.Vg=e.text||"",this.wv=e.offsets?e.offsets.slice(0):[5,5,5,5],this.iJ=e.userData||p,this.Qh=e.minZoom||p,this.Cf=e.maxZoom||p)}function Rb(){this.C=p,this.Lb="control",this.Pa=this.OJ=o}function ib(t){Rb.call(this),t=t||{},this.k={Ag:q,vF:t.showZoomInfo||o,anchor:t.anchor,ya:t.offset,type:t.type,hW:t.enableGeolocation||q},this.defaultAnchor=G()?3:Sb,this.defaultOffset=new L(10,10),this.pc(t.anchor),this.jn(t.type),this.xe()}function Vb(t){Rb.call(this),t=t||{},this.k={anchor:t.anchor||Ub,ya:t.offset||new L(10,30),YZ:t.showAddressBar!==q,D1:t.enableAutoLocation||q,rM:t.locationIcon||p};var e=this;this.rz=1200,e.M_=[],this.ke=[],I.load("geoctrl",function(){!function t(){if(0!==e.ke.length){var i=e.ke.shift();e[i.method].apply(e,i.arguments),t()}}(),e.LP()}),Oa(Ja)}function Wb(t){Rb.call(this),t=t||{},this.k={Ag:q,anchor:t.anchor,ya:t.offset},this.ac=[],this.defaultAnchor=Ub,this.defaultOffset=new L(5,2),this.pc(t.anchor),this.OJ=q,this.xe()}function kb(t){Rb.call(this),t=t||{},this.k={Ag:q,size:t.size||new L(150,150),padding:5,Va:t.isOpen===o?o:q,a0:4,ya:t.offset,anchor:t.anchor},this.defaultAnchor=3,this.defaultOffset=new L(0,0),this.xq=this.yq=13,this.pc(t.anchor),this.we(this.k.size),this.xe()}function Xb(t){Rb.call(this),t=t||{},this.defaultAnchor=Sb,this.gj="",this.defaultOffset=new L(10,10),this.onChangeBefore=[],this.onChangeAfter=[],this.k={Ag:q,ya:t.offset||this.defaultOffset,anchor:t.anchor||this.defaultAnchor,expand:!!t.expand},t.onChangeBefore&&Va(t.onChangeBefore)&&this.onChangeBefore.push(t.onChangeBefore),t.onChangeAfter&&Va(t.onChangeAfter)&&this.onChangeAfter.push(t.onChangeAfter),this.pc(t.anchor),this.xe()}function jb(t){Rb.call(this),t=t||{},this.k={Ag:q,color:"black",dd:"metric",ya:t.offset},this.defaultAnchor=Ub,this.defaultOffset=new L(81,18),this.pc(t.anchor),this.Zh={metric:{name:"metric",dK:1,NL:1e3,sO:"米",tO:"公里"},us:{name:"us",dK:3.2808,NL:5280,sO:"英尺",tO:"英里"}},this.Zh[this.k.dd]||(this.k.dd="metric"),this.GI=p,this.gI={},this.xe()}function lb(t){Rb.call(this),t=t||{},this.defaultAnchor=Tb,this.defaultOffset=new L(10,10),this.k={Ag:q,ph:[La,Wa,Pa,Na],LV:["B_DIMENSIONAL_MAP","B_SATELLITE_MAP","B_NORMAL_MAP"],type:t.type||Yb,ya:t.offset||this.defaultOffset,lW:o},this.pc(t.anchor),"[object Array]"==Object.prototype.toString.call(t.mapTypes)&&(this.k.ph=t.mapTypes.slice(0)),this.xe()}function Zb(t){Rb.call(this),t=t||{},this.k={Ag:q,ya:t.offset,anchor:t.anchor},this.Si=q,this.Tv=p,this.pI=new $b({Of:"api"}),this.qI=new ac(p,{Of:"api"}),this.defaultAnchor=Tb,this.defaultOffset=new L(10,10),this.pc(t.anchor),this.xe(),Oa(wa)}function bc(t){x.lang.Ba.call(this),this.k={Ua:p,cursor:"default"},this.k=x.extend(this.k,t),this.Lb="contextmenu",this.C=p,this.xa=[],this.Ff=[],this.ze=[],this.Nw=this.gs=p,this.Ph=q;var e=this;I.load("menu",function(){e.vb()})}function ec(t,e,i){if(t&&Va(e)){x.lang.Ba.call(this),this.k={width:100,id:"",Cm:""},i=i||{},this.k.width=1*i.width?i.width:100,this.k.id=i.id?i.id:"",this.k.Cm=i.iconUrl?i.iconUrl:"",this.Vg=t+"",this.vz=e,this.C=p,this.Lb="menuitem",this.Pr=this.lv=this.B=this.Hh=p,this.Lh=o;var n=this;I.load("menu",function(){n.vb()})}}function eb(t,e){t&&!e&&(e=t),this.De=this.Ce=this.Je=this.Ie=this.Ll=this.ul=p,t&&(this.Ll=new H(t.lng,t.lat),this.ul=new H(e.lng,e.lat),this.Je=t.lng,this.Ie=t.lat,this.De=e.lng,this.Ce=e.lat)}function H(t,e){isNaN(t)&&(t=Ib(t),t=isNaN(t)?0:t),Xa(t)&&(t=parseFloat(t)),isNaN(e)&&(e=Ib(e),e=isNaN(e)?0:e),Xa(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}function fc(){}function gc(){}function hc(){this.Oa=[];var t=this;I.load("convertor",function(){t.JP()})}function R(){}function gb(){this.gj="bj"}function ic(){this.Lb="overlay"}function fb(){x.lang.Ba.call(this),ic.call(this),this.map=p,this.Pa=o,this.xb=p,this.YG=0}function jc(){this.map=p,this.ua={},this.ye=[]}function kc(t){fb.call(this),t=t||{},this.z={strokeColor:t.strokeColor||"#3a6bdb",lc:t.strokeWeight||5,sd:t.strokeOpacity||.65,strokeStyle:t.strokeStyle||"solid",ii:t.enableMassClear===q?q:o,wk:p,sm:p,Nf:t.enableEditing===o?o:q,EM:5,L_:q,ff:t.enableClicking===q?q:o,ni:t.icons&&0<t.icons.length?t.icons:p},0>=this.z.lc&&(this.z.lc=5),(0>this.z.sd||1<this.z.sd)&&(this.z.sd=.65),(0>this.z.qg||1<this.z.qg)&&(this.z.qg=.65),"solid"!=this.z.strokeStyle&&"dashed"!=this.z.strokeStyle&&(this.z.strokeStyle="solid"),this.V=p,this.Mu=new eb(0,0),this.bf=[],this.mc=[],this.Qa={}}function lc(t){fb.call(this),this.V=this.map=p,this.z={width:0,height:0,ya:new L(0,0),opacity:1,background:"transparent",Nx:1,hM:"#000",pY:"solid",point:p},this.CN(t),this.point=this.z.point}function mc(t,e,i){t&&e&&(this.imageUrl=t,this.size=e,t=new L(Math.floor(e.width/2),Math.floor(e.height/2)),i=i||{},t=i.anchor||t,e=i.imageOffset||new L(0,0),this.imageSize=i.imageSize,this.anchor=t,this.imageOffset=e,this.infoWindowAnchor=i.infoWindowAnchor||this.anchor,this.printImageUrl=i.printImageUrl||"")}function nc(t,e){if(t){e=e||{},this.style={anchor:e.anchor||new L(0,0),fillColor:e.fillColor||"#000",qg:e.fillOpacity||0,scale:e.scale||1,rotation:e.rotation||0,strokeColor:e.strokeColor||"#000",sd:e.strokeOpacity||1,lc:e.strokeWeight},this.Lb="number"==typeof t?t:"UserDefined",this.Ji=this.style.anchor,this.or=new L(0,0),this.anchor=p,this.gB=t;var i=this;I.load("symbol",function(){i.Jn()},o)}}function oc(t,e,i,n){t&&(this.Bv={},this.RK=n?!!n:q,this.Vc=[],this.l_=t instanceof nc?t:p,this.vI=e===j?o:!!(e.indexOf("%")+1),this.$j=isNaN(parseFloat(e))?1:this.vI?parseFloat(e)/100:parseFloat(e),this.wI=!!(i.indexOf("%")+1),this.repeat=i!=j?this.wI?parseFloat(i)/100:parseFloat(i):0)}function pc(t,e){x.lang.Ba.call(this),this.content=t,this.map=p,e=e||{},this.z={width:e.width||0,height:e.height||0,maxWidth:e.maxWidth||730,ya:e.offset||new L(0,0),title:e.title||"",BE:e.maxContent||"",dh:e.enableMaximize||q,Ds:e.enableAutoPan===q?q:o,aD:e.enableCloseOnClick===q?q:o,margin:e.margin||[10,10,40,10],iC:e.collisions||[[10,10],[10,10],[10,10],[10,10]],OX:q,KY:e.onClosing||ca(o),IK:q,fD:e.enableParano===o?o:q,message:e.message,hD:e.enableSearchTool===o?o:q,zx:e.headerContent||"",bD:e.enableContentScroll||q},0!=this.z.width&&(220>this.z.width&&(this.z.width=220),730<this.z.width)&&(this.z.width=730),0!=this.z.height&&(60>this.z.height&&(this.z.height=60),650<this.z.height)&&(this.z.height=650),0!=this.z.maxWidth&&(220>this.z.maxWidth&&(this.z.maxWidth=220),730<this.z.maxWidth)&&(this.z.maxWidth=730),this.ae=q,this.Ei=F.oa,this.$a=p;var i=this;I.load("infowindow",function(){i.vb()})}function qc(t,e){fb.call(this),this.content=t,this.V=this.map=p,e=e||{},this.z={width:0,ya:e.offset||new L(0,0),Rp:{backgroundColor:"#fff",border:"1px solid #f00",padding:"1px",whiteSpace:"nowrap",font:"12px "+F.fontFamily,zIndex:"80",MozUserSelect:"none"},position:e.position||p,ii:e.enableMassClear===q?q:o,ff:o},0>this.z.width&&(this.z.width=0),Fb(e.enableClicking)&&(this.z.ff=e.enableClicking),this.point=this.z.position;var i=this;I.load("marker",function(){i.vb()})}function rc(t,e){if(0!==arguments.length){fb.apply(this,arguments),e=e||{},this.z={fb:t,opacity:e.opacity||1,Em:e.Em||"",rs:e.displayOnMinLevel||1,ii:e.enableMassClear===q?q:o,qs:e.displayOnMaxLevel||19,f_:e.stretch||q};var i=this;I.load("groundoverlay",function(){i.vb()})}}function uc(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function vc(t,e){var i=this;uc()&&(t===j&&aa(Error("没有传入points数据")),"[object Array]"!==Object.prototype.toString.call(t)&&aa(Error("points数据不是数组")),e=e||{},fb.apply(i,arguments),i.da={ia:t},i.z={shape:e.shape||sc,size:e.size||tc,color:e.color||"#fa937e",ii:o},this.dB=[],this.ke=[],I.load("pointcollection",function(){for(var t,e=0;t=i.dB[e];e++)i[t.method].apply(i,t.arguments);for(e=0;t=i.ke[e];e++)i[t.method].apply(i,t.arguments)}))}function T(t,e){fb.call(this),e=e||{},this.point=t,this.tq=this.map=p,this.z={ya:e.offset||new L(0,0),vj:e.icon||wc,Nk:xc,title:e.title||"",label:p,NJ:e.baseZIndex||0,ff:o,u4:q,pE:q,ii:e.enableMassClear===q?q:o,bc:q,lN:e.raiseOnDrag===o?o:q,sN:q,Dd:e.draggingCursor||F.Dd,rotation:e.rotation||0},e.icon&&!e.shadow&&(this.z.Nk=p),e.enableDragging&&(this.z.bc=e.enableDragging),Fb(e.enableClicking)&&(this.z.ff=e.enableClicking);var i=this;I.load("marker",function(){i.vb()})}function yc(t,e){kc.call(this,e),e=e||{},this.z.qg=e.fillOpacity?e.fillOpacity:.65,this.z.fillColor=""==e.fillColor?"":e.fillColor?e.fillColor:"#fff",this.ge(t);var i=this;I.load("poly",function(){i.vb()})}function zc(t,e){kc.call(this,e),this.Ir(t);var i=this;I.load("poly",function(){i.vb()})}function Ac(t,e,i){this.point=t,this.wa=Math.abs(e),yc.call(this,[],i)}function Cc(t){this.map=t,this.Km=[],this.Wf=[],this.Eg=[],this.cV=300,this.VE=0,this.wg={},this.fj={},this.th=0,this.jE=o,this.oK={},this.ao=this.Mn(1),this.md=this.Mn(2),this.vl=this.Mn(3),t.platform.appendChild(this.ao),t.platform.appendChild(this.md),t.platform.appendChild(this.vl)}function Hc(t,e,i,n,s){this.Nm=t,this.position=i,this.Qu=[],this.name=t.SD(n,s),this.info=n,this.fJ=s.lt(),n=K("img"),wb(n),n.UK=q;var a=n.style,t=t.map.va();a.position="absolute",a.border="none",a.width=t.k.Ob+"px",a.height=t.k.Ob+"px",a.left=i[0]+"px",a.top=i[1]+"px",a.maxWidth="none",this.Gb=n,this.src=e,Jc&&(this.Gb.style.opacity=0);var r=this;this.Gb.onload=function(){if(z.rY.wQ(),r.loaded=o,r.Nm){var t=r.Nm,e=t.fj;e[r.name]||(t.VE++,e[r.name]=r),r.Gb&&!xb(r.Gb)&&s.Pb&&(s.Pb.appendChild(r.Gb),x.ea.la<=6&&x.ea.la>0&&r.fJ&&(r.Gb.style.cssText=r.Gb.style.cssText+(';filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+r.src+'",sizingMethod=scale);')));var i,n=t.VE-t.cV;for(i in e){if(0>=n)break;if(!t.wg[i]){e[i].Nm=p;var a=e[i].Gb;a&&a.parentNode&&(a.parentNode.removeChild(a),Ic(a)),a=p,e[i].Gb=p,delete e[i],t.VE--,n--}}Jc&&new rb({Gc:20,duration:200,ta:function(t){r.Gb&&r.Gb.style&&(r.Gb.style.opacity=1*t)},finish:function(){r.Gb&&r.Gb.style&&delete r.Gb.style.opacity}}),Ec(r)}},this.Gb.onerror=function(){if(Ec(r),r.Nm){var t=r.Nm.map.va();t.k.iD&&(r.error=o,r.Gb.src=t.k.iD,r.Gb&&!xb(r.Gb)&&s.Pb.appendChild(r.Gb))}},n=p}function Gc(t,e){t.Qu.push(e)}function Ec(t){for(var e=0;e<t.Qu.length;e++)t.Qu[e]();t.Qu.length=0}function Ic(t){if(t){t.onload=t.onerror=p;var e,i,n,o=t.attributes;if(o)for(i=o.length,e=0;i>e;e+=1)n=o[e].name,Va(t[n])&&(t[n]=p);if(o=t.children)for(i=o.length,e=0;i>e;e+=1)Ic(t.children[e])}}function Fc(t,e){t.src=e,t.$n()}function Dc(t){this.uh=t||{},this.wV=this.uh.copyright||p,this.H_=this.uh.transparentPng||q,this.vw=this.uh.baseLayer||q,this.zIndex=this.uh.zIndex||0,this.ca=Dc.kS++}function Kc(t,e){Gb(t)?e=t||{}:(e=e||{},e.databoxId=t),this.k={pK:e.databoxId,fh:e.geotableId,Wm:e.q||"",eu:e.tags||"",filter:e.filter||"",Ey:e.sortby||"",g_:e.styleId||"",Sl:e.ak||pa,sw:e.age||36e5,zIndex:11,mY:"VectorCloudLayer",Bk:e.hotspotName||"vector_md_"+(1e5*Math.random()).toFixed(0),JU:"LBS云麻点层"},this.mp=o,Dc.call(this,this.k),this.PV=z.Fc+"geosearch/detail/",this.QV=z.Fc+"geosearch/v2/detail/",this.ip={}}function Lc(t){t=t||{},this.k=x.extend(t,{zIndex:1,mY:"VectorTrafficLayer",JU:"矢量路况层"}),this.mp=o,Dc.call(this,this.k),this.D_=z.url.proto+z.url.domain.vector_traffic+"/gvd/?qt=lgvd&styles=pl&layers=tf",this.Cb={0:[2,1354709503,2,2,0,[],0,0],1:[2,1354709503,3,2,0,[],0,0],10:[2,-231722753,2,2,0,[],0,0],11:[2,-231722753,3,2,0,[],0,0],12:[2,-231722753,4,2,0,[],0,0],13:[2,-231722753,5,2,0,[],0,0],14:[2,-231722753,6,2,0,[],0,0],15:[2,-1,4,0,0,[],0,0],16:[2,-1,5.5,0,0,[],0,0],17:[2,-1,7,0,0,[],0,0],18:[2,-1,8.5,0,0,[],0,0],19:[2,-1,10,0,0,[],0,0],2:[2,1354709503,4,2,0,[],0,0],3:[2,1354709503,5,2,0,[],0,0],4:[2,1354709503,6,2,0,[],0,0],5:[2,-6350337,2,2,0,[],0,0],6:[2,-6350337,3,2,0,[],0,0],7:[2,-6350337,4,2,0,[],0,0],8:[2,-6350337,5,2,0,[],0,0],9:[2,-6350337,6,2,0,[],0,0]}}function bb(t){this.dV=[z.url.proto+z.url.domain.TILE_ONLINE_URLS[1]+"/gvd/?",z.url.proto+z.url.domain.TILE_ONLINE_URLS[2]+"/gvd/?",z.url.proto+z.url.domain.TILE_ONLINE_URLS[3]+"/gvd/?",z.url.proto+z.url.domain.TILE_ONLINE_URLS[4]+"/gvd/?"],this.k={QK:q};for(var e in t)this.k[e]=t[e];this.Yh=this.Ih=this.Wa=this.B=this.C=p,this.eM=0;var i=this;I.load("vector",function(){i.xe()})}function Mc(t){Dc.call(this,t),this.k=t||{},this.$L=o,this.Xf=new Lc,this.Xf.Ky=this,this.k.predictDate&&((1>this.k.predictDate.weekday||7<this.k.predictDate.weekday)&&(this.k.predictDate=1),(0>this.k.predictDate.hour||23<this.k.predictDate.hour)&&(this.k.predictDate.hour=0)),this.nU=z.url.proto+z.url.domain.traffic+":8002/traffic/"}function mb(t,e){Dc.call(this);var i=this;this.$L=o;var n=q;try{document.createElement("canvas").getContext("2d"),n=o}catch(s){n=q}n&&(this.Xf=new Kc(t,e),this.Xf.Ky=this),Gb(t)?e=t||{}:(i.Pn=t,e=e||{}),e.geotableId&&(i.xf=e.geotableId),e.databoxId&&(i.Pn=e.databoxId),n=z.Fc+"geosearch",i.nc={hN:e.pointDensity||Pc,LX:n+"/detail/",MX:n+"/v2/detail/",sw:e.age||36e5,Wm:e.q||"",q_:"png",F2:[5,5,5,5],lY:{backgroundColor:"#FFFFD5",borderColor:"#808080"},Sl:e.ak||pa,eu:e.tags||"",filter:e.filter||"",Ey:e.sortby||"",Bk:e.hotspotName||"tile_md_"+(1e5*Math.random()).toFixed(0),JF:o},I.load("clayer",function(){i.Nd()})}function Qc(t,e,i){this.af=t,this.jr=e instanceof Dc?[e]:e.slice(0),i=i||{},this.k={r_:i.tips||"",uE:"",dc:i.minZoom||3,Yb:i.maxZoom||18,E2:i.minZoom||3,D2:i.maxZoom||18,Ob:256,AF:i.textColor||"black",iD:i.errorImageUrl||"",ve:i.projection||new R},1<=this.jr.length&&(this.jr[0].vw=o),x.extend(this.k,i)}function V(t,e){x.lang.Ba.call(this),this.zd={},this.gn(t),e=e||{},e.ka=e.renderOptions||{},this.k={ka:{Ga:e.ka.panel||p,map:e.ka.map||p,Zg:e.ka.autoViewport||o,It:e.ka.selectFirstResult,bt:e.ka.highlightMode,bc:e.ka.enableDragging||q},Zx:e.onSearchComplete||s(),UM:e.onMarkersSet||s(),TM:e.onInfoHtmlSet||s(),WM:e.onResultsHtmlSet||s(),SM:e.onGetBusListComplete||s(),RM:e.onGetBusLineComplete||s(),PM:e.onBusListHtmlSet||s(),OM:e.onBusLineHtmlSet||s(),HE:e.onPolylinesSet||s(),Ap:e.reqFrom||""},this.k.ka.Zg="undefined"!=typeof e&&"undefined"!=typeof e.renderOptions&&"undefined"!=typeof e.renderOptions.autoViewport?e.renderOptions.autoViewport:o,this.k.ka.Ga=x.Cc(this.k.ka.Ga)}function nd(t,e,i){if(x.lang.Ba.call(this),t){this.Ua="object"==typeof t?t:x.Cc(t),this.page=1,this.Hd=100,this.JJ="pg",this.Uf=4,this.RJ=e,this.update=o,t={page:1,Ue:100,Hd:100,Uf:4,JJ:"pg",update:o},i||(i=t);for(var n in i)"undefined"!=typeof i[n]&&(this[n]=i[n]);this.ta()}}function ab(t,e){V.call(this,t,e),e=e||{},e.renderOptions=e.renderOptions||{},this.Kp(e.pageCapacity),"undefined"==typeof e.renderOptions.selectFirstResult||e.renderOptions.selectFirstResult?this.dD():this.HC(),this.ua=[],this.sf=[],this.ib=-1,this.Oa=[];var i=this;I.load("local",function(){i.zz()},o)}function pd(t,e){V.call(this,t,e)}function qd(t,e){V.call(this,t,e),e=e||{},this.Qt(e.policy),this.Kp(e.pageCapacity),this.vd=dd,this.Bu=id,this.Cu=Yc,this.ua=[],this.ib=-1,this.k.fd=e.enableTraffic||q,this.Oa=[];var i=this;I.load("route",function(){i.Nd()})}function sd(t,e){V.call(this,t,e),this.ua=[],this.ib=-1,this.Oa=[];var i=this,n=this.k.ka;1!==n.bt&&2!==n.bt&&(n.bt=1),this.Tz=this.k.ka.bc?o:q,I.load("route",function(){i.Nd()}),this.gE&&this.gE()}function td(t,e){sd.call(this,t,e),e=e||{},this.k.fd=e.enableTraffic||q,this.Qt(e.policy),this.vd=ed,this.Bu=ld,this.Cu=ad}function ud(t,e){sd.call(this,t,e),this.vd=fd,this.Bu=md,this.Cu=$c,this.Tz=q}function vd(t,e){x.lang.Ba.call(this),this.Sf=[],this.Tm=[],this.k=e,this.cc=t,this.map=this.k.ka.map||p,this.py=this.k.py,this.xb=p,this.hj=0,this.Fy="",this.$d=1,this.Yw="",this.Bp=[0,0,0,0,0,0,0],this.wE=[],this.fs=[1,1,1,1,1,1,1],this.kO=[1,1,1,1,1,1,1],this.Gt=[0,0,0,0,0,0,0],this.Cp=[0,0,0,0,0,0,0],this.Ma=[{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1},{o:"",Lf:0,tn:0,x:0,y:0,Ac:-1}],this.fi=-1,this.gu=[],this.hu=[],I.load("route",s())}function yd(t){this.uh=t||{}}function zd(t){this.k={},x.extend(this.k,t),this.Oa=[];var e=this;I.load("othersearch",function(){e.Nd()})}function Geolocation(t){t=t||{},this.M={timeout:t.timeout||1e4,maximumAge:t.maximumAge||6e5},this.ke=[];var e=this;I.load("othersearch",function(){for(var t,i=0;t=e.ke[i];i++)e[t.method].apply(e,t.arguments)})}function Bd(t){t=t||{},t.ka=t.renderOptions||{},this.k={ka:{map:t.ka.map||p}},this.Oa=[];var e=this;I.load("othersearch",function(){e.Nd()})}function Ed(){this.Oa=[];var t=this;I.load("othersearch",function(){t.Nd()})}function Fd(t,e){V.call(this,t,e),this.lP=gd,this.nP=jd,this.kP=hd,this.mP=kd,this.Oa=[];var i=this;I.load("buslinesearch",function(){i.Nd()})}function Gd(t){V.call(this,t),t=t||{},this.nc={input:t.input||p,TB:t.baseDom||p,types:t.types||[],Zx:t.onSearchComplete||s()},this.zd.src=t.location||"全国",this.cj="",this.mg=p,this.PH="",this.Ri(),Oa(Ia);var e=this;I.load("autocomplete",function(){e.Nd()})}function Ma(t,e){function i(){a.k.visible?("inter"===a.Fe&&a.k.haveBreakId&&a.k.indoorExitControl===o?x.D.show(a.sA):x.D.U(a.sA),this.k.closeControl&&this.wf&&this.C&&this.C.Na()===this.B?x.D.show(a.wf):x.D.U(a.wf),this.k.forceCloseControl&&x.D.show(a.wf)):(x.D.U(a.wf),x.D.U(a.sA))}this.B="string"==typeof t?x.$(t):t,this.k={enableScrollWheelZoom:o,panoramaRenderer:"flash",swfSrc:z.tg("main_domain_nocdn","res/swf/")+"APILoader.swf",visible:o,indoorExitControl:o,indoorFloorControl:q,linksControl:o,clickOnRoad:o,navigationControl:o,closeControl:o,indoorSceneSwitchControl:o,albumsControl:q,albumsControlOptions:{},copyrightControlOptions:{},forceCloseControl:q,haveBreakId:q};var n,e=e||{};for(n in e)this.k[n]=e[n];e.closeControl===o&&(this.k.forceCloseControl=o),this.Ca={heading:0,pitch:0},this.Zn=[],this.Kb=this.Xa=p,this.dk=this.Yq(),this.ua=[],this.Kc=1,this.Fe=this.OS=this.dl="",this.Ee={},this.Jf=p,this.Rg=[],this.ur=[],"cvsRender"==this.dk||Hd()?(this.Wj=90,this.Yj=-90):"cssRender"==this.dk&&(this.Wj=45,this.Yj=-45),this.yr=q;var a=this;this.$n=function(){"flashRender"===this.dk?I.load("panoramaflash",function(){a.Ri()},o):I.load("panorama",function(){a.vb()},o),Oa("api"==e.Of?Da:Fa),this.$n=s()},this.k.BS!==o&&(this.$n(),z.Ij("cus.fire","count","z_loadpanoramacount")),this.sT(this.B),this.addEventListener("id_changed",function(){Oa(Ca,{from:e.Of})}),this.FP(),this.addEventListener("indoorexit_options_changed",i),this.addEventListener("scene_type_changed",i),this.addEventListener("onclose_options_changed",i),this.addEventListener("onvisible_changed",i)}function Ld(){x.lang.Ba.call(this),this.jd="PanoramaOverlay_"+this.ca,this.P=p,this.Pa=o}function Md(t,e){Ld.call(this);var i,n={position:p,altitude:2,displayDistance:o},e=e||{};for(i in e)n[i]=e[i];this.Kb=n.position,this.Mj=t,this.rq=n.altitude,this.RQ=n.displayDistance,this.AF=n.color,this.GL=n.hoverColor,this.backgroundColor=n.backgroundColor,this.LJ=n.backgroundHoverColor,this.borderColor=n.borderColor,this.PJ=n.borderHoverColor,this.fontSize=n.fontSize,this.padding=n.padding,this.aE=n.imageUrl,this.size=n.size,this.re=n.image,this.width=n.width,this.height=n.height,this.PX=n.imageData,this.borderWidth=n.borderWidth}function Pd(t,e){Ld.call(this);var i,n={icon:"",title:"",panoInfo:p,altitude:2},e=e||{};for(i in e)n[i]=e[i];this.Kb=t,this.KH=n.icon,this.dJ=n.title,this.rq=n.altitude,this.eT=n.panoInfo,this.Ca={heading:0,pitch:0}}function Nd(t,e){var i=0;if(0!==t&&0!==e){var i=180*(Math.atan(t/e)/Math.PI),n=0;t>0&&0>e&&(n=90),0>t&&0>e&&(n=180),0>t&&e>0&&(n=270),i=(i+90)%90+n}else 0===t?i=0>e?180:0:0===e&&(i=t>0?90:270);return Math.round(i)}function Hd(){if("boolean"==typeof Rd)return Rd;if(!window.WebGLRenderingContext||x.platform.Gm&&-1==navigator.userAgent.indexOf("Android 5"))return Rd=q;var t=document.createElement("canvas"),e=p;try{e=t.getContext("webgl")}catch(i){Rd=q}return Rd=e===p?q:o}function ac(t,e){this.P=t||p;var i=this;i.P&&i.ba(),I.load("pservice",function(){i.jQ()}),Oa("api"==(e||{}).Of?Ga:Ha),this.xd={getPanoramaById:[],getPanoramaByLocation:[],getVisiblePOIs:[],getRecommendPanosById:[],getPanoramaVersions:[],checkPanoSupportByCityCode:[],getPanoramaByPOIId:[],getCopyrightProviders:[]}}function $b(t){Dc.call(this),Oa("api"==(t||{}).Of?Aa:Ba)}function Td(){}function Ce(t,e){var i,n=this;n.xn="object"==typeof t?t:Wd.getElementById(t),n.xn.style.overflow="hidden",n.Nb=n.xn.children[0],n.options={hp:o,vn:o,x:0,y:0,Bo:o,$U:q,Sx:o,xE:o,Uk:o,Bi:q,u_:0,Aw:q,xx:o,mi:o,Ci:o,nD:xd,Bx:ne,qW:ne&&pe,eF:"",zoom:q,Vk:1,Xp:4,ZV:2,JO:"scroll",Yt:q,Dy:1,VM:p,NM:function(t){t.preventDefault()},YM:p,MM:p,XM:p,LM:p,Yx:p,ZM:p,QM:p,vp:p,$M:p,up:p};for(i in e)n.options[i]=e[i];n.x=n.options.x,n.y=n.options.y,n.options.Uk=re&&n.options.Uk,n.options.mi=n.options.hp&&n.options.mi,n.options.Ci=n.options.vn&&n.options.Ci,n.options.zoom=n.options.Uk&&n.options.zoom,n.options.Bi=se&&n.options.Bi,n.options.zoom&&xd&&(Be=""),n.Nb.style[ge]=n.options.Uk?de+"transform":"top left",n.Nb.style[he]="0",n.Nb.style[ie]="0 0",n.options.Bi&&(n.Nb.style[je]="cubic-bezier(0.33,0.66,0.66,1)"),n.options.Uk?n.Nb.style[fe]="translate("+n.x+"px,"+n.y+"px)"+Be:n.Nb.style.cssText+=";position:absolute;top:"+n.y+"px;left:"+n.x+"px",n.options.Bi&&(n.options.nD=o),n.refresh(),n.ba(te,window),n.ba(ue),!qe&&"none"!=n.options.JO&&(n.ba("DOMMouseScroll"),n.ba("mousewheel")),n.options.Aw&&(n.hV=setInterval(function(){n.gQ()},500)),this.options.xx&&(Event.prototype.stopImmediatePropagation||(document.body.removeEventListener=function(t,e,i){var n=Node.prototype.removeEventListener;"click"===t?n.call(document.body,t,e.EL||e,i):n.call(document.body,t,e,i)},document.body.addEventListener=function(t,e,i){var n=Node.prototype.addEventListener;"click"===t?n.call(document.body,t,e.EL||(e.EL=function(t){t.bZ||e(t)}),i):n.call(document.body,t,e,i)}),n.ba("click",document.body,o))}function ee(t){return""===Zd?t:(t=t.charAt(0).toUpperCase()+t.substr(1),Zd+t)}function De(t){this.k={anchor:Ub,offset:new L(0,0),maxWidth:"100%",imageHeight:80};var e,t=t||{};for(e in t)this.k[e]=t[e];this.Hl=new ac(p,{Of:"api"}),this.bk=[],this.P=p,this.eg={height:this.k.imageHeight,width:this.k.imageHeight*Ee},this.Pc=this.mB=this.$l=this.Yc=p}function He(t){this.B=t,this.Ug=t.children[0],this.Lr=p,this.Gi=20,this.offsetLeft=0,this.pa()}function S(t,e){for(var i in e)t[i]=e[i]}var j=void 0,o=!0,p=null,q=!1,da,ga=[],ja,x=ja=x||{version:"1.3.4"};x.ca="$BAIDU$",window[x.ca]=window[x.ca]||{},x.object=x.object||{},x.extend=x.object.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},x.D=x.D||{},x.D.$=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:p},x.$=x.Cc=x.D.$,x.D.U=function(t){return t=x.D.$(t),t===p?t:(t.style.display="none",t)},x.U=x.D.U,x.lang=x.lang||{},x.lang.ug=function(t){return"[object String]"==Object.prototype.toString.call(t)},x.ug=x.lang.ug,x.D.Qj=function(t){return x.lang.ug(t)?document.getElementById(t):t},x.Qj=x.D.Qj,x.D.getElementsByClassName=function(t,e){var i;if(t.getElementsByClassName)i=t.getElementsByClassName(e);else{var n=t;n==p&&(n=document),i=[];var o,s,n=n.getElementsByTagName("*"),a=n.length,r=RegExp("(^|\\s)"+e+"(\\s|$)");for(s=o=0;a>o;o++)r.test(n[o].className)&&(i[s]=n[o],s++)}return i},x.getElementsByClassName=x.D.getElementsByClassName,x.D.contains=function(t,e){var i=x.D.Qj,t=i(t),e=i(e);return t.contains?t!=e&&t.contains(e):!!(16&t.compareDocumentPosition(e));
},x.ea=x.ea||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(x.ea.la=x.la=document.documentMode||+RegExp.$1);var ka={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};8>x.ea.la?(ka["for"]="htmlFor",ka["class"]="className"):(ka.htmlFor="for",ka.className="class"),x.D.uG=ka,x.D.iF=function(t,e,i){return t=x.D.$(t),t===p?t:("style"==e?t.style.cssText=i:(e=x.D.uG[e]||e,t.setAttribute(e,i)),t)},x.iF=x.D.iF,x.D.jF=function(t,e){if(t=x.D.$(t),t===p)return t;for(var i in e)x.D.iF(t,i,e[i]);return t},x.jF=x.D.jF,x.Sk=x.Sk||{},function(){var t=RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");x.Sk.trim=function(e){return(""+e).replace(t,"")}}(),x.trim=x.Sk.trim,x.Sk.Ro=function(t,e){var t=""+t,i=Array.prototype.slice.call(arguments,1),n=Object.prototype.toString;return i.length?(i=1==i.length&&e!==p&&/\[object Array\]|\[object Object\]/.test(n.call(e))?e:i,t.replace(/#\{(.+?)\}/g,function(t,e){var o=i[e];return"[object Function]"==n.call(o)&&(o=o(e)),"undefined"==typeof o?"":o})):t},x.Ro=x.Sk.Ro,x.D.Rb=function(t,e){if(t=x.D.$(t),t===p)return t;for(var i,n,o=t.className.split(/\s+/),s=e.split(/\s+/),a=s.length,r=0;a>r;++r)for(n=0,i=o.length;i>n;++n)if(o[n]==s[r]){o.splice(n,1);break}return t.className=o.join(" "),t},x.Rb=x.D.Rb,x.D.Fx=function(t,e,i){if(t=x.D.$(t),t===p)return t;var n;return t.insertAdjacentHTML?t.insertAdjacentHTML(e,i):(n=t.ownerDocument.createRange(),e=e.toUpperCase(),"AFTERBEGIN"==e||"BEFOREEND"==e?(n.selectNodeContents(t),n.collapse("AFTERBEGIN"==e)):(e="BEFOREBEGIN"==e,n[e?"setStartBefore":"setEndAfter"](t),n.collapse(e)),n.insertNode(n.createContextualFragment(i))),t},x.Fx=x.D.Fx,x.D.show=function(t){return t=x.D.$(t),t===p?t:(t.style.display="",t)},x.show=x.D.show,x.D.BD=function(t){return t=x.D.$(t),t===p?t:9==t.nodeType?t:t.ownerDocument||t.document},x.D.Ta=function(t,e){if(t=x.D.$(t),t===p)return t;for(var i=e.split(/\s+/),n=t.className,o=" "+n+" ",s=0,a=i.length;a>s;s++)o.indexOf(" "+i[s]+" ")<0&&(n+=" "+i[s]);return t.className=n,t},x.Ta=x.D.Ta,x.D.AB=x.D.AB||{},x.D.Kl=x.D.Kl||[],x.D.Kl.filter=function(t,e,i){for(var n,o=0,s=x.D.Kl;n=s[o];o++)(n=n[i])&&(e=n(t,e));return e},x.Sk.fO=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})},x.D.t_=function(t){x.D.$s(t,"expand")?x.D.Rb(t,"expand"):x.D.Ta(t,"expand")},x.D.$s=function(t){if(arguments.length<=0||"function"==typeof t)return this;if(this.size()<=0)return q;var e,t=t.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," "),i=t.split(" ");return x.forEach(this,function(t){for(var t=t.className,n=0;n<i.length;n++)if(!~(" "+t+" ").indexOf(" "+i[n]+" "))return void(e=q);e!==q&&(e=o)}),e},x.D.tj=function(t,e){var i=x.D,t=i.$(t);if(t===p)return t;var e=x.Sk.fO(e),n=t.style[e];if(!n)var o=i.AB[e],n=t.currentStyle||(x.ea.la?t.style:getComputedStyle(t,p)),n=o&&o.get?o.get(t,n):n[o||e];return(o=i.Kl)&&(n=o.filter(e,n,"get")),n},x.tj=x.D.tj,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(x.ea.opera=+RegExp.$1),x.ea.aM=/webkit/i.test(navigator.userAgent),x.ea.aY=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),x.ea.oE="CSS1Compat"==document.compatMode,x.D.ha=function(t){if(t=x.D.$(t),t===p)return t;var e=x.D.BD(t),i=x.ea,n=x.D.tj;i.aY>0&&e.getBoxObjectFor&&n(t,"position");var o,s={left:0,top:0};if(t==(i.la&&!i.oE?e.body:e.documentElement))return s;if(t.getBoundingClientRect)t=t.getBoundingClientRect(),s.left=Math.floor(t.left)+Math.max(e.documentElement.scrollLeft,e.body.scrollLeft),s.top=Math.floor(t.top)+Math.max(e.documentElement.scrollTop,e.body.scrollTop),s.left=s.left-e.documentElement.clientLeft,s.top=s.top-e.documentElement.clientTop,t=e.body,e=parseInt(n(t,"borderLeftWidth")),n=parseInt(n(t,"borderTopWidth")),i.la&&!i.oE&&(s.left=s.left-(isNaN(e)?2:e),s.top=s.top-(isNaN(n)?2:n));else{o=t;do{if(s.left=s.left+o.offsetLeft,s.top=s.top+o.offsetTop,i.aM>0&&"fixed"==n(o,"position")){s.left=s.left+e.body.scrollLeft,s.top=s.top+e.body.scrollTop;break}o=o.offsetParent}while(o&&o!=t);for((i.opera>0||i.aM>0&&"absolute"==n(t,"position"))&&(s.top=s.top-e.body.offsetTop),o=t.offsetParent;o&&o!=e.body;)s.left=s.left-o.scrollLeft,i.opera&&"TR"==o.tagName||(s.top=s.top-o.scrollTop),o=o.offsetParent}return s},/firefox\/(\d+\.\d)/i.test(navigator.userAgent)&&(x.ea.rg=+RegExp.$1),/BIDUBrowser/i.test(navigator.userAgent)&&(x.ea.a1=o);var la=navigator.userAgent;/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(la)&&!/chrome/i.test(la)&&(x.ea.yN=+(RegExp.$1||RegExp.$2)),/chrome\/(\d+\.\d)/i.test(navigator.userAgent)&&(x.ea.XJ=+RegExp.$1),x.jc=x.jc||{},x.jc.Db=function(t,e){var i,n,o=t.length;if("function"==typeof e)for(n=0;o>n&&(i=t[n],i=e.call(t,i,n),i!==q);n++);return t},x.Db=x.jc.Db,x.lang.ca=function(){return"TANGRAM__"+(window[x.ca]._counter++).toString(36)},window[x.ca]._counter=window[x.ca]._counter||1,window[x.ca]._instances=window[x.ca]._instances||{},x.lang.it=function(t){return"[object Function]"==Object.prototype.toString.call(t)},x.lang.Ba=function(t){this.ca=t||x.lang.ca(),window[x.ca]._instances[this.ca]=this},window[x.ca]._instances=window[x.ca]._instances||{},x.lang.Ba.prototype.gi=ha(0),x.lang.Ba.prototype.toString=function(){return"[object "+(this.lQ||"Object")+"]"},x.lang.Xy=function(t,e){this.type=t,this.returnValue=o,this.target=e||p,this.currentTarget=p},x.lang.Ba.prototype.addEventListener=function(t,e,i){if(x.lang.it(e)){!e.al&&(e.al={}),!this.Ii&&(this.Ii={});var n,o=this.Ii;"string"==typeof i&&i&&(/[^\w\-]/.test(i)&&aa("nonstandard key:"+i),n=e.yx=i),0!=t.indexOf("on")&&(t="on"+t),"object"!=typeof o[t]&&(o[t]={}),"object"!=typeof e.al[t]&&(e.al[t]={}),n=n||x.lang.ca(),e.al[t].yx=n,o[t][n]=e}},x.lang.Ba.prototype.removeEventListener=function(t,e){if(0!=t.indexOf("on")&&(t="on"+t),x.lang.it(e)){if(!e.al||!e.al[t])return;e=e.al[t].yx}else if(!x.lang.ug(e))return;!this.Ii&&(this.Ii={});var i=this.Ii;i[t]&&i[t][e]&&delete i[t][e]},x.lang.Ba.prototype.dispatchEvent=function(t,e){x.lang.ug(t)&&(t=new x.lang.Xy(t)),!this.Ii&&(this.Ii={});var i,e=e||{};for(i in e)t[i]=e[i];var n=this.Ii,o=t.type;if(t.target=t.target||this,t.currentTarget=this,0!=o.indexOf("on")&&(o="on"+o),x.lang.it(this[o])&&this[o].apply(this,arguments),"object"==typeof n[o])for(i in n[o])n[o][i].apply(this,arguments);return t.returnValue},x.lang.sa=function(t,e,i){var n,o,s=t.prototype;o=new Function,o.prototype=e.prototype,o=t.prototype=new o;for(n in s)o[n]=s[n];t.prototype.constructor=t,t.k_=e.prototype,"string"==typeof i&&(o.lQ=i)},x.sa=x.lang.sa,x.lang.Mc=function(t){return window[x.ca]._instances[t]||p},x.platform=x.platform||{},x.platform.UL=/macintosh/i.test(navigator.userAgent),x.platform.M2=/MicroMessenger/i.test(navigator.userAgent),x.platform.bM=/windows/i.test(navigator.userAgent),x.platform.iY=/x11/i.test(navigator.userAgent),x.platform.Gm=/android/i.test(navigator.userAgent),/android (\d+\.\d)/i.test(navigator.userAgent)&&(x.platform.FJ=x.FJ=RegExp.$1),x.platform.cY=/ipad/i.test(navigator.userAgent),x.platform.kE=/iphone/i.test(navigator.userAgent),x.lang.Pw=function(t){var e=window[x.ca];e.wS&&delete e.wS[t]},x.event={},x.K=x.event.K=function(t,e,i){return(t=x.$(t))?(e=e.replace(/^on/,""),t.addEventListener?t.addEventListener(e,i,q):t.attachEvent&&t.attachEvent("on"+e,i),t):t},x.cd=x.event.cd=function(t,e,i){return(t=x.$(t))?(e=e.replace(/^on/,""),t.removeEventListener?t.removeEventListener(e,i,q):t.detachEvent&&t.detachEvent("on"+e,i),t):t},x.D.$s=function(t,e){if(!t||!t.className||"string"!=typeof t.className)return q;var i=-1;try{i=t.className==e||t.className.search(RegExp("(\\s|^)"+e+"(\\s|$)"))}catch(n){return q}return i>-1},x.JK=function(){function t(t){document.addEventListener&&(this.element=t,this.MK=this.zk?"touchstart":"mousedown",this.kD=this.zk?"touchmove":"mousemove",this.jD=this.zk?"touchend":"mouseup",this.rh=q,this.bu=this.au=0,this.element.addEventListener(this.MK,this,q),ja.K(this.element,"mousedown",s()),this.handleEvent(p))}return t.prototype={zk:"ontouchstart"in window||"createTouch"in document,start:function(t){na(t),this.rh=q,this.au=this.zk?t.touches[0].clientX:t.clientX,this.bu=this.zk?t.touches[0].clientY:t.clientY,this.element.addEventListener(this.kD,this,q),this.element.addEventListener(this.jD,this,q)},move:function(t){oa(t);var e=this.zk?t.touches[0].clientY:t.clientY;(10<Math.abs((this.zk?t.touches[0].clientX:t.clientX)-this.au)||10<Math.abs(e-this.bu))&&(this.rh=o)},end:function(t){oa(t),this.rh||(t=document.createEvent("Event"),t.initEvent("tap",q,o),this.element.dispatchEvent(t)),this.element.removeEventListener(this.kD,this,q),this.element.removeEventListener(this.jD,this,q)},handleEvent:function(t){if(t)switch(t.type){case this.MK:this.start(t);break;case this.kD:this.move(t);break;case this.jD:this.end(t)}}},function(e){return new t(e)}}();var z=window.BMap||{};z.version="2.0",z.pJ=.34>Math.random(),0<=z.version.indexOf("#")&&(z.version="2.0"),z.Br=[],z.Se=function(t){this.Br.push(t)},z.rr=[],z.Sm=function(t){this.rr.push(t)},z.KU=z.apiLoad||s();var pa=window.BMAP_AUTHENTIC_KEY;window.BMAP_AUTHENTIC_KEY=p;var qa=window.BMap_loadScriptTime,ra=(new Date).getTime(),sa=p,ua=o,va=p,wa=5042,xa=5002,ya=5003,za="load_mapclick",Aa=5038,Ba=5041,Ca=5047,Da=5036,Fa=5039,Ga=5037,Ha=5040,Ia=5011,Ja=7e3;x.lang.sa(Ka,x.lang.Ba,"Map"),x.extend(Ka.prototype,{ta:function(){var t=K("div"),e=t.style;e.overflow="visible",e.position="absolute",e.zIndex="0",e.top=e.left="0px";var e=K("div",{"class":"BMap_mask"}),i=e.style;return i.position="absolute",i.top=i.left="0px",i.zIndex="9",i.overflow="hidden",i.WebkitUserSelect="none",t.appendChild(e),t},tB:function(t){var e=t.style;e.overflow="hidden","absolute"!==Ta(t).position&&(e.position="relative",e.zIndex=0),e.backgroundColor="#F3F1EC",e.color="#000",e.textAlign="left"},ba:function(){var t=this;t.Ur=function(){var e=t.wb();if(t.width!==e.width||t.height!==e.height){var i=new L(t.width,t.height),n=new M("onbeforeresize");n.size=i,t.dispatchEvent(n),t.ik((e.width-t.width)/2,(e.height-t.height)/2),t.te.style.width=(t.width=e.width)+"px",t.te.style.height=(t.height=e.height)+"px",i=new M("onresize"),i.size=e,t.dispatchEvent(i)}},t.M.Vw&&(t.R.Yr=setInterval(t.Ur,80))},ik:function(t,e,i,n){var s=this.va().Lc(this.fa()),a=this.ve,r=o;i&&H.TL(i)&&(this.ef=new H(i.lng,i.lat),r=q),(i=i&&n?a.Jm(i,this.Vb):this.wc)&&(this.wc=new H(i.lng+t*s,i.lat-e*s),(t=a.qh(this.wc,this.Vb))&&r&&(this.ef=t))},Fg:function(t,e){if(Ua(t)&&(this.Su(),this.dispatchEvent(new M("onzoomstart")),t=this.Vn(t).zoom,t!==this.Ha)){this.Hc=this.Ha,this.Ha=t;var i;e?i=e:this.jh()&&(i=this.jh().ha()),i&&(i=this.fc(i,this.Hc),this.ik(this.width/2-i.x,this.height/2-i.y,this.zb(i,this.Hc),o)),this.dispatchEvent(new M("onzoomstartcode"))}},Oc:function(t){this.Fg(t)},PF:function(t){this.Fg(this.Ha+1,t)},QF:function(t){this.Fg(this.Ha-1,t)},ui:function(t){t instanceof H&&(this.wc=this.ve.Jm(t,this.Vb),this.ef=H.TL(t)?new H(t.lng,t.lat):this.ve.qh(this.wc,this.Vb))},yg:function(t,e){t=Math.round(t)||0,e=Math.round(e)||0,this.ik(-t,-e)},lw:function(t){t&&Va(t.Be)&&(t.Be(this),this.dispatchEvent(new M("onaddcontrol",t)))},mN:function(t){t&&Va(t.remove)&&(t.remove(),this.dispatchEvent(new M("onremovecontrol",t)))},uo:function(t){t&&Va(t.pa)&&(t.pa(this),this.dispatchEvent(new M("onaddcontextmenu",t)))},zp:function(t){t&&Va(t.remove)&&(this.dispatchEvent(new M("onremovecontextmenu",t)),t.remove())},Ja:function(t){t&&Va(t.Be)&&(t.Be(this),this.dispatchEvent(new M("onaddoverlay",t)))},Sb:function(t){t&&Va(t.remove)&&(t.remove(),this.dispatchEvent(new M("onremoveoverlay",t)))},$J:function(){this.dispatchEvent(new M("onclearoverlays"))},Yg:function(t){t&&this.dispatchEvent(new M("onaddtilelayer",t))},zh:function(t){t&&this.dispatchEvent(new M("onremovetilelayer",t))},Bg:function(t){if(this.Hb!==t){var e=new M("onsetmaptype");e.t3=this.Hb,this.Hb=this.M.Hb=t,this.ve=this.Hb.bp(),this.ik(0,0,this.Ka(),o),this.Su();var i=this.Vn(this.fa()).zoom;this.Fg(i),this.dispatchEvent(e),e=new M("onmaptypechange"),e.Ha=i,e.Hb=t,this.dispatchEvent(e),(t===Wa||t===Pa)&&Oa(ya)}},Vf:function(t){var e=this;if(t instanceof H)e.ui(t,{noAnimation:o});else if(Xa(t))if(e.Hb===Na){var i=F.cC[t];i&&(pt=i.m,e.Vf(pt))}else{var n=this.AH();n.qF(function(i){0===n.um()&&2===n.Ea.result.type&&(e.Vf(i.xk(0).point),Na.tk(t)&&e.kF(t))}),n.search(t,{log:"center"})}},Xd:function(t,e){"[object Undefined]"!==Object.prototype.toString.call(e)&&(e=parseInt(e)),va=G()?Za.Fi.ok(z.pJ?102:101):Za.Fi.ok(1),va.cu(),va.iz=+new Date,va.oc("script_loaded",ra-qa),va.oc("centerAndZoom"),z.Ij("cus.fire","time",{z_loadscripttime:ra-qa});var i=this;if(Xa(t))if(i.Hb===Na){var n=F.cC[t];n&&(pt=n.m,i.Xd(pt,e))}else{var s=i.AH();s.qF(function(n){if(0===s.um()&&(2===s.Ea.result.type||11===s.Ea.result.type)){var n=n.xk(0).point,o=e||P.$w(s.Ea.content.level,i);i.Xd(n,o),Na.tk(t)&&i.kF(t)}}),s.search(t,{log:"center"})}else if(t instanceof H&&e){e=i.Vn(e).zoom,i.Hc=i.Ha||e,i.Ha=e,n=i.ef,i.ef=new H(t.lng,t.lat),i.wc=i.ve.Jm(i.ef,i.Vb),i.yC=i.yC||i.Ha,i.xC=i.xC||i.ef;var a=new M("onload"),r=new M("onloadcode");a.point=new H(t.lng,t.lat),a.pixel=i.fc(i.ef,i.Ha),a.zoom=e,i.loaded||(i.loaded=o,i.dispatchEvent(a),sa||(sa=$a())),i.dispatchEvent(r),a=new M("onmoveend"),a.cH="centerAndZoom",n.lb(i.ef)||i.dispatchEvent(a),i.dispatchEvent(new M("onmoveend")),i.Hc!==i.Ha&&(n=new M("onzoomend"),n.cH="centerAndZoom",i.dispatchEvent(n)),i.M.Mo&&i.Mo()}},AH:function(){return this.R.mM||(this.R.mM=new ab(1)),this.R.mM},reset:function(){this.Xd(this.xC,this.yC,o)},enableDragging:function(){this.M.bc=o},disableDragging:function(){this.M.bc=q},enableInertialDragging:function(){this.M.Ww=o},disableInertialDragging:function(){this.M.Ww=q},enableScrollWheelZoom:function(){this.M.Po=o},disableScrollWheelZoom:function(){this.M.Po=q},enableContinuousZoom:function(){this.M.Oo=o},disableContinuousZoom:function(){this.M.Oo=q},enableDoubleClickZoom:function(){this.M.cD=o},disableDoubleClickZoom:function(){this.M.cD=q},enableKeyboard:function(){this.M.Xw=o},disableKeyboard:function(){this.M.Xw=q},enablePinchToZoom:function(){this.M.Es=o},disablePinchToZoom:function(){this.M.Es=q},enableAutoResize:function(){this.M.Vw=o,this.Ur(),this.R.Yr||(this.R.Yr=setInterval(this.Ur,80))},disableAutoResize:function(){this.M.Vw=q,this.R.Yr&&(clearInterval(this.R.Yr),this.R.Yr=p)},Mo:function(){this.M.Mo=o,this.Kn||(this.Kn=new bb({QK:o}),this.Yg(this.Kn))},TV:function(){this.M.Mo=q,this.Kn&&(this.zh(this.Kn),this.Kn=p,delete this.Kn)},wb:function(){return this.ls&&this.ls instanceof L?new L(this.ls.width,this.ls.height):new L(this.Ua.clientWidth,this.Ua.clientHeight)},we:function(t){t&&t instanceof L?(this.ls=t,this.Ua.style.width=t.width+"px",this.Ua.style.height=t.height+"px"):this.ls=p},Ka:t("ef"),fa:t("Ha"),jV:function(){this.Ur()},Vn:function(t){var e=this.M.dc,i=this.M.Yb,n=q,t=Math.round(t);return e>t&&(n=o,t=e),t>i&&(n=o,t=i),{zoom:t,lD:n}},Na:t("Ua"),fc:function(t,e){return e=e||this.fa(),this.ve.fc(t,e,this.wc,this.wb(),this.Vb)},zb:function(t,e){return e=e||this.fa(),this.ve.zb(t,e,this.wc,this.wb(),this.Vb)},Re:function(t,e){if(t){var i=this.fc(new H(t.lng,t.lat),e);return i.x-=this.offsetX,i.y-=this.offsetY,i}},bN:function(t,e){if(t){var i=new Q(t.x,t.y);return i.x+=this.offsetX,i.y+=this.offsetY,this.zb(i,e)}},pointToPixelFor3D:function(t,e){var i=map.Vb;this.Hb===Na&&i&&db.fK(t,this,e)},o3:function(t,e){var i=map.Vb;this.Hb===Na&&i&&db.eK(t,this,e)},p3:function(t,e){var i=this,n=map.Vb;i.Hb===Na&&n&&db.fK(t,i,function(t){t.x-=i.offsetX,t.y-=i.offsetY,e&&e(t)})},m3:function(t,e){var i=map.Vb;this.Hb===Na&&i&&(t.x+=this.offsetX,t.y+=this.offsetY,db.eK(t,this,e))},Fd:function(t){if(!this.Hx())return new eb;var e=t||{},t=e.margins||[0,0,0,0],i=e.zoom||p,e=this.zb({x:t[3],y:this.height-t[2]},i),t=this.zb({x:this.width-t[1],y:t[0]},i);return new eb(e,t)},Hx:function(){return!!this.loaded},DR:function(t,e){for(var i=this.va(),n=e.margins||[10,10,10,10],o=e.zoomFactor||0,s=n[1]+n[3],n=n[0]+n[2],a=i.Xo(),r=i=i.qm();r>=a;r--){var h=this.va().Lc(r);if(t.EF().lng/h<this.width-s&&t.EF().lat/h<this.height-n)break}return r+=o,a>r&&(r=a),r>i&&(r=i),r},Zs:function(t,e){var i={center:this.Ka(),zoom:this.fa()};if(!t||!t instanceof eb&&0===t.length||t instanceof eb&&t.yj())return i;var n=[];t instanceof eb?(n.push(t.kf()),n.push(t.qe())):n=t.slice(0);for(var e=e||{},o=[],s=0,a=n.length;a>s;s++)o.push(this.ve.Jm(n[s],this.Vb));for(n=new eb,s=o.length-1;s>=0;s--)n.extend(o[s]);return n.yj()?i:(i=n.Ka(),o=this.DR(n,e),e.margins&&(n=e.margins,s=(n[1]-n[3])/2,n=(n[0]-n[2])/2,a=this.va().Lc(o),e.offset&&(s=e.offset.width,n=e.offset.height),i.lng+=a*s,i.lat+=a*n),i=this.ve.qh(i,this.Vb),{center:i,zoom:o})},Bh:function(t,e){var i;i=t&&t.center?t:this.Zs(t,e);var e=e||{},n=e.delay||200;if(i.zoom===this.Ha&&e.enableAnimation!==q){var o=this;setTimeout(function(){o.ui(i.center,{duration:210})},n)}else this.Xd(i.center,i.zoom)},Qf:t("Sd"),jh:function(){return this.R.mb&&this.R.mb.Va()?this.R.mb:p},getDistance:function(t,e){if(t&&e){if(t.lb(e))return 0;var i=0,i=R.Vo(t,e);return i!==p&&i!==j||(i=0),i}},qx:function(){var t=[],e=this.ua,i=this.ye;if(e)for(var n in e)e[n]instanceof fb&&t.push(e[n]);if(i)for(n=0,e=i.length;e>n;n++)t.push(i[n]);return t},va:t("Hb"),nz:function(){for(var t=this.R.WE;t<z.Br.length;t++)z.Br[t](this);this.R.WE=t},kF:function(t){this.Vb=Na.tk(t),this.Bw=Na.bL(this.Vb),this.Hb===Na&&this.ve instanceof gb&&(this.ve.gj=this.Vb)},setDefaultCursor:function(t){this.M.Wb=t,this.platform&&(this.platform.style.cursor=this.M.Wb)},getDefaultCursor:function(){return this.M.Wb},setDraggingCursor:function(t){this.M.Dd=t},getDraggingCursor:function(){return this.M.Dd},DL:function(){return this.M.iW&&1.5<=this.M.devicePixelRatio},nw:function(t,e){e?this.Oh[e]||(this.Oh[e]={}):e="custom",t.tag=e,t instanceof hb&&(this.Oh[e][t.ca]=t,t.pa(this));var i=this;I.load("hotspot",function(){i.nz()},o)},eZ:function(t,e){e||(e="custom"),this.Oh[e][t.ca]&&delete this.Oh[e][t.ca]},bm:function(t){t||(t="custom"),this.Oh[t]={}},Su:function(){var t=this.Hb.Xo(),e=this.Hb.qm(),i=this.M;i.dc=i.zO||t,i.Yb=i.yO||e,i.dc<t&&(i.dc=t),i.Yb>e&&(i.Yb=e)},setMinZoom:function(t){t=Math.round(t),t>this.M.Yb&&(t=this.M.Yb),this.M.zO=t,this.gJ()},setMaxZoom:function(t){t=Math.round(t),t<this.M.dc&&(t=this.M.dc),this.M.yO=t,this.gJ()},gJ:function(){this.Su();var t=this.M;this.Ha<t.dc?this.Oc(t.dc):this.Ha>t.Yb&&this.Oc(t.Yb);var e=new M("onzoomspanchange");e.dc=t.dc,e.Yb=t.Yb,this.dispatchEvent(e)},y2:t("IB"),getKey:function(){return pa},Nt:function(t){var e=this;if(window.MPC_Mgr&&window.MPC_Mgr[e.ca]&&window.MPC_Mgr[e.ca].close(),e.M.nj=q,z.Ij("cus.fire","count","z_setmapstylecount"),t){e=this,t.styleJson&&(t.styleStr=e.h_(t.styleJson)),G()&&x.ea.yN?setTimeout(function(){e.M.se=t,e.dispatchEvent(new M("onsetcustomstyles",t))},50):(this.M.se=t,this.dispatchEvent(new M("onsetcustomstyles",t)),this.OL(e.M.se.geotableId));var i={style:t.style};t.features&&0<t.features.length&&(i.features=o),t.styleJson&&0<t.styleJson.length&&(i.styleJson=o),Oa(5050,i),t.style&&(i=e.M.dm[t.style]?e.M.dm[t.style].backColor:e.M.dm.normal.backColor)&&(this.Na().style.backgroundColor=i)}},SX:function(t){this.controls||(this.controls={navigationControl:new ib,scaleControl:new jb,overviewMapControl:new kb,mapTypeControl:new lb});var e,i=this;for(e in this.controls)i.mN(i.controls[e]);t=t||[],x.jc.Db(t,function(t){i.lw(i.controls[t])})},OL:function(t){t?this.js&&this.js.xf===t||(this.zh(this.js),this.js=new mb({geotableId:t}),this.Yg(this.js)):this.zh(this.js)},Ub:function(){var t=this.fa()>=this.M.LF&&this.va()===La&&18>=this.fa(),e=q;try{document.createElement("canvas").getContext("2d"),e=o}catch(i){e=q}return t&&e},getCurrentCity:function(){return{name:this.$g,code:this.Zr}},rm:function(){return this.P.$n(),this.P},setPanorama:function(t){this.P=t,this.P.nF(this)},h_:function(t){for(var e,i={featureType:"t",elementType:"e",visibility:"v",color:"c",lightness:"l",saturation:"s",weight:"w",zoom:"z",hue:"h"},n={all:"all",geometry:"g","geometry.fill":"g.f","geometry.stroke":"g.s",labels:"l","labels.text.fill":"l.t.f","labels.text.stroke":"l.t.s","lables.text":"l.t","labels.icon":"l.i"},o=[],s=0;e=t[s];s++){var a=e.stylers;delete e.stylers,x.extend(e,a);var r,a=[];for(r in i)e[r]&&("elementType"===r?a.push(i[r]+":"+n[e[r]]):a.push(i[r]+":"+e[r]));2<a.length&&o.push(a.join("|"))}return o.join(",")}});var nb,qb,pb=[],ob=new Image;Oa(5e3,{device_pixel_ratio:window.devicePixelRatio,platform:navigator.platform}),z.IL={TILE_BASE_URLS:["ss0.baidu.com/5bwHcj7lABFU8t_jkk_Z1zRvfdw6buu","ss0.baidu.com/5bwHcj7lABFV8t_jkk_Z1zRvfdw6buu","ss0.baidu.com/5bwHcj7lABFS8t_jkk_Z1zRvfdw6buu","ss0.bdstatic.com/5bwHcj7lABFT8t_jkk_Z1zRvfdw6buu","ss0.bdstatic.com/5bwHcj7lABFY8t_jkk_Z1zRvfdw6buu"],TILE_ONLINE_URLS:["ss0.bdstatic.com/8bo_dTSlR1gBo1vgoIiO_jowehsv","ss0.bdstatic.com/8bo_dTSlRMgBo1vgoIiO_jowehsv","ss0.bdstatic.com/8bo_dTSlRcgBo1vgoIiO_jowehsv","ss0.bdstatic.com/8bo_dTSlRsgBo1vgoIiO_jowehsv","ss0.bdstatic.com/8bo_dTSlQ1gBo1vgoIiO_jowehsv"],TIlE_PERSPECT_URLS:["ss0.bdstatic.com/-OR1cTe9KgQFm2e88IuM_a","ss0.bdstatic.com/-ON1cTe9KgQFm2e88IuM_a","ss0.bdstatic.com/-OZ1cTe9KgQFm2e88IuM_a","ss0.bdstatic.com/-OV1cTe9KgQFm2e88IuM_a"],geolocControl:"sp2.baidu.com/8LkJsjOpB1gCo2Kml5_Y_D3",TILES_YUN_HOST:["sp0.baidu.com/-eR1bSahKgkFkRGko9WTAnF6hhy","sp0.baidu.com/-eN1bSahKgkFkRGko9WTAnF6hhy","sp0.baidu.com/-eZ1bSahKgkFkRGko9WTAnF6hhy","sp0.baidu.com/-eV1bSahKgkFkRGko9WTAnF6hhy"],traffic:"sp0.baidu.com/7_AZsjOpB1gCo2Kml5_Y_D3",iw_pano:"ss0.bdstatic.com/5LUZemba_QUU8t7mm9GUKT-xh_",message:"sp0.baidu.com/7vo0bSba2gU2pMbgoY3K",baidumap:"sp0.baidu.com/80MWsjip0QIZ8tyhnq",wuxian:"sp0.baidu.com/6a1OdTeaKgQFm2e88IuM_a",pano:["ss0.bdstatic.com/5LUZemba_QUU8t7mm9GUKT-xh_","ss0.bdstatic.com/5LUZemfa_QUU8t7mm9GUKT-xh_","ss0.bdstatic.com/5LUZemja_QUU8t7mm9GUKT-xh_"],main_domain_nocdn:{baidu:"sp0.baidu.com/9_Q4sjOpB1gCo2Kml5_Y_D3",other:"api.map.baidu.com"},main_domain_cdn:{baidu:["ss0.bdstatic.com/9_Q4vHSd2RZ3otebn9fN2DJv","ss0.baidu.com/9_Q4vXSd2RZ3otebn9fN2DJv","ss0.bdstatic.com/9_Q4vnSd2RZ3otebn9fN2DJv"],other:["api.map.baidu.com"],webmap:["ss0.baidu.com/6b1IcTe9R1gBo1vgoIiO_jowehsv"]},map_click:"sp0.baidu.com/80MWbzKh2wt3n2qy8IqW0jdnxx1xbK",vector_traffic:"ss0.bdstatic.com/8aZ1cTe9KgQIm2_p8IuM_a"},z.NX={TILE_BASE_URLS:["shangetu0.map.bdimg.com","shangetu1.map.bdimg.com","shangetu2.map.bdimg.com","shangetu3.map.bdimg.com","shangetu4.map.bdimg.com"],TILE_ONLINE_URLS:["online0.map.bdimg.com","online1.map.bdimg.com","online2.map.bdimg.com","online3.map.bdimg.com","online4.map.bdimg.com"],TIlE_PERSPECT_URLS:["d0.map.baidu.com","d1.map.baidu.com","d2.map.baidu.com","d3.map.baidu.com"],geolocControl:"loc.map.baidu.com",TILES_YUN_HOST:["g0.api.map.baidu.com","g1.api.map.baidu.com","g2.api.map.baidu.com","g3.api.map.baidu.com"],traffic:"its.map.baidu.com",iw_pano:"pcsv0.map.bdimg.com",message:"j.map.baidu.com",baidumap:"map.baidu.com",wuxian:"wuxian.baidu.com",pano:["pcsv0.map.bdimg.com","pcsv1.map.bdimg.com","pcsv2.map.bdimg.com"],main_domain_nocdn:{baidu:"api1.map.baidu.com"},main_domain_cdn:{baidu:["api0.map.bdimg.com","api1.map.bdimg.com","api2.map.bdimg.com"],webmap:["webmap0.map.bdimg.com"]},map_click:"mapclick.map.baidu.com",vector_traffic:"or.map.bdimg.com"},z.K_={0:{proto:"http://",domain:z.NX},1:{proto:"https://",domain:z.IL},2:{proto:"https://",domain:z.IL}},z.ou=window.HOST_TYPE||"0",z.url=z.K_[z.ou],z.qp=z.url.proto+z.url.domain.baidumap+"/",z.Fc=z.url.proto+("2"==z.ou?z.url.domain.main_domain_nocdn.other:z.url.domain.main_domain_nocdn.baidu)+"/",z.ma=z.url.proto+("2"==z.ou?z.url.domain.main_domain_cdn.other[0]:z.url.domain.main_domain_cdn.baidu[0])+"/",z.ma="",z.ej=z.url.proto+z.url.domain.main_domain_cdn.webmap[0]+"/",z.tg=function(t,e){var i,n,e=e||"";switch(t){case"main_domain_nocdn":i=z.Fc+e;break;case"main_domain_cdn":i=z.ma+e;break;default:n=z.url.domain[t],"[object Array]"==Object.prototype.toString.call(n)?(i=[],x.jc.Db(n,function(t,n){i[n]=z.url.proto+t+"/"+e})):i=z.url.proto+z.url.domain[t]+"/"+e}return i};var tb="INFINITE";rb.prototype.start=function(){this.Lu=$a(),this.Uz=this.Lu+this.k.duration,ub(this)},rb.prototype.add=function(t){this.Zf.push(t)},rb.prototype.stop=function(t){this.zF=o;for(var e=0;e<this.Zf.length;e++)this.Zf[e].stop(),this.Zf[e]=p;this.Zf.length=0,this.Rr&&(clearTimeout(this.Rr),this.Rr=p),this.k.yt(this.qy),t&&(this.Uz=this.Lu,ub(this))},rb.prototype.cancel=ha(1);var sb={jM:function(t){return t},reverse:function(t){return 1-t},YC:function(t){return t*t},XC:function(t){return Math.pow(t,3)},Cs:function(t){return-(t*(t-2))},FK:function(t){return Math.pow(t-1,3)+1},EK:function(t){return.5>t?2*t*t:-2*(t-2)*t-1},A1:function(t){return.5>t?4*Math.pow(t,3):4*Math.pow(t-1,3)+1},B1:function(t){return(1-Math.cos(Math.PI*t))/2}};sb["ease-in"]=sb.YC,sb["ease-out"]=sb.Cs;var F={TF:34,UF:21,VF:new L(21,32),QO:new L(10,32),PO:new L(24,36),OO:new L(12,36),RF:new L(13,1),oa:z.ma+"images/",H2:"http://api0.map.bdimg.com/images/",SF:z.ma+"images/markers_new.png",MO:24,NO:73,cC:{"北京":{gy:"bj",m:new H(116.403874,39.914889)},"上海":{gy:"sh",m:new H(121.487899,31.249162)},"深圳":{gy:"sz",m:new H(114.025974,22.546054)},"广州":{gy:"gz",m:new H(113.30765,23.120049)}},fontFamily:"arial,sans-serif"};x.ea.rg?(x.extend(F,{uK:"url("+F.oa+"ruler.cur),crosshair",Wb:"-moz-grab",Dd:"-moz-grabbing"}),x.platform.bM&&(F.fontFamily="arial,simsun,sans-serif")):x.ea.XJ||x.ea.yN?x.extend(F,{uK:"url("+F.oa+"ruler.cur) 2 6,crosshair",Wb:"url("+F.oa+"openhand.cur) 8 8,default",Dd:"url("+F.oa+"closedhand.cur) 8 8,move"}):x.extend(F,{uK:"url("+F.oa+"ruler.cur),crosshair",Wb:"url("+F.oa+"openhand.cur),default",Dd:"url("+F.oa+"closedhand.cur),move"});var Hb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",M=x.lang.Xy;z.rY=function(){var t=o,e=o,i=o,n=o,s=0,a=0,r=0,h=0;return{wQ:function(){s+=1,t&&(t=q,setTimeout(function(){Oa(5054,{pic:s}),t=o,s=0},1e4))},o0:function(){a+=1,e&&(e=q,setTimeout(function(){Oa(5055,{move:a}),e=o,a=0},1e4))},q0:function(){r+=1,i&&(i=q,setTimeout(function(){Oa(5056,{zoom:r}),i=o,r=0},1e4))},p0:function(t){h+=t,n&&(n=q,setTimeout(function(){Oa(5057,{tile:h}),n=o,h=0},5e3))}}}();var Za;!function(){function t(t){this.LU=t,this.timing={},this.start=+new Date}function e(t,e){if(t.length===+t.length)for(var i=0,n=t.length;n>i&&e.call(j,i,t[i],t)!==q;i++);else for(i in t)if(t.hasOwnProperty(i)&&e.call(j,i,t[i],t)===q)break}var i,n,a,r,h=[],c={push:function(t){if(h.push(t),window.localStorage&&window.JSON)try{localStorage.setItem("WPO_NR",JSON.stringify(h))}catch(e){}},get:function(t){var e=[];if(window.localStorage)try{t&&localStorage.removeItem("WPO_NR")}catch(i){}return e=h,t&&(h=[]),e}},l={};(!window.localStorage||!window.JSON)&&document.attachEvent&&window.attachEvent("onbeforeunload",function(){p.send()});var p={send:function(t){var i,n=[],s=[],a=t||c.get(o);0<a.length&&(e(a,function(o,s){var a=[];e(s.timing,function(t,e){a.push('"'+t+'":'+e)}),n.push('{"t":{'+a.join(",")+'},"a":'+s.LU+"}"),!i&&t&&s.start&&(i=s.start)}),e(l,function(t,e){s.push(t+"="+e)}),s.push("d=["+n.join(",")+"]"),i?s.push("_st="+i):s.push("_t="+ +new Date),a=new Image,a.src="http://static.tieba.baidu.com/tb/pms/img/st.gif?"+s.join("&"),window["___pms_img_"+1*new Date]=a)}};t.prototype={oc:function(t,e){this.timing[t]=e>=0?e:new Date-this.start},cu:function(){this.start=+new Date},oO:function(){this.oc("tt")},My:function(){this.oc("vt")},Xm:function(){n&&(c.push(this),c.get().length>=a&&p.send())},error:s()},Za={Fi:{cE:function(t){var e=navigator.n1||navigator.b3||navigator.r4||{type:0};n=Math.random()<=(t.an||.01),a=t.max||5,r=t.a3||e.type,l={p:t.aZ,mnt:r,b:50},window.localStorage&&window.JSON&&window.addEventListener&&(i=c.get(o),window.addEventListener("load",function(){p.send(i)},q))},ok:function(e){return new t(e)}}}}(),Za.Fi.cE({aZ:18,an:.1,max:1}),z.dq={gG:"#83a1ff",gq:"#808080"},"2"!==z.ou&&(function(t,e,i){!function(t,e,i){function n(t){if(!t.Ho){for(var i=o,s=[],a=t.iZ,r=0;a&&r<a.length;r++){var h=a[r],c=k[h]=k[h]||{};if(c.Ho||c==t)s.push(c.Mc);else{if(i=q,!c.MV&&(h=(T.get("alias")||{})[h]||h+".js",!x[h])){x[h]=o;var l=e.createElement("script"),p=e.getElementsByTagName("script")[0];l.async=o,l.src=h,p.parentNode.insertBefore(l,p)}c.Ny=c.Ny||{},c.Ny[t.name]=t}}if(i){t.Ho=o,t.mK&&(t.Mc=t.mK.apply(t,s));for(var d in t.Ny)n(t.Ny[d])}}}function s(t){return(t||new Date)-b}function a(t,e,i){if(t){"string"==typeof t&&(i=e,e=t,t=_);try{t==_?(w[e]=w[e]||[],w[e].unshift(i)):t.addEventListener?t.addEventListener(e,i,q):t.attachEvent&&t.attachEvent("on"+e,i)}catch(n){}}}function r(t,e,i){if(t){"string"==typeof t&&(i=e,e=t,t=_);try{if(t==_){var n=w[e];if(n)for(var o=n.length;o--;)n[o]===i&&n.splice(o,1)}else t.removeEventListener?t.removeEventListener(e,i,q):t.detachEvent&&t.detachEvent("on"+e,i)}catch(s){}}}function h(t){var e=w[t],i=0;if(e){for(var n=[],o=arguments,s=1;s<o.length;s++)n.push(o[s]);for(s=e.length;s--;)e[s].apply(this,n)&&i++;return i}}function c(t,e){if(t&&e){var i,n=new Image(1,1),o=[],s="img_"+ +new Date;for(i in e)e[i]&&o.push(i+"="+encodeURIComponent(e[i]));_[s]=n,n.onload=n.onerror=function(){_[s]=n=n.onload=n.onerror=p,delete _[s]},n.src=t+"?"+o.join("&")}}function l(){var t=arguments,e=t[0];if(this.lK||/^(on|un|set|get|create)$/.test(e)){for(var e=u.prototype[e],i=[],n=1,o=t.length;o>n;n++)i.push(t[n]);"function"==typeof e&&e.apply(this,i)}else this.KJ.push(t)}function d(t,e){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function u(t){this.name=t,this.Hs={TE:{iy:p,TE:p}},this.KJ=[]}function f(t){if(t=t||"default","*"==t){var e,t=[];for(e in M)t.push(M[e]);return t}return(e=M[t])||(e=M[t]=new u(t)),e}var g=i.alog;if(!g||!g.Ho){var m=e.all&&t.attachEvent,b=g&&g.sE||+new Date,v=t.T2||(+new Date).toString(36)+Math.random().toString(36).substr(2,3),y=0,x={},_=function(t){var e,i,s,a,r=arguments;if("define"==t||"require"==t){for(i=1;i<r.length;i++)switch(typeof r[i]){case"string":e=r[i];break;case"object":s=r[i];break;case"function":a=r[i]}"require"==t&&(e&&!s&&(s=[e]),e=p),e=e?e:"#"+y++,i=k[e]=k[e]||{},i.Ho||(i.name=e,i.iZ=s,i.mK=a,"define"==t&&(i.MV=o),n(i))}else"function"==typeof t?t(_):(""+t).replace(/^(?:([\w$_]+)\.)?(\w+)$/,function(t,e,i){r[0]=i,l.apply(_.nO(e),r)})},w={},M={},k={W0:{name:"alog",Ho:o,Mc:_}};u.prototype.start=u.prototype.create=function(t){if(!this.lK)for("object"==typeof t&&this.set(t),this.lK=new Date,this.Is("create",this);t=this.KJ.shift();)l.apply(this,t)},u.prototype.send=function(t,e){var i=d({ts:s().toString(36),t:t,sid:v},this.Hs);if("object"==typeof e)i=d(i,e);else{var n=arguments;switch(t){case"pageview":n[1]&&(i.page=n[1]),n[2]&&(i.title=n[2]);break;case"event":n[1]&&(i.eventCategory=n[1]),n[2]&&(i.eventAction=n[2]),n[3]&&(i.eventLabel=n[3]),n[4]&&(i.eventValue=n[4]);break;case"timing":n[1]&&(i.timingCategory=n[1]),n[2]&&(i.timingVar=n[2]),n[3]&&(i.timingValue=n[3]),n[4]&&(i.timingLabel=n[4]);break;case"exception":n[1]&&(i.exDescription=n[1]),n[2]&&(i.exFatal=n[2]);break;default:return}}this.Is("send",i);var o;if(n=this.Hs.TE){var a={};for(o in i)n[o]!==p&&(a[n[o]||o]=i[o]);o=a}else o=i;c(this.Hs.iy,o)},u.prototype.set=function(t,e){if("string"==typeof t)"protocolParameter"==t&&(e=d({iy:p,TE:p},e)),this.Hs[t]=e;else if("object"==typeof t)for(var i in t)this.set(i,t[i])},u.prototype.get=function(t,e){var i=this.Hs[t];return"function"==typeof e&&e(i),i},u.prototype.Is=function(t,e){return _.Is(this.name+"."+t,e)},u.prototype.K=function(t,e){_.K(this.name+"."+t,e)},u.prototype.cd=function(t,e){_.cd(this.name+"."+t,e)},u.prototype.start=u.prototype.start,u.prototype.create=u.prototype.create,u.prototype.send=u.prototype.send,u.prototype.set=u.prototype.set,u.prototype.get=u.prototype.get,u.prototype.fire=u.prototype.Is,u.prototype.on=u.prototype.K,u.prototype.un=u.prototype.cd,_.name="alog",_.QN=v,_.Ho=o,_.timestamp=s,_.cd=r,
_.K=a,_.Is=h,_.nO=f,_("init");var T=f();if(T.set("protocolParameter",{V0:p}),g){var E=[].concat(g.yb||[],g.Wm||[]);g.yb=g.Wm=p;for(var P in _)_.hasOwnProperty(P)&&(g[P]=_[P]);for(_.yb=_.Wm={push:function(t){_.apply(_,t)}},g=0;g<E.length;g++)_.apply(_,E[g])}i.alog=_,m&&a(e,"mouseup",function(t){t=t.target||t.srcElement,1==t.nodeType&&/^ajavascript:/i.test(t.tagName+t.href)});var C=q;t.onerror=function(t,e,n,s){var a=o;return!e&&/^script error/i.test(t)&&(C?a=q:C=o),a&&i.alog("exception.send","exception",{HM:t,jY:e,lM:n,k1:s}),q},i.alog("exception.on","catch",function(t){i.alog("exception.send","exception",{HM:t.HM,jY:t.path,lM:t.lM,method:t.method,tW:"catch"})})}}(t,e,i),function(t,e,i){var n="18_1";G()&&(n="18_2");var s=Math.random,a={an:"0.1"},r={an:"0.1"};if(a&&a.an&&s()<a.an){var h,c=i.alog.nO("monkey"),t=t.screen,e=e.referrer;c.set("ver",5),c.set("pid",241),t&&c.set("px",t.width+"*"+t.height),c.set("ref",e),i.alog("monkey.on","create",function(){h=i.alog.timestamp,c.set("protocolParameter",{reports:p})}),i.alog("monkey.on","send",function(t){"pageview"==t.t&&(t.cmd="open"),t.now&&(t.ts=h(t.now).toString(36),t.now="")}),i.alog("monkey.create",{page:n,pid:"241",p:"18",iy:"http://nsclick.baidu.com/u.gif",C3:{A3:1}}),i.alog("monkey.send","pageview",{now:+new Date})}r&&r.an&&s()<r.an&&(i.alog("cus.on","time",function(t){var e,n={},s=q;if("[object Object]"===t.toString()){for(var a in t)"page"==a?n.page=t[a]:(e=parseInt(t[a],10),e>0&&/^z_/.test(a)&&(s=o,n[a]=e));s&&i.alog("cus.send","time",n)}}),i.alog("cus.on","count",function(t){var e={},n=q;if("string"==typeof t&&(t=[t]),t instanceof Array)for(var s=0;s<t.length;s++)/^z_/.test(t[s])?(n=o,e[t[s]]=1):/^page:/.test(t[s])&&(e.page=t[s].substring(5));n&&i.alog("cus.send","count",e)}),i.alog("cus.create",{dv:3,iy:"http://static.tieba.baidu.com/tb/pms/img/st.gif",page:n,p:"18"}))}(t,e,i)}(window,document,z),z.alog("cus.fire","count","z_loadscriptcount")),z.Ij=z.alog||s();var Qb={map:"3uc0wi",common:"5w45zj",style:"fcoka2",tile:"5r2pa2",vectordrawlib:"o0famu",newvectordrawlib:"hmclwu",groundoverlay:"suwtqa",pointcollection:"f2tyq3",marker:"25gtk1",symbol:"fwsijz",canvablepath:"x52cuy",vmlcontext:"hev5xu",markeranimation:"ulntww",poly:"qwgivy",draw:"o13qo0",drawbysvg:"wqhg4u",drawbyvml:"vgaolq",drawbycanvas:"rsib4k",infowindow:"gji4ki",oppc:"kh0en0",opmb:"u25mck",menu:"q2jarc",control:"nx31sg",navictrl:"vohbha",geoctrl:"koalnf",copyrightctrl:"4v1wlk",citylistcontrol:"r2lwar",scommon:"ktwwno",local:"fhktgv",route:"k4bch0",othersearch:"3me4d4",mapclick:"pispkz",buslinesearch:"ezbxvf",hotspot:"41pssw",autocomplete:"xipcdu",coordtrans:"npfahg",coordtransutils:"y3vgwm",convertor:"33e0az",clayer:"a0zbw1",pservice:"cj0qi1",pcommon:"yhbx4d",panorama:"je31xk",panoramaflash:"glznrv",vector:"kspzfy"};x.Gy=function(){function t(t){return n&&!!i[e+t+"_"+Qb[t]]}var e="BMap_",i=window.localStorage,n="localStorage"in window&&i!==p&&i!==j;return{eY:n,set:function(t,o){if(n){for(var s,a=e+t+"_",r=i.length;r--;)s=i.key(r),-1<s.indexOf(a)&&i.removeItem(s);try{i.setItem(e+t+"_"+Qb[t],o)}catch(h){i.clear()}}},get:function(o){return n&&t(o)?i.getItem(e+o+"_"+Qb[o]):q},VJ:t}}(),x.object.extend(I,{Fj:{hG:-1,vP:0,Zp:1},fL:function(){var t="drawbysvg",e="canvablepath",i=z.pJ?"newvectordrawlib":"vectordrawlib";return G()&&Lb()?t="drawbycanvas":Kb()?t="drawbysvg":Jb()?(t="drawbyvml",e="vmlcontext"):Lb()&&(t="drawbycanvas"),{tile:[i,"style"],control:[],marker:["symbol"],symbol:["canvablepath","common"],canvablepath:"canvablepath"===e?[]:[e],vmlcontext:[],style:[],poly:["marker",t],drawbysvg:["draw"],drawbyvml:["draw"],drawbycanvas:["draw"],infowindow:["common","marker"],menu:[],oppc:[],opmb:[],scommon:[],local:["scommon"],route:["scommon"],othersearch:["scommon"],autocomplete:["scommon"],citylistcontrol:["autocomplete"],mapclick:["scommon"],buslinesearch:["route"],hotspot:[],coordtransutils:["coordtrans"],convertor:[],clayer:["tile"],pservice:[],pcommon:["style","pservice"],panorama:["pcommon"],panoramaflash:["pcommon"]}},s3:{},aG:{MP:z.ma+"getmodules?v=2.0&t=20140707",oU:5e3},zC:q,Md:{rl:{},En:[],Pv:[]},load:function(t,e,i){var n=this.gb(t);if(n.Bd==this.Fj.Zp)i&&e();else{if(n.Bd==this.Fj.hG){this.bK(t),this.jN(t);var s=this;s.zC==q&&(s.zC=o,setTimeout(function(){for(var t=[],e=0,i=s.Md.En.length;i>e;e++){var n=s.Md.En[e],o="";ja.Gy.VJ(n)?o=ja.Gy.get(n):(o="",t.push(n+"_"+Qb[n])),s.Md.Pv.push({DM:n,EE:o})}s.zC=q,s.Md.En.length=0,t.length>0?(console.log(t),Pb("js/getmodules.js")):s.LK()},1)),n.Bd=this.Fj.vP}n.Pu.push(e)}},bK:function(t){if(t&&this.fL()[t])for(var t=this.fL()[t],e=0;e<t.length;e++)this.bK(t[e]),this.Md.rl[t[e]]||this.jN(t[e])},jN:function(t){for(var e=0;e<this.Md.En.length;e++)if(this.Md.En[e]==t)return;this.Md.En.push(t)},oZ:function(a,b){var c=this.gb(a);try{eval(b)}catch(d){return}c.Bd=this.Fj.Zp;for(var e=0,f=c.Pu.length;f>e;e++)c.Pu[e]();c.Pu.length=0},VJ:function(t,e){var i=this;i.timeout=setTimeout(function(){i.Md.rl[t].Bd!=i.Fj.Zp?(i.remove(t),i.load(t,e)):clearTimeout(i.timeout)},i.aG.oU)},gb:function(t){return this.Md.rl[t]||(this.Md.rl[t]={},this.Md.rl[t].Bd=this.Fj.hG,this.Md.rl[t].Pu=[]),this.Md.rl[t]},remove:function(t){delete this.gb(t)},gV:function(t,e){for(var i=this.Md.Pv,n=o,s=0,a=i.length;a>s;s++)""==i[s].EE&&(i[s].DM==t?i[s].EE=e:n=q);n&&this.LK()},LK:function(){for(var t=this.Md.Pv,e=0,i=t.length;i>e;e++)this.oZ(t[e].DM,t[e].EE);this.Md.Pv.length=0}}),Q.prototype.lb=function(t){return t&&t.x==this.x&&t.y==this.y},L.prototype.lb=function(t){return t&&this.width==t.width&&this.height==t.height},hb.ca=0,x.extend(hb.prototype,{pa:function(t){this.Qh==p&&(this.Qh=t.M.dc),this.Cf==p&&(this.Cf=t.M.Yb)},ra:function(t){t instanceof H&&(this.Kb=t)},ha:t("Kb"),Rt:ba("Vg"),RD:t("Vg"),setUserData:ba("iJ"),getUserData:t("iJ")}),x.lang.sa(Rb,x.lang.Ba,"Control"),x.extend(Rb.prototype,{initialize:function(t){return this.C=t,this.B?(t.Ua.appendChild(this.B),this.B):void 0},Be:function(t){!this.B&&this.initialize&&Va(this.initialize)&&(this.B=this.initialize(t)),this.k=this.k||{Ag:q},this.tB(),this.Jr(),this.B&&(this.B.ir=this)},tB:function(){var t=this.B;if(t){var e=t.style;e.position="absolute",e.zIndex=this.rz||"10",e.MozUserSelect="none",e.WebkitTextSizeAdjust="none",this.k.Ag||x.D.Ta(t,"BMap_noprint"),G()||x.K(t,"contextmenu",oa)}},remove:function(){this.C=p,this.B&&(this.B.parentNode&&this.B.parentNode.removeChild(this.B),this.B=this.B.ir=p)},za:function(){return this.B=yb(this.C.Ua,"<div unselectable='on'></div>"),this.Pa==q&&x.D.U(this.B),this.B},Jr:function(){this.pc(this.k.anchor)},pc:function(t){(this.X0||!Ua(t)||isNaN(t)||Sb>t||t>3)&&(t=this.defaultAnchor),this.k=this.k||{Ag:q},this.k.ya=this.k.ya||this.defaultOffset;var e=this.k.anchor;if(this.k.anchor=t,this.B){var i=this.B,n=this.k.ya.width,o=this.k.ya.height;switch(i.style.left=i.style.top=i.style.right=i.style.bottom="auto",t){case Sb:i.style.top=o+"px",i.style.left=n+"px";break;case Tb:i.style.top=o+"px",i.style.right=n+"px";break;case Ub:i.style.bottom=o+"px",i.style.left=n+"px";break;case 3:i.style.bottom=o+"px",i.style.right=n+"px"}i=["TL","TR","BL","BR"],x.D.Rb(this.B,"anchor"+i[e]),x.D.Ta(this.B,"anchor"+i[t])}},uD:function(){return this.k.anchor},Te:function(t){t instanceof L&&(this.k=this.k||{Ag:q},this.k.ya=new L(t.width,t.height),this.B&&this.pc(this.k.anchor))},Pf:function(){return this.k.ya},Gd:t("B"),show:function(){this.Pa!=o&&(this.Pa=o,this.B&&x.D.show(this.B))},U:function(){this.Pa!=q&&(this.Pa=q,this.B&&x.D.U(this.B))},isPrintable:function(){return!!this.k.Ag},mh:function(){return this.B||this.C?!!this.Pa:q}});var Sb=0,Tb=1,Ub=2;x.lang.sa(ib,Rb,"NavigationControl"),x.extend(ib.prototype,{initialize:function(t){return this.C=t,this.B},jn:function(t){this.k.type=Ua(t)&&t>=0&&3>=t?t:0},fp:function(){return this.k.type},xe:function(){var t=this;I.load("navictrl",function(){t.uf()})}}),x.lang.sa(Vb,Rb,"GeolocationControl"),x.extend(Vb.prototype,{location:function(){this.ke.push({method:"location",arguments:arguments})},getAddressComponent:ca(p)}),x.lang.sa(Wb,Rb,"CopyrightControl"),x.object.extend(Wb.prototype,{initialize:function(t){return this.C=t,this.B},mw:function(t){if(t&&Ua(t.id)&&!isNaN(t.id)){var e,i={bounds:p,content:""};for(e in t)i[e]=t[e];if(t=this.om(t.id))for(var n in i)t[n]=i[n];else this.ac.push(i)}},om:function(t){for(var e=0,i=this.ac.length;i>e;e++)if(this.ac[e].id==t)return this.ac[e]},AD:t("ac"),XE:function(t){for(var e=0,i=this.ac.length;i>e;e++)this.ac[e].id==t&&(r=this.ac.splice(e,1),e--,i=this.ac.length)},xe:function(){var t=this;I.load("copyrightctrl",function(){t.uf()})}}),x.lang.sa(kb,Rb,"OverviewMapControl"),x.extend(kb.prototype,{initialize:function(t){return this.C=t,this.B},pc:function(t){Rb.prototype.pc.call(this,t)},le:function(){this.le.jo=o,this.k.Va=!this.k.Va,this.B||(this.le.jo=q)},we:function(t){t instanceof L||(t=new L(150,150)),t.width=0<t.width?t.width:150,t.height=0<t.height?t.height:150,this.k.size=t},wb:function(){return this.k.size},Va:function(){return this.k.Va},xe:function(){var t=this;I.load("control",function(){t.uf()})}}),x.lang.sa(Xb,Rb,"CityListControl"),x.object.extend(Xb.prototype,{initialize:function(t){return this.C=t,this.B},xe:function(){var t=this;I.load("citylistcontrol",function(){t.uf()},o)}}),x.lang.sa(jb,Rb,"ScaleControl"),x.object.extend(jb.prototype,{initialize:function(t){return this.C=t,this.B},Kk:function(t){this.k.color=t+""},U1:function(){return this.k.color},sF:function(t){this.k.dd=this.Zh[t]&&this.Zh[t].name||this.k.dd},BX:function(){return this.k.dd},xe:function(){var t=this;I.load("control",function(){t.uf()})}});var Yb=0;x.lang.sa(lb,Rb,"MapTypeControl"),x.object.extend(lb.prototype,{initialize:function(t){return this.C=t,this.B},Hy:function(t){this.C.Yn=t},xe:function(){var t=this;I.load("control",function(){t.uf()},o)}}),x.lang.sa(Zb,Rb,"PanoramaControl"),x.extend(Zb.prototype,{initialize:function(t){return this.C=t,this.B},xe:function(){var t=this;I.load("control",function(){t.uf()})}}),x.lang.sa(bc,x.lang.Ba,"ContextMenu"),x.object.extend(bc.prototype,{pa:function(t,e){this.C=t,this.wl=e||p},remove:function(){this.C=this.wl=p},ow:function(t){if(t&&!("menuitem"!=t.Lb||""==t.Vg||0>=t.aj)){for(var e=0,i=this.xa.length;i>e;e++)if(this.xa[e]===t)return;this.xa.push(t),this.Ff.push(t)}},removeItem:function(t){if(t&&"menuitem"==t.Lb){for(var e=0,i=this.xa.length;i>e;e++)this.xa[e]===t&&(this.xa[e].remove(),this.xa.splice(e,1),i--);for(e=0,i=this.Ff.length;i>e;e++)this.Ff[e]===t&&(this.Ff[e].remove(),this.Ff.splice(e,1),i--)}},OB:function(){this.xa.push({Lb:"divider",Oj:this.ze.length}),this.ze.push({D:p})},ZE:function(t){if(this.ze[t]){for(var e=0,i=this.xa.length;i>e;e++)this.xa[e]&&"divider"==this.xa[e].Lb&&this.xa[e].Oj==t&&(this.xa.splice(e,1),i--),this.xa[e]&&"divider"==this.xa[e].Lb&&this.xa[e].Oj>t&&this.xa[e].Oj--;this.ze.splice(t,1)}},Gd:t("B"),show:function(){this.Ph!=o&&(this.Ph=o)},U:function(){this.Ph!=q&&(this.Ph=q)},DZ:function(t){t&&(this.k.cursor=t)},getItem:function(t){return this.Ff[t]}});var cc=F.oa+"menu_zoom_in.png",dc=F.oa+"menu_zoom_out.png";x.lang.sa(ec,x.lang.Ba,"MenuItem"),x.object.extend(ec.prototype,{pa:function(t,e){this.C=t,this.Hh=e},remove:function(){this.C=this.Hh=p},Rt:function(t){t&&(this.Vg=t+"")},Tb:function(t){t&&(this.k.Cm=t)},Gd:t("B"),enable:function(){this.Lh=o},disable:function(){this.Lh=q}}),x.object.extend(eb.prototype,{yj:function(){return!this.Ll||!this.ul},lb:function(t){return t instanceof eb&&!this.yj()?this.qe().lb(t.qe())&&this.kf().lb(t.kf()):q},qe:t("Ll"),kf:t("ul"),uV:function(t){return t instanceof eb&&!this.yj()&&!t.yj()?t.Je>this.Je&&t.De<this.De&&t.Ie>this.Ie&&t.Ce<this.Ce:q},Ka:function(){return this.yj()?p:new H((this.Je+this.De)/2,(this.Ie+this.Ce)/2)},ft:function(t){if(!(t instanceof eb)||Math.max(t.Je,t.De)<Math.min(this.Je,this.De)||Math.min(t.Je,t.De)>Math.max(this.Je,this.De)||Math.max(t.Ie,t.Ce)<Math.min(this.Ie,this.Ce)||Math.min(t.Ie,t.Ce)>Math.max(this.Ie,this.Ce))return p;var e=Math.max(this.Je,t.Je),i=Math.min(this.De,t.De),n=Math.max(this.Ie,t.Ie),t=Math.min(this.Ce,t.Ce);return new eb(new H(e,n),new H(i,t))},bs:function(t){return t instanceof H&&!this.yj()?t.lng>=this.Je&&t.lng<=this.De&&t.lat>=this.Ie&&t.lat<=this.Ce:q},extend:function(t){if(t instanceof H){var e=t.lng,t=t.lat;this.Ll||(this.Ll=new H(0,0)),this.ul||(this.ul=new H(0,0)),(!this.Je||this.Je>e)&&(this.Ll.lng=this.Je=e),(!this.De||this.De<e)&&(this.ul.lng=this.De=e),(!this.Ie||this.Ie>t)&&(this.Ll.lat=this.Ie=t),(!this.Ce||this.Ce<t)&&(this.ul.lat=this.Ce=t)}},EF:function(){return this.yj()?new H(0,0):new H(Math.abs(this.De-this.Je),Math.abs(this.Ce-this.Ie))}}),H.TL=function(t){return t&&180>=t.lng&&-180<=t.lng&&74>=t.lat&&-74<=t.lat},H.prototype.lb=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},fc.prototype.nh=function(){aa("lngLatToPoint方法未实现")},fc.prototype.wi=function(){aa("pointToLngLat方法未实现")};var db={fK:function(t,e,i){I.load("coordtransutils",function(){db.QU(t,e,i)},o)},eK:function(t,e,i){I.load("coordtransutils",function(){db.PU(t,e,i)},o)}};x.sa(hc,x.lang.Ba,"Convertor"),x.extend(hc.prototype,{translate:function(t,e,i,n){this.Oa.push({method:"translate",arguments:[t,e,i,n]})}}),S(hc.prototype,{translate:hc.prototype.translate}),R.prototype=new fc,x.extend(R,{$O:6370996.81,lG:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Au:[75,60,45,30,15,0],fP:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],iG:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Z1:function(t,e){if(!t||!e)return 0;var i,n,t=this.Fb(t);return t?(i=this.Tk(t.lng),n=this.Tk(t.lat),e=this.Fb(e),e?this.Pe(i,this.Tk(e.lng),n,this.Tk(e.lat)):0):0},Vo:function(t,e){return t&&e?(t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),e.lng=this.JD(e.lng,-180,180),e.lat=this.ND(e.lat,-74,74),this.Pe(this.Tk(t.lng),this.Tk(e.lng),this.Tk(t.lat),this.Tk(e.lat))):0},Fb:function(t){if(t===p||t===j)return new H(0,0);var e,i;e=new H(Math.abs(t.lng),Math.abs(t.lat));for(var n=0;n<this.lG.length;n++)if(e.lat>=this.lG[n]){i=this.fP[n];break}return t=this.gK(t,i),t=new H(t.lng.toFixed(6),t.lat.toFixed(6))},Eb:function(t){if(t===p||t===j||180<t.lng||-180>t.lng||90<t.lat||-90>t.lat)return new H(0,0);var e,i;t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),e=new H(t.lng,t.lat);for(var n=0;n<this.Au.length;n++)if(e.lat>=this.Au[n]){i=this.iG[n];break}if(!i)for(n=this.Au.length-1;n>=0;n--)if(e.lat<=-this.Au[n]){i=this.iG[n];break}return t=this.gK(t,i),t=new H(t.lng.toFixed(2),t.lat.toFixed(2))},gK:function(t,e){if(t&&e){var i=e[0]+e[1]*Math.abs(t.lng),n=Math.abs(t.lat)/e[9],n=e[2]+e[3]*n+e[4]*n*n+e[5]*n*n*n+e[6]*n*n*n*n+e[7]*n*n*n*n*n+e[8]*n*n*n*n*n*n,i=i*(0>t.lng?-1:1),n=n*(0>t.lat?-1:1);return new H(i,n)}},Pe:function(t,e,i,n){return this.$O*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(e-t))},Tk:function(t){return Math.PI*t/180},Z3:function(t){return 180*t/Math.PI},ND:function(t,e,i){return e!=p&&(t=Math.max(t,e)),i!=p&&(t=Math.min(t,i)),t},JD:function(t,e,i){for(;t>i;)t-=i-e;for(;e>t;)t+=i-e;return t}}),x.extend(R.prototype,{Jm:function(t){return R.Eb(t)},nh:function(t){return t=R.Eb(t),new Q(t.lng,t.lat)},qh:function(t){return R.Fb(t)},wi:function(t){return t=new H(t.x,t.y),R.Fb(t)},fc:function(t,e,i,n,o){return t?(t=this.Jm(t,o),e=this.Lc(e),new Q(Math.round((t.lng-i.lng)/e+n.width/2),Math.round((i.lat-t.lat)/e+n.height/2))):void 0},zb:function(t,e,i,n,o){return t?(e=this.Lc(e),this.qh(new H(i.lng+e*(t.x-n.width/2),i.lat-e*(t.y-n.height/2)),o)):void 0},Lc:function(t){return Math.pow(2,18-t)}}),gb.prototype=new R,x.extend(gb.prototype,{Jm:function(t,e){return this.tQ(e,R.Eb(t))},qh:function(t,e){return R.Fb(this.uQ(e,t))},lngLatToPointFor3D:function(t,e){var i=this,n=R.Eb(t);I.load("coordtrans",function(){var t=gc.LD(i.gj||"bj",n),t=new Q(t.x,t.y);e&&e(t)},o)},pointToLngLatFor3D:function(t,e){var i=this,n=new H(t.x,t.y);I.load("coordtrans",function(){var t=gc.KD(i.gj||"bj",n),t=new H(t.lng,t.lat),t=R.Fb(t);e&&e(t)},o)},tQ:function(t,e){if(I.gb("coordtrans").Bd==I.Fj.Zp){var i=gc.LD(t||"bj",e);return new H(i.x,i.y)}return I.load("coordtrans",s()),new H(0,0)},uQ:function(t,e){if(I.gb("coordtrans").Bd==I.Fj.Zp){var i=gc.KD(t||"bj",e);return new H(i.lng,i.lat)}return I.load("coordtrans",s()),new H(0,0)},Lc:function(t){return Math.pow(2,20-t)}}),x.lang.sa(ic,x.lang.Ba,"Overlay"),ic.ym=function(t){return t*=1,t?-1e5*t<<1:0},x.extend(ic.prototype,{Be:function(t){!this.V&&Va(this.initialize)&&(this.V=this.initialize(t))&&(this.V.style.WebkitUserSelect="none"),this.draw()},initialize:function(){aa("initialize方法未实现")},draw:function(){aa("draw方法未实现")},remove:function(){this.V&&this.V.parentNode&&this.V.parentNode.removeChild(this.V),this.V=p,this.dispatchEvent(new M("onremove"))},U:function(){this.V&&x.D.U(this.V)},show:function(){this.V&&x.D.show(this.V)},mh:function(){return this.V&&"none"!=this.V.style.display&&"hidden"!=this.V.style.visibility?o:q}}),z.Se(function(t){function e(t,e){var i=K("div"),n=i.style;return n.position="absolute",n.top=n.left=n.width=n.height="0",n.zIndex=e,t.appendChild(i),i}var i=t.R;i.qd=t.qd=e(t.platform,200),t.Sd.oD=e(i.qd,800),t.Sd.AE=e(i.qd,700),t.Sd.SK=e(i.qd,600),t.Sd.tE=e(i.qd,500),t.Sd.vM=e(i.qd,400),t.Sd.wM=e(i.qd,300),t.Sd.FO=e(i.qd,201),t.Sd.ot=e(i.qd,200)}),x.lang.sa(fb,ic,"OverlayInternal"),x.extend(fb.prototype,{initialize:function(t){return this.map=t,x.lang.Ba.call(this,this.ca),p},lx:t("map"),draw:s(),Hj:s(),remove:function(){this.map=p,x.lang.Pw(this.ca),ic.prototype.remove.call(this)},U:function(){this.Pa!==q&&(this.Pa=q)},show:function(){this.Pa!==o&&(this.Pa=o)},mh:function(){return this.V?!!this.Pa:q},Na:t("V"),CN:function(t){var e,t=t||{};for(e in t)this.z[e]=t[e]},St:ba("zIndex"),ii:function(){this.z.ii=o},VV:function(){this.z.ii=q},uo:ba("hg"),zp:function(){this.hg=p}}),z.Se(function(t){var e=new jc;e.map=t,t.ua=e.ua,t.ye=e.ye,t.addEventListener("load",function(t){e.draw(t)}),t.addEventListener("moveend",function(t){e.draw(t)}),x.ea.la&&8>x.ea.la||"BackCompat"===document.compatMode?t.addEventListener("zoomend",function(t){setTimeout(function(){e.draw(t)},20)}):t.addEventListener("zoomend",function(t){e.draw(t)}),t.addEventListener("maptypechange",function(t){e.draw(t)}),t.addEventListener("addoverlay",function(t){if(t=t.target,t instanceof fb)e.ua[t.ca]||(e.ua[t.ca]=t);else{for(var i=q,n=0,s=e.ye.length;s>n;n++)if(e.ye[n]===t){i=o;break}i||e.ye.push(t)}}),t.addEventListener("removeoverlay",function(t){if(t=t.target,t instanceof fb)delete e.ua[t.ca];else for(var i=0,n=e.ye.length;n>i;i++)if(e.ye[i]===t){e.ye.splice(i,1);break}}),t.addEventListener("clearoverlays",function(){this.Xc();for(var t in e.ua)e.ua[t].z.ii&&(e.ua[t].remove(),delete e.ua[t]);t=0;for(var i=e.ye.length;i>t;t++)e.ye[t].ii!==q&&(e.ye[t].remove(),e.ye[t]=p,e.ye.splice(t,1),t--,i--)}),t.addEventListener("infowindowopen",function(){var t=this.xb;t&&(x.D.U(t.xc),x.D.U(t.$b))}),t.addEventListener("movestart",function(){this.jh()&&this.jh().MI()}),t.addEventListener("moveend",function(){this.jh()&&this.jh().CI()})}),jc.prototype.draw=function(t){if(z.cq){var e=z.cq.Os(this.map);"canvas"===e.Lb&&e.canvas&&e.oQ(e.canvas.getContext("2d"))}for(var i in this.ua)this.ua[i].draw(t);x.jc.Db(this.ye,function(t){t.draw()}),this.map.R.mb&&this.map.R.mb.ra(),z.cq&&e.pF()},x.lang.sa(kc,fb,"Graph"),kc.gx=function(t){var e=[];return t?(Xa(t)&&x.jc.Db(t.split(";"),function(t){t=t.split(","),e.push(new H(t[0],t[1]))}),"[object Array]"==Object.prototype.toString.apply(t)&&0<t.length&&(e=t),e):e},kc.KE=[.09,.005,1e-4,1e-5],x.extend(kc.prototype,{initialize:function(t){return this.map=t,p},draw:s(),Ir:function(t){this.bf.length=0,this.ia=kc.gx(t).slice(0),this.Eh()},ge:function(t){this.Ir(t)},Eh:function(){if(this.ia){var t=this;t.Mu=new eb,x.jc.Db(this.ia,function(e){t.Mu.extend(e)})}},oe:t("ia"),hn:function(t,e){e&&this.ia[t]&&(this.bf.length=0,this.ia[t]=new H(e.lng,e.lat),this.Eh())},setStrokeColor:function(t){this.z.strokeColor=t},rX:function(){return this.z.strokeColor},Op:function(t){t>0&&(this.z.lc=t)},tL:function(){return this.z.lc},Mp:function(t){t==j||t>1||0>t||(this.z.sd=t)},sX:function(){return this.z.sd},Lt:function(t){t>1||0>t||(this.z.qg=t)},PW:function(){return this.z.qg},Np:function(t){"solid"!=t&&"dashed"!=t||(this.z.strokeStyle=t)},sL:function(){return this.z.strokeStyle},setFillColor:function(t){this.z.fillColor=t||""},OW:function(){return this.z.fillColor},Fd:t("Mu"),remove:function(){this.map&&this.map.removeEventListener("onmousemove",this.iv),fb.prototype.remove.call(this),this.bf.length=0},Nf:function(){if(!(2>this.ia.length)){this.z.Nf=o;var t=this;I.load("poly",function(){t.Rl()},o)}},UV:function(){this.z.Nf=q;var t=this;I.load("poly",function(){t.mk()},o)}}),x.lang.sa(lc,fb,"Division"),x.extend(lc.prototype,{Hj:function(){var t=this.z,e=this.content,i=['<div class="BMap_Division" style="position:absolute;'];i.push("width:"+t.width+"px;display:block;"),i.push("overflow:hidden;"),"none"!=t.borderColor&&i.push("border:"+t.Nx+"px "+t.pY+" "+t.hM+";"),i.push("opacity:"+t.opacity+"; filter:(opacity="+100*t.opacity+")"),i.push("background:"+t.background+";"),i.push('z-index:60;">'),i.push(e),i.push("</div>"),this.V=yb(this.map.Qf().AE,i.join(""))},initialize:function(t){return this.map=t,this.Hj(),this.V&&x.K(this.V,G()?"touchstart":"mousedown",function(t){na(t)}),this.V},draw:function(){var t=this.map.Re(this.z.point);this.z.ya=new L(-Math.round(this.z.width/2)-Math.round(this.z.Nx),-Math.round(this.z.height/2)-Math.round(this.z.Nx)),this.V.style.left=t.x+this.z.ya.width+"px",this.V.style.top=t.y+this.z.ya.height+"px"},ha:function(){return this.z.point},C0:function(){return this.map.fc(this.ha())},ra:function(t){this.z.point=t,this.draw()},EZ:function(t,e){this.z.width=Math.round(t),this.z.height=Math.round(e),this.V&&(this.V.style.width=this.z.width+"px",this.V.style.height=this.z.height+"px",this.draw())}}),x.extend(mc.prototype,{DN:function(t){t&&(this.imageUrl=t)},UZ:function(t){t&&(this.printImageUrl=t)},we:function(t){t&&(this.size=new L(t.width,t.height))},pc:function(t){t&&(this.anchor=new L(t.width,t.height))},Mt:function(t){t&&(this.imageOffset=new L(t.width,t.height))},KZ:function(t){t&&(this.infoWindowAnchor=new L(t.width,t.height))},HZ:function(t){t&&(this.imageSize=new L(t.width,t.height))},toString:ca("Icon")}),x.extend(nc.prototype,{setPath:ba("gB"),setAnchor:function(t){this.Ji=this.style.anchor=t},setRotation:function(t){this.style.rotation=t},setScale:function(t){this.style.scale=t},setStrokeWeight:function(t){this.style.lc=t},setStrokeColor:function(t){t=x.as.nC(t,this.style.sd),this.style.strokeColor=t},setStrokeOpacity:function(t){this.style.sd=t},setFillOpacity:function(t){this.style.qg=t},setFillColor:function(t){this.style.fillColor=t}}),x.lang.sa(pc,x.lang.Ba,"InfoWindow"),x.extend(pc.prototype,{setWidth:function(t){!t&&0!=t||isNaN(t)||0>t||(0!=t&&(220>t&&(t=220),t>730&&(t=730)),this.z.width=t)},setHeight:function(t){!t&&0!=t||isNaN(t)||0>t||(0!=t&&(60>t&&(t=60),t>650&&(t=650)),this.z.height=t)},GN:function(t){!t&&0!=t||isNaN(t)||0>t||(0!=t&&(220>t&&(t=220),t>730&&(t=730)),this.z.maxWidth=t)},Bc:function(t){this.z.title=t},getTitle:function(){return this.z.title},bd:ba("content"),uk:t("content"),Ot:function(t){this.z.BE=t+""},fe:s(),Ds:function(){this.z.Ds=o},disableAutoPan:function(){this.z.Ds=q},enableCloseOnClick:function(){this.z.aD=o},disableCloseOnClick:function(){this.z.aD=q},dh:function(){this.z.dh=o},Sw:function(){this.z.dh=q},show:function(){this.Pa=o},U:function(){this.Pa=q},close:function(){this.U()},Rx:function(){this.ae=o},restore:function(){this.ae=q},mh:function(){return this.Va()},Va:ca(q),ha:function(){return this.$a&&this.$a.ha?this.$a.ha():void 0},Pf:function(){return this.z.ya}}),Ka.prototype.Mb=function(t,e){if(t instanceof pc&&e instanceof H){var i=this.R;i.Lm?i.Lm.ra(e):(i.Lm=new T(e,{icon:new mc(F.oa+"blank.gif",{width:1,height:1}),offset:new L(0,0),clickable:q}),i.Lm.rR=1),this.Ja(i.Lm),i.Lm.Mb(t)}},Ka.prototype.Xc=function(){var t=this.R.mb||this.R.ll;t&&t.$a&&t.$a.Xc()},fb.prototype.Mb=function(t){this.map&&(this.map.Xc(),t.Pa=o,this.map.R.ll=t,t.$a=this,x.lang.Ba.call(t,t.ca))},fb.prototype.Xc=function(){this.map&&this.map.R.ll&&(this.map.R.ll.Pa=q,x.lang.Pw(this.map.R.ll.ca),this.map.R.ll=p)},x.lang.sa(qc,fb,"Label"),x.extend(qc.prototype,{ha:function(){return this.qv?this.qv.ha():this.point},ra:function(t){t instanceof H&&!this.mx()&&(this.point=this.z.position=new H(t.lng,t.lat))},bd:ba("content"),oF:function(t){t>=0&&1>=t&&(this.z.opacity=t)},Te:function(t){t instanceof L&&(this.z.ya=new L(t.width,t.height))},Pf:function(){return this.z.ya},Jd:function(t){t=t||{},this.z.Rp=x.extend(this.z.Rp,t)},yi:function(t){return this.Jd(t)},Bc:function(t){this.z.title=t||""},getTitle:function(){return this.z.title},FN:function(t){this.point=(this.qv=t)?this.z.position=t.ha():this.z.position=p},mx:function(){return this.qv||p},uk:t("content")}),x.lang.sa(rc,fb,"GroundOverlay"),x.extend(rc.prototype,{setBounds:function(t){this.z.fb=t},getBounds:function(){return this.z.fb},setOpacity:function(t){this.z.opacity=t},getOpacity:function(){return this.z.opacity},setImageURL:function(t){this.z.Em=t},getImageURL:function(){return this.z.Em},setDisplayOnMinLevel:function(t){this.z.rs=t},getDisplayOnMinLevel:function(){return this.z.rs},setDisplayOnMaxLevel:function(t){this.z.qs=t},getDisplayOnMaxLevel:function(){return this.z.qs}});var sc=3,tc=4;x.lang.sa(vc,fb,"PointCollection"),x.extend(vc.prototype,{initialize:function(t){this.dB&&this.dB.push({method:"initialize",arguments:arguments})},setPoints:function(t){this.ke&&this.ke.push({method:"setPoints",arguments:arguments})},setStyles:function(t){this.ke&&this.ke.push({method:"setStyles",arguments:arguments})},clear:function(){this.ke&&this.ke.push({method:"clear",arguments:arguments})},remove:function(){this.ke&&this.ke.push({method:"remove",arguments:arguments})}});var wc=new mc(F.oa+"marker_red_sprite.png",new L(19,25),{anchor:new L(10,25),infoWindowAnchor:new L(10,0)}),xc=new mc(F.oa+"marker_red_sprite.png",new L(20,11),{anchor:new L(6,11),imageOffset:new L(-19,-13)});T.Fu=ic.ym(-90)+1e6,T.eG=T.Fu+1e6,x.lang.sa(T,fb,"Marker"),x.extend(T.prototype,{Tb:function(t){(t instanceof mc||t instanceof nc)&&(this.z.vj=t)},Wo:function(){return this.z.vj},xy:function(t){t instanceof mc&&(this.z.Nk=t)},getShadow:function(){return this.z.Nk},fn:function(t){this.z.label=t||p},GD:function(){return this.z.label},bc:function(){this.z.bc=o},GC:function(){this.z.bc=q},ha:t("point"),ra:function(t){t instanceof H&&(this.point=new H(t.lng,t.lat))},zi:function(t,e){this.z.pE=!!t,t&&(this.AG=e||0)},Bc:function(t){this.z.title=t+""},getTitle:function(){return this.z.title},Te:function(t){t instanceof L&&(this.z.ya=t)},Pf:function(){return this.z.ya},dn:ba("tq"),Lp:function(t){this.z.rotation=t},qL:function(){return this.z.rotation}}),x.lang.sa(yc,kc,"Polygon"),x.extend(yc.prototype,{ge:function(t,e){this.ro=kc.gx(t).slice(0);var i=kc.gx(t).slice(0);1<i.length&&i.push(new H(i[0].lng,i[0].lat)),kc.prototype.ge.call(this,i,e)},hn:function(t,e){this.ro[t]&&(this.ro[t]=new H(e.lng,e.lat),this.ia[t]=new H(e.lng,e.lat),0==t&&!this.ia[0].lb(this.ia[this.ia.length-1])&&(this.ia[this.ia.length-1]=new H(e.lng,e.lat)),this.Eh())},oe:function(){var t=this.ro;return 0==t.length&&(t=this.ia),t}}),x.lang.sa(zc,kc,"Polyline"),Ac.KE=[.01,1e-4,1e-5,4e-6],x.lang.sa(Ac,yc,"Circle"),x.extend(Ac.prototype,{initialize:function(t){return this.map=t,this.ia=this.ev(this.point,this.wa),this.Eh(),p},Ka:t("point"),Vf:function(t){t&&(this.point=t)},oL:t("wa"),qf:function(t){this.wa=Math.abs(t)},ev:function(t,e){if(!t||!e||!this.map)return[];for(var i=[],n=e/6378800,o=Math.PI/180*t.lat,s=Math.PI/180*t.lng,a=0;360>a;a+=9){var r=Math.PI/180*a,h=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(r)),r=new H(((s-Math.atan2(Math.sin(r)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(h))+Math.PI)%(2*Math.PI)-Math.PI)*(180/Math.PI),h*(180/Math.PI));i.push(r)}return n=i[0],i.push(new H(n.lng,n.lat)),i}});var Bc={};z.Se(function(t){var e=new Cc(t);e.pa(),t.tb=e}),x.extend(Cc.prototype,{pa:function(){var t=this,e=t.map;e.addEventListener("loadcode",function(){t.Ox()}),e.addEventListener("addtilelayer",function(e){t.Yg(e)}),e.addEventListener("removetilelayer",function(e){t.zh(e)}),e.addEventListener("setmaptype",function(e){t.Bg(e)}),e.addEventListener("zoomstartcode",function(e){t.Kc(e)}),e.addEventListener("setcustomstyles",function(e){t.Nt(e.target),t.Tf(o)})},Ox:function(){var t=this;if(x.ea.la)try{document.execCommand("BackgroundImageCache",q,o)}catch(e){}this.loaded||t.Ex(),t.Tf(),this.loaded||(this.loaded=o,I.load("tile",function(){t.KP()}))},Ex:function(){for(var t=this.map.va().jr,e=0;e<t.length;e++){var i=new Dc;x.extend(i,t[e]),this.Km.push(i),i.pa(this.map,this.ao)}this.Nt()},Mn:function(t){var e=K("div");return e.style.position="absolute",e.style.overflow="visible",e.style.left=e.style.top="0",e.style.zIndex=t,e},vf:function(){this.th--;var t=this;this.jE&&(this.map.dispatchEvent(new M("onfirsttileloaded")),this.jE=q),0==this.th&&(this.Ni&&(clearTimeout(this.Ni),this.Ni=p),this.Ni=setTimeout(function(){0==t.th&&(t.map.dispatchEvent(new M("ontilesloaded")),t.jE=o),t.Ni=p},80))},SD:function(t,e){return"TILE-"+e.ca+"-"+t[0]+"-"+t[1]+"-"+t[2]},Cx:function(t){var e=t.Gb;e&&xb(e)&&e.parentNode.removeChild(e),delete this.wg[t.name],t.loaded||(Ec(t),t.Gb=p,t.Nm=p)},xm:function(t,e,i){var n=this.map,s=n.va(),a=n.Ha,r=n.wc,h=s.Lc(a),c=this.dL(),l=c[0],d=c[1],u=c[2],f=c[3],g=c[4],i="undefined"!=typeof i?i:0,s=s.k.Ob,c=n.ca.replace(/^TANGRAM_/,"");for(this.Rc?this.Rc.length=0:this.Rc=[];u>l;l++)for(var m=d;f>m;m++){var b=l,v=m;this.Rc.push([b,v]),b=c+"_"+e+"_"+b+"_"+v+"_"+a,this.oK[b]=b}for(this.Rc.sort(function(t){return function(e,i){return.4*Math.abs(e[0]-t[0])+.6*Math.abs(e[1]-t[1])-(.4*Math.abs(i[0]-t[0])+.6*Math.abs(i[1]-t[1]))}}([g[0]-1,g[1]-1])),r=[Math.round(-r.lng/h),Math.round(r.lat/h)],l=-n.offsetY+n.height/2,t.style.left=-n.offsetX+n.width/2+"px",t.style.top=l+"px",
this.Ke?this.Ke.length=0:this.Ke=[],l=0,n=t.childNodes.length;n>l;l++)m=t.childNodes[l],m.fr=q,this.Ke.push(m);if(l=this.Qm)for(var y in l)delete l[y];else this.Qm={};for(this.Le?this.Le.length=0:this.Le=[],l=0,n=this.Rc.length;n>l;l++)for(y=this.Rc[l][0],h=this.Rc[l][1],m=0,d=this.Ke.length;d>m;m++)if(u=this.Ke[m],u.id==c+"_"+e+"_"+y+"_"+h+"_"+a){u.fr=o,this.Qm[u.id]=u;break}for(l=0,n=this.Ke.length;n>l;l++)u=this.Ke[l],u.fr||this.Le.push(u);for(this.nn=[],m=(s+i)*this.map.M.devicePixelRatio,l=0,n=this.Rc.length;n>l;l++)y=this.Rc[l][0],h=this.Rc[l][1],f=y*s+r[0]-i/2,g=(-1-h)*s+r[1]-i/2,b=c+"_"+e+"_"+y+"_"+h+"_"+a,d=this.Qm[b],u=p,d?(u=d.style,u.left=f+"px",u.top=g+"px",d.Xe||this.nn.push([y,h,d])):(0<this.Le.length?(d=this.Le.shift(),d.getContext("2d").clearRect(-i/2,-i/2,m,m),u=d.style):(d=document.createElement("canvas"),u=d.style,u.position="absolute",u.width=s+i+"px",u.height=s+i+"px",this.Jx()&&(u.WebkitTransform="scale(1.001)"),d.setAttribute("width",m),d.setAttribute("height",m),t.appendChild(d)),d.id=b,u.left=f+"px",u.top=g+"px",-1<b.indexOf("bg")&&(f="#F3F1EC",this.map.M.zo&&(f=this.map.M.zo),u.background=f?f:""),this.nn.push([y,h,d])),d.style.visibility="";for(l=0,n=this.Le.length;n>l;l++)this.Le[l].style.visibility="hidden";return this.nn},Jx:function(){return/M040/i.test(navigator.userAgent)},dL:function(){var t=this.map,e=t.va(),i=e.XD(t.Ha),n=t.wc,o=Math.ceil(n.lng/i),s=Math.ceil(n.lat/i),e=e.k.Ob,i=[o,s,(n.lng-o*i)/i*e,(n.lat-s*i)/i*e];return[i[0]-Math.ceil((t.width/2-i[2])/e),i[1]-Math.ceil((t.height/2-i[3])/e),i[0]+Math.ceil((t.width/2+i[2])/e),i[1]+Math.ceil((t.height/2+i[3])/e),i]},a_:function(t,e,i,n){var o=this;o.h1=e;var s=this.map.va(),a=o.SD(t,i),r=s.k.Ob,e=[t[0]*r+e[0],(-1-t[1])*r+e[1]],h=this.wg[a];h&&h.Gb?(vb(h.Gb,e),n&&(n=new Q(t[0],t[1]),s=this.map.M.se?this.map.M.se.style:"normal",n=i.getTilesUrl(n,t[2],s),h.loaded=q,Fc(h,n)),h.loaded?this.vf():Gc(h,function(){o.vf()})):(h=this.fj[a])&&h.Gb?(i.Pb.insertBefore(h.Gb,i.Pb.lastChild),this.wg[a]=h,vb(h.Gb,e),n&&(n=new Q(t[0],t[1]),s=this.map.M.se?this.map.M.se.style:"normal",n=i.getTilesUrl(n,t[2],s),h.loaded=q,Fc(h,n)),h.loaded?this.vf():Gc(h,function(){o.vf()})):(h=r*Math.pow(2,s.qm()-t[2]),new H(t[0]*h,t[1]*h),n=new Q(t[0],t[1]),s=this.map.M.se?this.map.M.se.style:"normal",n=i.getTilesUrl(n,t[2],s),h=new Hc(this,n,e,t,i),Gc(h,function(){o.vf()}),h.$n(),this.wg[a]=h)},vf:function(){this.th--;var t=this;0==this.th&&(this.Ni&&(clearTimeout(this.Ni),this.Ni=p),this.Ni=setTimeout(function(){if(0==t.th&&(t.map.dispatchEvent(new M("ontilesloaded")),ua)){if(qa&&ra&&sa){var e=$a(),i=t.map.wb();setTimeout(function(){Oa(5030,{load_script_time:ra-qa,load_tiles_time:e-sa,map_width:i.width,map_height:i.height,map_size:i.width*i.height})},1e4),va.oc("img_fisrt_loaded"),va.oc("map_width",i.width),va.oc("map_height",i.height),va.oc("map_size",i.width*i.height),va.Xm(),z.Ij("cus.fire","time",{z_imgfirstloaded:e-sa})}ua=q}t.Ni=p},80))},SD:function(t,e){return this.map.va()===Na?"TILE-"+e.ca+"-"+this.map.Bw+"-"+t[0]+"-"+t[1]+"-"+t[2]:"TILE-"+e.ca+"-"+t[0]+"-"+t[1]+"-"+t[2]},Cx:function(t){var e=t.Gb;e&&(Ic(e),xb(e)&&e.parentNode.removeChild(e)),delete this.wg[t.name],t.loaded||(Ic(e),Ec(t),t.Gb=p,t.Nm=p)},Tf:function(t){var e=this;if(e.map.va()==Na)I.load("coordtrans",function(){e.map.Vb||(e.map.Vb=Na.tk(e.map.$g),e.map.Bw=Na.bL(e.map.Vb)),e.cI()},o);else{if(t&&t)for(var i in this.fj)delete this.fj[i];e.cI(t)}},cI:function(t){for(var e=this.Km.concat(this.Wf),i=e.length,n=0;i>n;n++){var s=e[n];if(s.dc&&l.Ha<s.dc)break;if(s.vw){var a=this.Pb=s.Pb;if(t){var r=a;if(r&&r.childNodes)for(var h=r.childNodes.length,c=h-1;c>=0;c--)h=r.childNodes[c],r.removeChild(h),h=p}if(this.map.Ub()){this.md.style.display="block",a.style.display="none",this.map.dispatchEvent(new M("vectorchanged"),{isvector:o});continue}a.style.display="block",this.md.style.display="none",this.map.dispatchEvent(new M("vectorchanged"),{isvector:q})}if(!s.TH&&!(s.mp&&!this.map.Ub()||s.$L&&this.map.Ub())){var l=this.map,d=l.va(),a=d.bp(),h=l.Ha,u=l.wc;d==Na&&u.lb(new H(0,0))&&(u=l.wc=a.Jm(l.ef,l.Vb));var f=d.Lc(h),h=d.XD(h),a=Math.ceil(u.lng/h),r=Math.ceil(u.lat/h),g=d.k.Ob,h=[a,r,(u.lng-a*h)/h*g,(u.lat-r*h)/h*g],c=h[0]-Math.ceil((l.width/2-h[2])/g),a=h[1]-Math.ceil((l.height/2-h[3])/g),r=h[0]+Math.ceil((l.width/2+h[2])/g),m=0;d===Na&&15==l.fa()&&(m=1),d=h[1]+Math.ceil((l.height/2+h[3])/g)+m,this.IJ=new H(u.lng,u.lat);var b,v=this.wg,g=-this.IJ.lng/f,m=this.IJ.lat/f,f=[Math.ceil(g),Math.ceil(m)],u=l.fa();for(b in v){var y=v[b],x=y.info;(x[2]!=u||x[2]==u&&(c>x[0]||r<=x[0]||a>x[1]||d<=x[1]))&&this.Cx(y)}for(v=-l.offsetX+l.width/2,y=-l.offsetY+l.height/2,s.Pb&&(s.Pb.style.left=Math.ceil(g+v)-f[0]+"px",s.Pb.style.top=Math.ceil(m+y)-f[1]+"px",s.Pb.style.WebkitTransform="translate3d(0,0,0)"),g=[],l.IB=[];r>c;c++)for(m=a;d>m;m++)g.push([c,m]),l.IB.push({x:c,y:m});for(g.sort(function(t){return function(e,i){return.4*Math.abs(e[0]-t[0])+.6*Math.abs(e[1]-t[1])-(.4*Math.abs(i[0]-t[0])+.6*Math.abs(i[1]-t[1]))}}([h[0]-1,h[1]-1])),h=g.length,this.th+=h,c=0;h>c;c++)this.a_([g[c][0],g[c][1],u],f,s,t)}}},Yg:function(t){var e=this,i=t.target,t=e.map.Ub();if(i instanceof bb)t&&!i.Fm&&(i.pa(this.map,this.md),i.Fm=o);else if(i.Xf&&this.map.Yg(i.Xf),i.mp){for(t=0;t<e.Eg.length;t++)if(e.Eg[t]==i)return;I.load("vector",function(){i.pa(e.map,e.md),e.Eg.push(i)},o)}else{for(t=0;t<e.Wf.length;t++)if(e.Wf[t]==i)return;i.pa(this.map,this.vl),e.Wf.push(i)}},zh:function(t){var t=t.target,e=this.map.Ub();if(t instanceof bb)e&&t.Fm&&(t.remove(),t.Fm=q);else{if(t.Xf&&this.map.zh(t.Xf),t.mp)for(var e=0,i=this.Eg.length;i>e;e++)t==this.Eg[e]&&this.Eg.splice(e,1);else for(e=0,i=this.Wf.length;i>e;e++)t==this.Wf[e]&&this.Wf.splice(e,1);t.remove()}},Bg:function(){for(var t=this.Km,e=0,i=t.length;i>e;e++)t[e].remove();delete this.Pb,this.Km=[],this.fj=this.wg={},this.Ex(),this.Tf()},Kc:function(){var t=this;t.ud&&x.D.U(t.ud),setTimeout(function(){t.Tf(),t.map.dispatchEvent(new M("onzoomend"))},10)},j4:s(),Nt:function(t){var e=this.map.va();if(!this.map.Ub()&&(t?this.map.M.i_=t:t=this.map.M.i_,t))for(var i,n=p,n="2"==z.ou?[z.url.proto+z.url.domain.main_domain_cdn.other[0]+"/"]:[z.url.proto+z.url.domain.main_domain_cdn.baidu[0]+"/",z.url.proto+z.url.domain.main_domain_cdn.baidu[1]+"/",z.url.proto+z.url.domain.main_domain_cdn.baidu[2]+"/"],s=0;i=this.Km[s];s++)if(i.WZ==o){e.k.Yb=18,i.getTilesUrl=function(e,i){var o=e.x,s=e.y,a="customimage/tile?&x="+o+"&y="+s+"&z="+i+"&udt=20150601",a=t.styleStr?a+("&styles="+encodeURIComponent(t.styleStr)):a+("&customid="+t.style);return n[Math.abs(o+s)%n.length]+a};break}}}),Hc.prototype.$n=function(){this.Gb.src=0<x.ea.la&&6>=x.ea.la&&this.fJ?F.oa+"blank.gif":""!==this.src&&this.Gb.src==this.src?this.src+"&t = "+Date.now():this.src};var Jc=!x.ea.la||8<x.ea.la;Dc.kS=0,x.lang.sa(Dc,x.lang.Ba,"TileLayer"),x.extend(Dc.prototype,{pa:function(t,e){if(this.vw&&(this.zIndex=-100),this.map=t,!this.Pb){var i=K("div"),n=i.style;n.position="absolute",n.overflow="visible",n.zIndex=this.zIndex,n.left=Math.ceil(-t.offsetX+t.width/2)+"px",n.top=Math.ceil(-t.offsetY+t.height/2)+"px",e.appendChild(i),this.Pb=i}},remove:function(){this.Pb&&this.Pb.parentNode&&(this.Pb.innerHTML="",this.Pb.parentNode.removeChild(this.Pb)),delete this.Pb},lt:t("H_"),getTilesUrl:function(t,e){var i="";return this.uh.tileUrlTemplate&&(i=this.uh.tileUrlTemplate.replace(/\{X\}/,t.x),i=i.replace(/\{Y\}/,t.y),i=i.replace(/\{Z\}/,e)),i},om:t("wV"),va:function(){return this.Hb||La}}),x.sa(Kc,Dc,"VectorCloudLayer"),x.sa(Lc,Dc,"VectorTrafficLayer"),x.extend(bb.prototype,{pa:function(t,e){this.C=t,this.B=e},remove:function(){this.B=this.C=p}}),Mc.prototype=new Dc,Mc.prototype.pa=function(t,e){Dc.prototype.pa.call(this,t,e),this.C=t},Mc.prototype.lt=ca(o),Mc.prototype.getTilesUrl=function(t,e){var i="";return this.k.predictDate?i="HistoryService?day="+(this.k.predictDate.weekday-1)+"&hour="+this.k.predictDate.hour+"&t="+(new Date).getTime()+"&":(i="TrafficTileService?time="+(new Date).getTime()+"&",i+="label=web2D&v=016&"),(this.nU+i+"level="+e+"&x="+t.x+"&y="+t.y).replace(/-(\d+)/gi,"M$1")};var Nc=[z.url.proto+z.url.domain.TILES_YUN_HOST[0]+"/georender/gss",z.url.proto+z.url.domain.TILES_YUN_HOST[1]+"/georender/gss",z.url.proto+z.url.domain.TILES_YUN_HOST[2]+"/georender/gss",z.url.proto+z.url.domain.TILES_YUN_HOST[3]+"/georender/gss"],Oc=z.url.proto+z.url.domain.main_domain_nocdn.baidu+"/style/poi/rangestyle",Pc=100;mb.prototype=new Dc,mb.prototype.pa=function(t,e){Dc.prototype.pa.call(this,t,e),this.C=t},mb.prototype.getTilesUrl=function(t,e){var i=t.x,n=t.y,o=this.nc,i=Nc[Math.abs(i+n)%Nc.length]+"/image?grids="+i+"_"+n+"_"+e+"&q="+o.Wm+"&tags="+o.eu+"&filter="+o.filter+"&sortby="+o.Ey+"&ak="+this.nc.Sl+"&age="+o.sw+"&page_size="+o.hN+"&format="+o.q_;return o.JF||(o=(1e5*Math.random()).toFixed(0),i+="&timeStamp="+o),this.xf?i+="&geotable_id="+this.xf:this.Pn&&(i+="&databox_id="+this.Pn),i},mb.prototype.enableUseCache=function(){this.nc.JF=o},mb.prototype.disableUseCache=function(){this.nc.JF=q},mb.LT=/^point\(|\)$/gi,mb.MT=/\s+/,mb.OT=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x.extend(Qc.prototype,{getName:t("af"),Ys:function(){return this.k.r_},j2:function(){return this.k.uE},xX:function(){return this.jr[0]},x2:t("jr"),yX:function(){return this.k.Ob},Xo:function(){return this.k.dc},qm:function(){return this.k.Yb},setMaxZoom:function(t){this.k.Yb=t},wm:function(){return this.k.AF},bp:function(){return this.k.ve},a2:function(){return this.k.iD},yX:function(){return this.k.Ob},Lc:function(t){return Math.pow(2,18-t)},XD:function(t){return this.Lc(t)*this.k.Ob}});var Rc=[z.url.proto+z.url.domain.TILE_BASE_URLS[0]+"/it/",z.url.proto+z.url.domain.TILE_BASE_URLS[1]+"/it/",z.url.proto+z.url.domain.TILE_BASE_URLS[2]+"/it/",z.url.proto+z.url.domain.TILE_BASE_URLS[3]+"/it/",z.url.proto+z.url.domain.TILE_BASE_URLS[4]+"/it/"],Sc=[z.url.proto+z.url.domain.TILE_ONLINE_URLS[0]+"/tile/",z.url.proto+z.url.domain.TILE_ONLINE_URLS[1]+"/tile/",z.url.proto+z.url.domain.TILE_ONLINE_URLS[2]+"/tile/",z.url.proto+z.url.domain.TILE_ONLINE_URLS[3]+"/tile/",z.url.proto+z.url.domain.TILE_ONLINE_URLS[4]+"/tile/"],Tc={dark:"dl",light:"ll",normal:"pl"},Uc=new Dc;Uc.WZ=o,Uc.getTilesUrl=function(t,e,i){var n=t.x,o=t.y,s=e;return"tiles/"+s+"/"+n+"/"+o+".jpg"};var La=new Qc("地图",Uc,{tips:"显示普通地图",maxZoom:19}),Vc=new Dc;Vc.cO=[z.url.proto+z.url.domain.TIlE_PERSPECT_URLS[0]+"/resource/mappic/",z.url.proto+z.url.domain.TIlE_PERSPECT_URLS[1]+"/resource/mappic/",z.url.proto+z.url.domain.TIlE_PERSPECT_URLS[2]+"/resource/mappic/",z.url.proto+z.url.domain.TIlE_PERSPECT_URLS[3]+"/resource/mappic/"],Vc.getTilesUrl=function(t,e){var i=t.x,n=t.y,o=256*Math.pow(2,20-e),n=Math.round((9998336-o*n)/o)-1;return url=this.cO[Math.abs(i+n)%this.cO.length]+this.map.Vb+"/"+this.map.Bw+"/3/lv"+(21-e)+"/"+i+","+n+".jpg"};var Na=new Qc("三维",Vc,{tips:"显示三维地图",minZoom:15,maxZoom:20,textColor:"white",projection:new gb});Na.Lc=function(t){return Math.pow(2,20-t)},Na.tk=function(t){if(!t)return"";var e,i=F.cC;for(e in i)if(-1<t.search(e))return i[e].gy;return""},Na.bL=function(t){return{bj:2,gz:1,sz:14,sh:4}[t]};var Wc=new Dc({vw:o});Wc.getTilesUrl=function(t,e){var i=t.x,n=t.y;return(Rc[Math.abs(i+n)%Rc.length]+"u=x="+i+";y="+n+";z="+e+";v=009;type=sate&fm=46&udt=20141015").replace(/-(\d+)/gi,"M$1")};var Wa=new Qc("卫星",Wc,{tips:"显示卫星影像",minZoom:1,maxZoom:19,textColor:"white"}),Xc=new Dc({transparentPng:o});Xc.getTilesUrl=function(t,e){var i=t.x,n=t.y;return(Sc[Math.abs(i+n)%Sc.length]+"?qt=tile&x="+(i+"").replace(/-/gi,"M")+"&y="+(n+"").replace(/-/gi,"M")+"&z="+e+"&styles=sl"+(6==x.ea.la?"&color_dep=32&colors=50":"")+"&udt=20141015").replace(/-(\d+)/gi,"M$1")};var Pa=new Qc("混合",[Wc,Xc],{tips:"显示带有街道的卫星影像",labelText:"路网",minZoom:1,maxZoom:19,textColor:"white"}),Yc=1,U={};window.d0=U,x.sa(V,x.lang.Ba),x.extend(V.prototype,{getResults:function(){return this.Ec?this.Ki:this.ja},enableAutoViewport:function(){this.k.ka.Zg=o},disableAutoViewport:function(){this.k.ka.Zg=q},gn:function(t){t&&(this.zd.src=t)},qF:function(t){this.k.Zx=t||s()},setMarkersSetCallback:function(t){this.k.UM=t||s()},setPolylinesSetCallback:function(t){this.k.HE=t||s()},setInfoHtmlSetCallback:function(t){this.k.TM=t||s()},setResultsHtmlSetCallback:function(t){this.k.WM=t||s()},um:t("Bd")});var Zc={nG:z.Fc,ab:function(t,e,i,n,o){var s=(1e5*Math.random()).toFixed(0);z._rd["_cbk"+s]=function(e){i=i||{},t&&t(e,i),delete z._rd["_cbk"+s]},n=n||"",e=i&&i.wO?Eb(e,encodeURI):Eb(e,encodeURIComponent),this.nG=i&&i.Fs?i.rN?i.rN:z.qp:z.Fc,n=this.nG+n+"?"+e+"&ie=utf-8&oue=1&fromproduct=jsapi",o||(n+="&res=api"),Pb(n+("&callback=BMap._rd._cbk"+s))}};window.k0=Zc,z._rd={};var P={};window.j0=P,P.nN=function(t){return t=t.replace(/<\/?[^>]*>/g,""),t=t.replace(/[ | ]* /g," ")},P.SY=function(t){return t.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;")},P.TY=function(t,e){return t.replace(RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+e+"}","ig"),"$1")};var $c=2,ad=3,cd=0,dd="bt",ed="nav",fd="walk",gd="bl",hd="bsl",id=14,jd=15,kd=18,ld=20,md=31;z.I=window.Instance=x.lang.Mc,x.extend(nd.prototype,{ta:function(){this.pa()},pa:function(){this.iV(),this.Ua.innerHTML=this.EV()},iV:function(){isNaN(parseInt(this.page))&&(this.page=1),isNaN(parseInt(this.Hd))&&(this.Hd=1),1>this.page&&(this.page=1),1>this.Hd&&(this.Hd=1),this.page>this.Hd&&(this.page=this.Hd),this.page=parseInt(this.page),this.Hd=parseInt(this.Hd)},o2:function(){location.search.match(RegExp("[?&]?"+this.JJ+"=([^&]*)[&$]?","gi")),this.page=RegExp.$1},EV:function(){var t=[],e=this.page-1,i=this.page+1;if(t.push('<p style="margin:0;padding:0;white-space:nowrap">'),!(1>e)){if(this.page>=this.Uf){var n;t.push('<span style="margin-right:3px"><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp1}">首页</a></span>'.replace("{temp1}","BMap.I('"+this.ca+"').toPage(1);"))}t.push('<span style="margin-right:3px"><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp2}">上一页</a></span>'.replace("{temp2}","BMap.I('"+this.ca+"').toPage("+e+");"))}if(this.page<this.Uf)n=0==this.page%this.Uf?this.page-this.Uf-1:this.page-this.page%this.Uf+1,e=n+this.Uf-1;else{n=Math.floor(this.Uf/2);var o=this.Uf%2-1,e=this.Hd>this.page+n?this.page+n:this.Hd;n=this.page-n-o}for(this.page>this.Hd-this.Uf&&this.page>=this.Uf&&(n=this.Hd-this.Uf+1,e=this.Hd),o=n;e>=o;o++)o>0&&(o==this.page?t.push('<span style="margin-right:3px">'+o+"</span>"):o>=1&&o<=this.Hd&&(n='<span><a style="color:#7777cc;margin-right:3px" href="javascript:void(0)" onclick="{temp3}">['+o+"]</a></span>",t.push(n.replace("{temp3}","BMap.I('"+this.ca+"').toPage("+o+");"))));return i>this.Hd||t.push('<span><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp4}">下一页</a></span>'.replace("{temp4}","BMap.I('"+this.ca+"').toPage("+i+");")),t.push("</p>"),t.join("")},toPage:function(t){t=t?t:1,"function"==typeof this.RJ&&(this.RJ(t),this.page=t),this.update&&this.ta()}}),x.sa(ab,V,"LocalSearch"),ab.aq=10,ab.h0=1,ab.Cn=100,ab.dG=2e3,ab.kG=1e5,x.extend(ab.prototype,{search:function(t,e){this.Oa.push({method:"search",arguments:[t,e]})},bn:function(t,e,i){this.Oa.push({method:"searchInBounds",arguments:[t,e,i]})},Gp:function(t,e,i,n){this.Oa.push({method:"searchNearby",arguments:[t,e,i,n]})},Me:function(){delete this.Ea,delete this.Bd,delete this.ja,delete this.ga,this.ib=-1,this.qb(),this.k.ka.Ga&&(this.k.ka.Ga.innerHTML="")},zm:s(),dD:function(){this.k.ka.It=o},HC:function(){this.k.ka.It=q},Kp:function(t){this.k.Fk="number"!=typeof t||isNaN(t)?ab.aq:1>t?ab.aq:t>ab.Cn?ab.aq:t},lf:function(){return this.k.Fk},toString:ca("LocalSearch")});var od=ab.prototype;S(od,{clearResults:od.Me,setPageCapacity:od.Kp,getPageCapacity:od.lf,gotoPage:od.zm,searchNearby:od.Gp,searchInBounds:od.bn,search:od.search,enableFirstResultSelection:od.dD,disableFirstResultSelection:od.HC}),x.sa(pd,V,"BaseRoute"),x.extend(pd.prototype,{Me:s()}),qd.Cn=100,qd.bP=[0,1,0,0,0,0,0,0,2,0,0,0,1,1,1],x.sa(qd,pd,"TransitRoute"),x.extend(qd.prototype,{Qt:function(t){this.k.ad=t>=0&&4>=t?t:0},zA:function(t,e){this.Oa.push({method:"_internalSearch",arguments:[t,e]})},search:function(t,e){this.Oa.push({method:"search",arguments:[t,e]})},Kp:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))?void(this.k.Fk=qd.Cn):void(this.k.Fk="number"!=typeof t?qd.Cn:t>=1&&t<=qd.Cn?Math.round(t):qd.Cn)},toString:ca("TransitRoute"),$T:function(t){return t.replace(/\(.*\)/,"")}});var rd=qd.prototype;S(rd,{_internalSearch:rd.zA}),sd.oP=" 环岛 无属性道路 主路 高速连接路 交叉点内路段 连接道路 停车场内部道路 服务区内部道路 桥 步行街 辅路 匝道 全封闭道路 未定义交通区域 POI连接路 隧道 步行道 公交专用道 提前右转道".split(" "),x.sa(sd,pd,"DWRoute"),x.extend(sd.prototype,{search:function(t,e,i){this.Oa.push({method:"search",arguments:[t,e,i]})}}),x.sa(td,sd,"DrivingRoute"),td.prototype.Qt=function(t){this.k.ad=t>=0&&2>=t?t:0},x.sa(ud,sd,"WalkingRoute"),x.lang.sa(vd,x.lang.Ba,"RouteAddr");var wd=navigator.userAgent;/ipad|iphone|ipod|iph/i.test(wd);var xd=/android/i.test(wd);x.extend(yd.prototype,{xN:function(t,e,i){var n=this;I.load("route",function(){n.Nd(t,e,i)})}}),x.sa(zd,x.lang.Ba,"Geocoder"),x.extend(zd.prototype,{tm:function(t,e,i){this.Oa.push({method:"getPoint",arguments:[t,e,i]})},Rs:function(t,e,i){this.Oa.push({method:"getLocation",arguments:[t,e,i]})},toString:ca("Geocoder")});var Ad=zd.prototype;S(Ad,{getPoint:Ad.tm,getLocation:Ad.Rs}),x.extend(Geolocation.prototype,{getCurrentPosition:function(t,e){this.ke.push({method:"getCurrentPosition",arguments:arguments})},getStatus:ca(2)}),x.sa(Bd,x.lang.Ba,"LocalCity"),x.extend(Bd.prototype,{get:function(t){this.Oa.push({method:"get",arguments:[t]})},toString:ca("LocalCity")}),x.sa(Ed,x.lang.Ba,"Boundary"),x.extend(Ed.prototype,{get:function(t,e){this.Oa.push({method:"get",arguments:[t,e]})},toString:ca("Boundary")}),Fd.mv=F.oa+"iw_plus.gif",Fd.qS=F.oa+"iw_minus.gif",Fd.jU=F.oa+"stop_icon.png",x.sa(Fd,V),x.extend(Fd.prototype,{getBusList:function(t){this.Oa.push({method:"getBusList",arguments:[t]})},getBusLine:function(t){this.Oa.push({method:"getBusLine",arguments:[t]})},setGetBusListCompleteCallback:function(t){this.k.SM=t||s()},setGetBusLineCompleteCallback:function(t){this.k.RM=t||s()},setBusListHtmlSetCallback:function(t){this.k.PM=t||s()},setBusLineHtmlSetCallback:function(t){this.k.OM=t||s()},setPolylinesSetCallback:function(t){this.k.HE=t||s()}}),x.sa(Gd,V,"Autocomplete"),x.extend(Gd.prototype,{Ri:s(),show:s(),U:s(),rF:function(t){this.nc.types=t},gn:function(t){this.zd.src=t},search:ba("cj"),uy:ba("PH")});var Ra,Id=4,Jd=1;x.lang.sa(Ma,x.lang.Ba,"Panorama"),x.extend(Ma.prototype,{FP:function(){var t=this,e=this.wf=K("div");e.className="pano_close",e.style.cssText="z-index: 1201;display: none",e.title="退出全景",e.onclick=function(){t.U()},this.B.appendChild(e);var i=this.sA=K("a");i.className="pano_pc_indoor_exit",i.style.cssText="z-index: 1201;display: none",i.innerHTML='<span style="float:right;margin-right:12px;">出口</span>',i.title="退出室内景",i.onclick=function(){t.Qo()},this.B.appendChild(i),window.ActiveXObject&&!document.addEventListener&&(e.style.backgroundColor="rgb(37,37,37)",i.style.backgroundColor="rgb(37,37,37)")},Qo:s(),sT:function(t){var e,i;e=t.style,i=Ta(t).position,"absolute"!=i&&"relative"!=i&&(e.position="relative",e.zIndex=0),"absolute"!==i&&"relative"!==i||(t=Ta(t).zIndex,t&&"auto"!==t||(e.zIndex=0))},XW:t("Zn"),Xb:t("Xa"),zX:t("Uv"),NN:t("Uv"),ha:t("Kb"),Da:t("Ca"),fa:t("Kc"),hh:t("dl"),q2:function(){return this.J0||[]},l2:t("OS"),Xs:t("Fe"),wy:function(t){t!==this.Fe&&(this.Fe=t,this.dispatchEvent(new M("onscene_type_changed")))},qc:function(t,e,i){"object"==typeof e&&(i=e,e=j),t!=this.Xa&&(this.ol=this.Xa,this.pl=this.Kb,this.Xa=t,this.Fe=e||"street",this.Kb=p,i&&i.pov&&this.Nc(i.pov))},ra:function(t){t.lb(this.Kb)||(this.ol=this.Xa,this.pl=this.Kb,this.Kb=t,this.Xa=p)},Nc:function(t){t&&(this.Ca=t,t=this.Ca.pitch,t>this.Wj?t=this.Wj:t<this.Yj&&(t=this.Yj),this.yr=o,this.Ca.pitch=t)},RZ:function(t,e){this.Yj=t>=0?0:t,this.Wj=0>=e?0:e},Oc:function(t){t!=this.Kc&&(t>Id&&(t=Id),Jd>t&&(t=Jd),t!=this.Kc&&(this.Kc=t),"cssRender"===this.dk&&this.Nc(this.Ca))},rB:function(){if(this.C)for(var t=this.C.qx(),e=0;e<t.length;e++)(t[e]instanceof T||t[e]instanceof qc)&&t[e].point&&this.ua.push(t[e])},nF:ba("C"),Pt:function(t){this.Jf=t||"none"},Lk:function(t){for(var e in t){if("object"==typeof t[e])for(var i in t[e])this.k[e][i]=t[e][i];else this.k[e]=t[e];switch(t.closeControl===o&&(this.k.forceCloseControl=o),t.closeControl===q&&(this.k.forceCloseControl=q),e){case"linksControl":this.dispatchEvent(new M("onlinks_visible_changed"));break;case"clickOnRoad":this.dispatchEvent(new M("onclickonroad_changed"));break;case"navigationControl":this.dispatchEvent(new M("onnavigation_visible_changed"));break;case"indoorSceneSwitchControl":this.dispatchEvent(new M("onindoor_default_switch_mode_changed"));break;case"albumsControl":this.dispatchEvent(new M("onalbums_visible_changed"));break;case"albumsControlOptions":this.dispatchEvent(new M("onalbums_options_changed"));break;case"copyrightControlOptions":this.dispatchEvent(new M("oncopyright_options_changed"));break;case"closeControl":this.dispatchEvent(new M("onclose_options_changed"));break;case"indoorExitControl":this.dispatchEvent(new M("onindoorexit_options_changed"));break;case"indoorFloorControl":this.dispatchEvent(new M("onindoorfloor_options_changed"))}}},Ak:function(){this.xl.style.visibility="hidden"},Ay:function(){this.xl.style.visibility="visible"},kW:function(){this.k.enableScrollWheelZoom=o},WV:function(){this.k.enableScrollWheelZoom=q},show:function(){this.k.visible=o},U:function(){this.k.visible=q},Yq:function(){return Sa()&&!G()&&"javascript"!=this.k.panoramaRenderer?"flashRender":!G()&&Lb()?"cvsRender":"cssRender"},Ja:function(t){this.Ee[t.jd]=t},Sb:function(t){delete this.Ee[t]},VD:function(){return this.k.visible},gh:function(){return new L(this.B.clientWidth,this.B.clientHeight)},Na:t("B"),XK:function(){var t=z.tg("baidumap","?"),e=this.Xb();if(e){var i,e={panotype:this.Xs(),heading:this.Da().heading,pitch:this.Da().pitch,pid:e,panoid:e,from:"api"};for(i in e)t+=i+"="+e[i]+"&"}return t.slice(0,-1)},Ax:function(){this.Lk({copyrightControlOptions:{logoVisible:q}})},uF:function(){this.Lk({copyrightControlOptions:{logoVisible:o}})},NB:function(t){function e(t,e){return function(){t.ur.push({AM:e,zM:arguments})}}for(var i=t.getPanoMethodList(),n="",o=0,s=i.length;s>o;o++)n=i[o],this[n]=e(this,n);this.Rg.push(t)},YE:function(t){for(var e=this.Rg.length;e--;)this.Rg[e]===t&&this.Rg.splice(e,1)},mF:s()});var Kd=Ma.prototype;S(Kd,{setId:Kd.qc,setPosition:Kd.ra,setPov:Kd.Nc,setZoom:Kd.Oc,setOptions:Kd.Lk,getId:Kd.Xb,getPosition:Kd.ha,getPov:Kd.Da,getZoom:Kd.fa,getLinks:Kd.XW,getBaiduMapUrl:Kd.XK,hideMapLogo:Kd.Ax,showMapLogo:Kd.uF,enableDoubleClickZoom:Kd.F1,disableDoubleClickZoom:Kd.u1,enableScrollWheelZoom:Kd.kW,disableScrollWheelZoom:Kd.WV,show:Kd.show,hide:Kd.U,addPlugin:Kd.NB,removePlugin:Kd.YE,getVisible:Kd.VD,addOverlay:Kd.Ja,removeOverlay:Kd.Sb,getSceneType:Kd.Xs,setPanoramaPOIType:Kd.Pt,exitInter:Kd.Qo,setInteractiveState:Kd.mF}),S(window,{BMAP_PANORAMA_POI_HOTEL:"hotel",BMAP_PANORAMA_POI_CATERING:"catering",BMAP_PANORAMA_POI_MOVIE:"movie",BMAP_PANORAMA_POI_TRANSIT:"transit",BMAP_PANORAMA_POI_INDOOR_SCENE:"indoor_scene",BMAP_PANORAMA_POI_NONE:"none",BMAP_PANORAMA_INDOOR_SCENE:"inter",BMAP_PANORAMA_STREET_SCENE:"street"}),x.lang.sa(Ld,x.lang.Ba,"PanoramaOverlayBase"),x.extend(Ld.prototype,{m2:t("jd"),pa:function(){aa("initialize方法未实现")},remove:function(){aa("remove方法未实现")},If:function(){aa("_setOverlayProperty方法未实现")}}),x.lang.sa(Md,Ld,"PanoramaLabel"),x.extend(Md.prototype,{R1:t("borderWidth"),getImageData:t("PX"),wm:t("AF"),f2:t("GL"),N1:t("backgroundColor"),O1:t("LJ"),P1:t("borderColor"),Q1:t("PJ"),c2:t("fontSize"),n2:t("padding"),g2:t("aE"),wb:t("size"),hx:t("re"),ra:function(t){this.Kb=t,this.If("position",t)},ha:t("Kb"),bd:function(t){this.Mj=t,this.If("content",t)},uk:t("Mj"),hF:function(t){this.rq=t,this.If("altitude",t)},To:t("rq"),Da:function(){var t=this.ha(),e=p,i=p;if(this.P&&(i=this.P.ha()),t&&i)if(t.lb(i))e=this.P.Da();else{e={},e.heading=Nd(t.lng-i.lng,t.lat-i.lat)||0;var t=e,i=this.To(),n=this.Un();t.pitch=Math.round(180*(Math.atan(i/n)/Math.PI))||0}return e},Un:function(){var t,e,i=0;return this.P&&(t=this.P.ha(),(e=this.ha())&&!e.lb(t)&&(i=R.Vo(t,e))),i},U:function(){aa("hide方法未实现")},show:function(){aa("show方法未实现")},If:s()});var Od=Md.prototype;S(Od,{setPosition:Od.ra,getPosition:Od.ha,setContent:Od.bd,getContent:Od.uk,setAltitude:Od.hF,getAltitude:Od.To,getPov:Od.Da,show:Od.show,hide:Od.U}),x.lang.sa(Pd,Ld,"PanoramaMarker"),x.extend(Pd.prototype,{ra:function(t){this.Kb=t,this.If("position",t)},ha:t("Kb"),Bc:function(t){this.dJ=t,this.If("title",t)},dp:t("dJ"),Tb:function(t){this.KH=icon,this.If("icon",t)},Wo:t("KH"),hF:function(t){this.rq=t,this.If("altitude",t)},To:t("rq"),MD:t("eT"),Da:function(){var t=p;if(this.P){var t=this.P.ha(),e=this.ha(),t=Nd(e.lng-t.lng,e.lat-t.lat);isNaN(t)&&(t=0),t={heading:t,pitch:0}}else t=this.Ca;return t},If:s()});var Qd=Pd.prototype;S(Qd,{setPosition:Qd.ra,getPosition:Qd.ha,setTitle:Qd.Bc,getTitle:Qd.dp,setAltitude:Qd.hF,getAltitude:Qd.To,getPanoInfo:Qd.MD,getIcon:Qd.Wo,setIcon:Qd.Tb,getPov:Qd.Da});var Rd;z.Sm(function(t){"flashRender"!==t.Yq()&&new ac(t,{Of:"api"})}),x.extend(ac.prototype,{ba:function(){function t(t){if(t){if(t.id!=e.Uv){e.NN(t.id),e.da=t,e.Xa!=p&&(e.pl=e._position);for(var i in t)if(t.hasOwnProperty(i))switch(e["_"+i]=t[i],i){case"position":e.Kb=t[i];break;case"id":e.Xa=t[i];break;case"links":e.Zn=t[i];break;case"zoom":e.Kc=t[i]}if(e.pl){var n=e.pl,o=e._position;i=n.lat;var s=o.lat,a=Mb(s-i),n=Mb(o.lng-n.lng);i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(Mb(i))*Math.cos(Mb(s))*Math.sin(n/2)*Math.sin(n/2),e.ZG=12742e3*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}i=new M("ondataload"),i.data=t,e.dispatchEvent(i),e.dispatchEvent(new M("onposition_changed")),e.dispatchEvent(new M("onlinks_changed")),e.dispatchEvent(new M("oncopyright_changed"),{copyright:t.copyright}),t.$l&&e.k.closeControl?x.D.show(e.mR):x.D.U(e.mR)}}else e.Xa=e.ol,e.Kb=e.pl,e.dispatchEvent(new M("onnoresult"))}var e=this.P,i=this;e.addEventListener("id_changed",function(){i.$o(e.Xb(),t)}),e.addEventListener("iid_changed",function(){i.Sg(ac.$k+"qt=idata&iid="+e.oA+"&fn=",function(e){if(e&&e.result&&0==e.result.error){var e=e.content[0].interinfo,n={};n.$l=e.BreakID;for(var o=e.Defaultfloor,s=p,a=0;a<e.Floors.length;a++)if(e.Floors[a].Floor==o){s=e.Floors[a];break}n.id=s.StartID||s.Points[0].PID,i.$o(n.id,t,n)}})}),e.addEventListener("position_changed_inner",function(){i.qj(e.ha(),t)})},$o:function(t,e){this.xd.getPanoramaById.push(arguments)},qj:function(t,e,i){this.xd.getPanoramaByLocation.push(arguments)},WD:function(t,e,i,n){this.xd.getVisiblePOIs.push(arguments)},ux:function(t,e){this.xd.getRecommendPanosById.push(arguments)},tx:function(t){this.xd.getPanoramaVersions.push(arguments)},aC:function(t,e){this.xd.checkPanoSupportByCityCode.push(arguments)},sx:function(t,e){this.xd.getPanoramaByPOIId.push(arguments)},cL:function(t){this.xd.getCopyrightProviders.push(arguments)}});var Sd=ac.prototype;S(Sd,{getPanoramaById:Sd.$o,getPanoramaByLocation:Sd.qj,getPanoramaByPOIId:Sd.sx}),$b.rG=z.tg("pano","tile/"),$b.prototype=new Dc,$b.prototype.getTilesUrl=function(t,e){var i=$b.rG[(t.x+t.y)%$b.rG.length]+"?udt=20150114&qt=tile&styles=pl&x="+t.x+"&y="+t.y+"&z="+e;return x.ea.la&&6>=x.ea.la&&(i+="&color_dep=32"),i},$b.prototype.lt=ca(o),Td.Rd=new R,x.extend(Td,{XV:function(t,e,i){i=x.lang.Mc(i),e={data:e},"position_changed"==t&&(e.data=Td.Rd.wi(new Q(e.data.mercatorX,e.data.mercatorY))),i.dispatchEvent(new M("on"+t),e)}});var Ud=Td;S(Ud,{dispatchFlashEvent:Ud.XV});var Vd={dP:50};Vd.Du=z.tg("pano")[0],Vd.zu={width:220,height:60},x.extend(Vd,{kp:function(t,e,i,n){if(e&&i&&i.lngLat&&i.panoInstance){this.fo===j&&(this.fo=new ac(p,{Of:"api"}));var o=this;this.fo.aC(e,function(e){e?o.fo.qj(i.lngLat,Vd.dP,function(e){if(e&&e.id){var s=e.id,a=e.vh,e=e.wh,r=ac.Rd.nh(i.lngLat),h=o.SR(r,{x:a,y:e}),a=o.mL(s,h,0,Vd.zu.width,Vd.zu.height);t.content=o.TR(t.content,a,i.titleTip,i.beforeDomId),t.addEventListener("open",function(){ja.K(x.Cc("infoWndPano"),"click",function(){i.panoInstance.qc(s),i.panoInstance.show(),i.panoInstance.Nc({heading:h,pitch:0})})})}n()}):n()})}else n()},TR:function(t,e,i,n){var o,i=i||"";n&&t.split(n)[0]?(n=t.split(n)[0],o=n.lastIndexOf("<"),n=t.substring(0,o),t=t.substring(o)):(n=t,t=""),o=[];var s=Vd.zu.width,a=Vd.zu.height;return o.push(n),o.push("<div id='infoWndPano' class='panoInfoBox' style='height:"+a+"px;width:"+s+"px; margin-top: -19px;'>"),o.push("<img class='pano_thumnail_img' width='"+s+"' height='"+a+"' border='0' alt='"+i+"外景' title='"+i+"外景' src='"+e+"' onerror='Pano.PanoEntranceUtil.thumbnailNotFound(this, "+s+", "+a+");' />"),o.push("<div class='panoInfoBoxTitleBg' style='width:"+s+"px;'></div><a href='javascript:void(0)' class='panoInfoBoxTitleContent' >进入全景&gt;&gt;</a>"),o.push("</div>"),o.push(t),o.join("")},SR:function(t,e){var i=90-180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI;return 0>i&&(i+=360),i},mL:function(t,e,i,n,o){var s={panoId:t,panoHeading:e||0,panoPitch:i||0,width:n,height:o};return(Vd.Du+"?qt=pr3d&fovy=75&quality=80&panoid={panoId}&heading={panoHeading}&pitch={panoPitch}&width={width}&height={height}").replace(/\{(.*?)\}/g,function(t,e){return s[e]})}});var Wd=document,Xd=Math,Yd=Wd.createElement("div").style,Zd;t:{for(var $d=["t","webkitT","MozT","msT","OT"],ae,be=0,ce=$d.length;ce>be;be++)if(ae=$d[be]+"ransform",ae in Yd){Zd=$d[be].substr(0,$d[be].length-1);break t}Zd=q}var de=Zd?"-"+Zd.toLowerCase()+"-":"",fe=ee("transform"),ge=ee("transitionProperty"),he=ee("transitionDuration"),ie=ee("transformOrigin"),je=ee("transitionTimingFunction"),ke=ee("transitionDelay"),xd=/android/gi.test(navigator.appVersion),ne=/iphone|ipad/gi.test(navigator.appVersion),oe=/hp-tablet/gi.test(navigator.appVersion),pe=ee("perspective")in Yd,qe="ontouchstart"in window&&!oe,re=Zd!==q,se=ee("transition")in Yd,te="onorientationchange"in window?"orientationchange":"resize",ue=qe?"touchstart":"mousedown",ve=qe?"touchmove":"mousemove",we=qe?"touchend":"mouseup",xe=qe?"touchcancel":"mouseup",ye=Zd===q?q:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[Zd],ze=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1)},Ae=window.cancelRequestAnimationFrame||window.q4||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,Be=pe?" translateZ(0)":"";Ce.prototype={enabled:o,x:0,y:0,Aj:[],scale:1,uC:0,vC:0,Qe:[],pf:[],SB:p,Oy:0,handleEvent:function(t){switch(t.type){case ue:if(!qe&&0!==t.button)break;this.Nv(t);break;case ve:this.QS(t);break;case we:case xe:this.$u(t);break;case te:this.kB();break;case"DOMMouseScroll":case"mousewheel":this.vU(t);break;case ye:this.rU(t);break;case"click":this.rQ(t)}},gQ:function(){!this.rh&&!this.Wk&&!(this.Vl||this.ty==this.Nb.offsetWidth*this.scale&&this.Fp==this.Nb.offsetHeight*this.scale)&&this.refresh()},Ev:function(t){var e;this[t+"Scrollbar"]?(this[t+"ScrollbarWrapper"]||(e=Wd.createElement("div"),this.options.eF?e.className=this.options.eF+t.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==t?"height:7px;bottom:1px;left:2px;right:"+(this.Ci?"7":"2")+"px":"width:7px;bottom:"+(this.mi?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+de+"transition-property:opacity;"+de+"transition-duration:"+(this.options.qW?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.Bx?"0":"1"),this.xn.appendChild(e),this[t+"ScrollbarWrapper"]=e,e=Wd.createElement("div"),this.options.eF||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+de+"background-clip:padding-box;"+de+"box-sizing:border-box;"+("h"==t?"height:100%":"width:100%")+";"+de+"border-radius:3px;border-radius:3px"),
e.style.cssText+=";pointer-events:none;"+de+"transition-property:"+de+"transform;"+de+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+de+"transition-duration:0;"+de+"transform: translate(0,0)"+Be,this.options.Bi&&(e.style.cssText+=";"+de+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[t+"ScrollbarWrapper"].appendChild(e),this[t+"ScrollbarIndicator"]=e),"h"==t?(this.AL=this.BL.clientWidth,this.IX=Xd.max(Xd.round(this.AL*this.AL/this.ty),8),this.HX.style.width=this.IX+"px"):(this.AO=this.BO.clientHeight,this.P_=Xd.max(Xd.round(this.AO*this.AO/this.Fp),8),this.O_.style.height=this.P_+"px"),this.lB(t,o)):this[t+"ScrollbarWrapper"]&&(re&&(this[t+"ScrollbarIndicator"].style[fe]=""),this[t+"ScrollbarWrapper"].parentNode.removeChild(this[t+"ScrollbarWrapper"]),this[t+"ScrollbarWrapper"]=p,this[t+"ScrollbarIndicator"]=p)},kB:function(){var t=this;setTimeout(function(){t.refresh()},xd?200:0)},xr:function(t,e){this.Wk||(t=this.hp?t:0,e=this.vn?e:0,this.options.Uk?this.Nb.style[fe]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+Be:(t=Xd.round(t),e=Xd.round(e),this.Nb.style.left=t+"px",this.Nb.style.top=e+"px"),this.x=t,this.y=e,this.lB("h"),this.lB("v"))},lB:function(t,e){var i="h"==t?this.x:this.y;this[t+"Scrollbar"]&&(i*=this[t+"ScrollbarProp"],0>i?(this.options.nD||(i=this[t+"ScrollbarIndicatorSize"]+Xd.round(3*i),8>i&&(i=8),this[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px"),i=0):i>this[t+"ScrollbarMaxScroll"]&&(this.options.nD?i=this[t+"ScrollbarMaxScroll"]:(i=this[t+"ScrollbarIndicatorSize"]-Xd.round(3*(i-this[t+"ScrollbarMaxScroll"])),8>i&&(i=8),this[t+"ScrollbarIndicator"].style["h"==t?"width":"height"]=i+"px",i=this[t+"ScrollbarMaxScroll"]+(this[t+"ScrollbarIndicatorSize"]-i))),this[t+"ScrollbarWrapper"].style[ke]="0",this[t+"ScrollbarWrapper"].style.opacity=e&&this.options.Bx?"0":"1",this[t+"ScrollbarIndicator"].style[fe]="translate("+("h"==t?i+"px,0)":"0,"+i+"px)")+Be)},rQ:function(t){if(t.nR===o)return this.KB=t.target,this.Zw=Date.now(),o;if(this.KB&&this.Zw){if(600<Date.now()-this.Zw)return this.Zw=this.KB=p,o}else{for(var e=t.target;e!=this.Nb&&e!=document.body;)e=e.parentNode;if(e==document.body)return o}for(e=t.target;1!=e.nodeType;)e=e.parentNode;return e=e.tagName.toLowerCase(),"select"!=e&&"input"!=e&&"textarea"!=e?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.bZ=o,t.stopPropagation(),t.preventDefault(),this.Zw=this.KB=p,q):void 0},Nv:function(t){var e,i,n=qe?t.touches[0]:t;this.enabled&&(this.options.NM&&this.options.NM.call(this,t),(this.options.Bi||this.options.zoom)&&this.eJ(0),this.Wk=this.Vl=this.rh=q,this.EC=this.DC=this.fw=this.ew=this.KC=this.JC=0,this.options.zoom&&qe&&1<t.touches.length&&(i=Xd.abs(t.touches[0].pageX-t.touches[1].pageX),e=Xd.abs(t.touches[0].pageY-t.touches[1].pageY),this.w_=Xd.sqrt(i*i+e*e),this.$x=Xd.abs(t.touches[0].pageX+t.touches[1].pageX-2*this.NF)/2-this.x,this.ay=Xd.abs(t.touches[0].pageY+t.touches[1].pageY-2*this.OF)/2-this.y,this.options.vp&&this.options.vp.call(this,t)),this.options.Sx&&(this.options.Uk?(e=getComputedStyle(this.Nb,p)[fe].replace(/[^0-9\-.,]/g,"").split(","),i=+(e[12]||e[4]),e=+(e[13]||e[5])):(i=+getComputedStyle(this.Nb,p).left.replace(/[^0-9-]/g,""),e=+getComputedStyle(this.Nb,p).top.replace(/[^0-9-]/g,"")),i!=this.x||e!=this.y)&&(this.options.Bi?this.Ud(ye):Ae(this.SB),this.Aj=[],this.xr(i,e),this.options.Yx&&this.options.Yx.call(this)),this.gw=this.x,this.hw=this.y,this.au=this.x,this.bu=this.y,this.vh=n.pageX,this.wh=n.pageY,this.startTime=t.timeStamp||Date.now(),this.options.YM&&this.options.YM.call(this,t),this.ba(ve,window),this.ba(we,window),this.ba(xe,window))},QS:function(t){var e=qe?t.touches[0]:t,i=e.pageX-this.vh,n=e.pageY-this.wh,s=this.x+i,a=this.y+n,r=t.timeStamp||Date.now();this.options.MM&&this.options.MM.call(this,t),this.options.zoom&&qe&&1<t.touches.length?(s=Xd.abs(t.touches[0].pageX-t.touches[1].pageX),a=Xd.abs(t.touches[0].pageY-t.touches[1].pageY),this.v_=Xd.sqrt(s*s+a*a),this.Wk=o,e=1/this.w_*this.v_*this.scale,e<this.options.Vk?e=.5*this.options.Vk*Math.pow(2,e/this.options.Vk):e>this.options.Xp&&(e=2*this.options.Xp*Math.pow(.5,this.options.Xp/e)),this.op=e/this.scale,s=this.$x-this.$x*this.op+this.x,a=this.ay-this.ay*this.op+this.y,this.Nb.style[fe]="translate("+s+"px,"+a+"px) scale("+e+")"+Be,this.options.$M&&this.options.$M.call(this,t)):(this.vh=e.pageX,this.wh=e.pageY,(s>0||s<this.ee)&&(s=this.options.Bo?this.x+i/2:s>=0||0<=this.ee?0:this.ee),(a>this.nf||a<this.od)&&(a=this.options.Bo?this.y+n/2:a>=this.nf||0<=this.od?this.nf:this.od),this.JC+=i,this.KC+=n,this.ew=Xd.abs(this.JC),this.fw=Xd.abs(this.KC),6>this.ew&&6>this.fw||(this.options.xE&&(this.ew>this.fw+5?(a=this.y,n=0):this.fw>this.ew+5&&(s=this.x,i=0)),this.rh=o,this.xr(s,a),this.DC=i>0?-1:0>i?1:0,this.EC=n>0?-1:0>n?1:0,300<r-this.startTime&&(this.startTime=r,this.au=this.x,this.bu=this.y),this.options.XM&&this.options.XM.call(this,t)))},$u:function(t){if(!qe||0===t.touches.length){var e,i,n=this,s=qe?t.changedTouches[0]:t,a={Aa:0,time:0},r={Aa:0,time:0},h=(t.timeStamp||Date.now())-n.startTime;if(e=n.x,i=n.y,n.Ud(ve,window),n.Ud(we,window),n.Ud(xe,window),n.options.LM&&n.options.LM.call(n,t),n.Wk)e=n.scale*n.op,e=Math.max(n.options.Vk,e),e=Math.min(n.options.Xp,e),n.op=e/n.scale,n.scale=e,n.x=n.$x-n.$x*n.op+n.x,n.y=n.ay-n.ay*n.op+n.y,n.Nb.style[he]="200ms",n.Nb.style[fe]="translate("+n.x+"px,"+n.y+"px) scale("+n.scale+")"+Be,n.Wk=q,n.refresh(),n.options.up&&n.options.up.call(n,t);else{if(n.rh)300>h&&n.options.Sx&&(a=e?n.bI(e-n.au,h,-n.x,n.ty-n.ru+n.x,n.options.Bo?n.ru:0):a,r=i?n.bI(i-n.bu,h,-n.y,0>n.od?n.Fp-n.yn+n.y-n.nf:0,n.options.Bo?n.yn:0):r,e=n.x+a.Aa,i=n.y+r.Aa,(0<n.x&&e>0||n.x<n.ee&&e<n.ee)&&(a={Aa:0,time:0}),(n.y>n.nf&&i>n.nf||n.y<n.od&&i<n.od)&&(r={Aa:0,time:0})),a.Aa||r.Aa?(s=Xd.max(Xd.max(a.time,r.time),10),n.options.Yt&&(a=e-n.gw,r=i-n.hw,Xd.abs(a)<n.options.Dy&&Xd.abs(r)<n.options.Dy?n.scrollTo(n.gw,n.hw,200):(a=n.WI(e,i),e=a.x,i=a.y,s=Xd.max(a.time,s))),n.scrollTo(Xd.round(e),Xd.round(i),s)):n.options.Yt?(a=e-n.gw,r=i-n.hw,Xd.abs(a)<n.options.Dy&&Xd.abs(r)<n.options.Dy?n.scrollTo(n.gw,n.hw,200):(a=n.WI(n.x,n.y),(a.x!=n.x||a.y!=n.y)&&n.scrollTo(a.x,a.y,a.time))):n.io(200);else{if(qe)if(n.wK&&n.options.zoom)clearTimeout(n.wK),n.wK=p,n.options.vp&&n.options.vp.call(n,t),n.zoom(n.vh,n.wh,1==n.scale?n.options.ZV:1),n.options.up&&setTimeout(function(){n.options.up.call(n,t)},200);else if(this.options.xx){for(e=s.target;1!=e.nodeType;)e=e.parentNode;i=e.tagName.toLowerCase(),"select"!=i&&"input"!=i&&"textarea"!=i?(i=Wd.createEvent("MouseEvents"),i.initMouseEvent("click",o,o,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,p),i.nR=o,e.dispatchEvent(i)):e.focus()}n.io(400)}n.options.ZM&&n.options.ZM.call(n,t)}}},io:function(t){var e=0<=this.x?0:this.x<this.ee?this.ee:this.x,i=this.y>=this.nf||0<this.od?this.nf:this.y<this.od?this.od:this.y;e==this.x&&i==this.y?(this.rh&&(this.rh=q,this.options.Yx&&this.options.Yx.call(this)),this.mi&&this.options.Bx&&("webkit"==Zd&&(this.BL.style[ke]="300ms"),this.BL.style.opacity="0"),this.Ci&&this.options.Bx&&("webkit"==Zd&&(this.BO.style[ke]="300ms"),this.BO.style.opacity="0")):this.scrollTo(e,i,t||0)},vU:function(t){var e,i,n=this;if("wheelDeltaX"in t)e=t.wheelDeltaX/12,i=t.wheelDeltaY/12;else if("wheelDelta"in t)e=i=t.wheelDelta/12;else{if(!("detail"in t))return;e=i=3*-t.detail}"zoom"==n.options.JO?(i=n.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),i<n.options.Vk&&(i=n.options.Vk),i>n.options.Xp&&(i=n.options.Xp),i!=n.scale&&(!n.Oy&&n.options.vp&&n.options.vp.call(n,t),n.Oy++,n.zoom(t.pageX,t.pageY,i,400),setTimeout(function(){n.Oy--,!n.Oy&&n.options.up&&n.options.up.call(n,t)},400))):(e=n.x+e,i=n.y+i,e>0?e=0:e<n.ee&&(e=n.ee),i>n.nf?i=n.nf:i<n.od&&(i=n.od),0>n.od&&n.scrollTo(e,i,0))},rU:function(t){t.target==this.Nb&&(this.Ud(ye),this.xB())},xB:function(){var t,e,i,n=this,s=n.x,a=n.y,r=Date.now();n.Vl||(n.Aj.length?(t=n.Aj.shift(),t.x==s&&t.y==a&&(t.time=0),n.Vl=o,n.rh=o,n.options.Bi?(n.eJ(t.time),n.xr(t.x,t.y),n.Vl=q,t.time?n.ba(ye):n.io(0)):(i=function(){var o,h=Date.now();h>=r+t.time?(n.xr(t.x,t.y),n.Vl=q,n.options.JY&&n.options.JY.call(n),n.xB()):(h=(h-r)/t.time-1,e=Xd.sqrt(1-h*h),h=(t.x-s)*e+s,o=(t.y-a)*e+a,n.xr(h,o),n.Vl&&(n.SB=ze(i)))})()):n.io(400))},eJ:function(t){t+="ms",this.Nb.style[he]=t,this.mi&&(this.HX.style[he]=t),this.Ci&&(this.O_.style[he]=t)},bI:function(t,e,i,n,o){var e=Xd.abs(t)/e,s=e*e/.0012;return t>0&&s>i?(i+=o/(6/(6e-4*(s/e))),e=e*i/s,s=i):0>t&&s>n&&(n+=o/(6/(6e-4*(s/e))),e=e*n/s,s=n),{Aa:s*(0>t?-1:1),time:Xd.round(e/6e-4)}},$j:function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return t!=this.xn&&(e*=this.scale,i*=this.scale),{left:e,top:i}},WI:function(t,e){var i,n,o;for(o=this.Qe.length-1,i=0,n=this.Qe.length;n>i;i++)if(t>=this.Qe[i]){o=i;break}for(o==this.uC&&o>0&&0>this.DC&&o--,t=this.Qe[o],n=(n=Xd.abs(t-this.Qe[this.uC]))?500*(Xd.abs(this.x-t)/n):0,this.uC=o,o=this.pf.length-1,i=0;o>i;i++)if(e>=this.pf[i]){o=i;break}return o==this.vC&&o>0&&0>this.EC&&o--,e=this.pf[o],i=(i=Xd.abs(e-this.pf[this.vC]))?500*(Xd.abs(this.y-e)/i):0,this.vC=o,o=Xd.round(Xd.max(n,i))||200,{x:t,y:e,time:o}},ba:function(t,e,i){(e||this.Nb).addEventListener(t,this,!!i)},Ud:function(t,e,i){(e||this.Nb).removeEventListener(t,this,!!i)},AC:ha(2),refresh:function(){var t,e,i,n=0;if(e=0,this.scale<this.options.Vk&&(this.scale=this.options.Vk),this.ru=this.xn.clientWidth||1,this.yn=this.xn.clientHeight||1,this.nf=-this.options.u_||0,this.ty=Xd.round(this.Nb.offsetWidth*this.scale),this.Fp=Xd.round((this.Nb.offsetHeight+this.nf)*this.scale),this.ee=this.ru-this.ty,this.od=this.yn-this.Fp+this.nf,this.EC=this.DC=0,this.options.VM&&this.options.VM.call(this),this.hp=this.options.hp&&0>this.ee,this.vn=this.options.vn&&(!this.options.$U&&!this.hp||this.Fp>this.yn),this.mi=this.hp&&this.options.mi,this.Ci=this.vn&&this.options.Ci&&this.Fp>this.yn,t=this.$j(this.xn),this.NF=-t.left,this.OF=-t.top,"string"==typeof this.options.Yt)for(this.Qe=[],this.pf=[],i=this.Nb.querySelectorAll(this.options.Yt),t=0,e=i.length;e>t;t++)n=this.$j(i[t]),n.left+=this.NF,n.top+=this.OF,this.Qe[t]=n.left<this.ee?this.ee:n.left*this.scale,this.pf[t]=n.top<this.od?this.od:n.top*this.scale;else if(this.options.Yt){for(this.Qe=[];n>=this.ee;)this.Qe[e]=n,n-=this.ru,e++;for(this.ee%this.ru&&(this.Qe[this.Qe.length]=this.ee-this.Qe[this.Qe.length-1]+this.Qe[this.Qe.length-1]),e=n=0,this.pf=[];n>=this.od;)this.pf[e]=n,n-=this.yn,e++;this.od%this.yn&&(this.pf[this.pf.length]=this.od-this.pf[this.pf.length-1]+this.pf[this.pf.length-1])}this.Ev("h"),this.Ev("v"),this.Wk||(this.Nb.style[he]="0",this.io(400))},scrollTo:function(t,e,i,n){var o=t;for(this.stop(),o.length||(o=[{x:t,y:e,time:i,cZ:n}]),t=0,e=o.length;e>t;t++)o[t].cZ&&(o[t].x=this.x-o[t].x,o[t].y=this.y-o[t].y),this.Aj.push({x:o[t].x,y:o[t].y,time:o[t].time||0});this.xB()},disable:function(){this.stop(),this.io(0),this.enabled=q,this.Ud(ve,window),this.Ud(we,window),this.Ud(xe,window)},enable:function(){this.enabled=o},stop:function(){this.options.Bi?this.Ud(ye):Ae(this.SB),this.Aj=[],this.Vl=this.rh=q},zoom:function(t,e,i,n){var s=i/this.scale;this.options.Uk&&(this.Wk=o,n=n===j?200:n,t=t-this.NF-this.x,e=e-this.OF-this.y,this.x=t-t*s+this.x,this.y=e-e*s+this.y,this.scale=i,this.refresh(),this.x=0<this.x?0:this.x<this.ee?this.ee:this.x,this.y=this.y>this.nf?this.nf:this.y<this.od?this.od:this.y,this.Nb.style[he]=n+"ms",this.Nb.style[fe]="translate("+this.x+"px,"+this.y+"px) scale("+i+")"+Be,this.Wk=q)}},Yd=p;var Fe=[0,1,2,2,2,2,2,2,2,3,3,3,3,4,5,5,5,6,6,7,8,8,8,9,10],Ge="其他 正门 房型 设施 正门 餐饮设施 其他设施 正门 设施 观影厅 其他设施".split(" ");z.Sm(function(t){var e=p;t.addEventListener("position_changed",function(){t.k.visible&&t.k.albumsControl===o&&(e?e.ly(t.Xb()):(e=new De(t.k.albumsControlOptions),e.pa(t)))}),t.addEventListener("albums_visible_changed",function(){t.k.albumsControl===o?(e?e.ly(t.Xb()):(e=new De(t.k.albumsControlOptions),e.pa(t)),e.show()):e.U()}),t.addEventListener("albums_options_changed",function(){e&&e.Lk(t.k.albumsControlOptions)}),t.addEventListener("visible_changed",function(){e&&(t.VD()?t.k.albumsControl===o&&(e.B.style.visibility="visible"):e.B.style.visibility="hidden")})});var Ee=1.8;G()&&(Ee=1),x.extend(De.prototype,{Lk:function(t){for(var e in t)this.k[e]=t[e];t=this.k.imageHeight+"px",this.pc(this.k.anchor),this.B.style.width=isNaN(Number(this.k.maxWidth))===o?this.k.maxWidth:this.k.maxWidth+"px",this.B.style.height=t,this.gk.style.height=t,this.Wh.style.height=t,this.eg={height:this.k.imageHeight,width:this.k.imageHeight*Ee},this.fk.style.height=this.eg.height-6+"px",this.fk.style.width=this.eg.width-6+"px",this.ly(this.P.Xb(),o)},pa:function(t){this.P=t,this.ds(),this.QP(),this.VX(),this.ly(t.Xb())},ds:function(){var t=this.k.imageHeight+"px";this.B=K("div");var e=this.B.style;e.cssText="background:rgb(37,37,37);background:rgba(37,37,37,0.9);",e.position="absolute",e.zIndex="2000",e.width=isNaN(Number(this.k.maxWidth))===o?this.k.maxWidth:this.k.maxWidth+"px",e.padding="8px 0",e.visibility="hidden",e.height=t,this.gk=K("div"),e=this.gk.style,e.position="absolute",e.overflow="hidden",e.width="100%",e.height=t,this.Wh=K("div"),e=this.Wh.style,e.height=t,this.gk.appendChild(this.Wh),this.B.appendChild(this.gk),this.P.B.appendChild(this.B),this.fk=K("div",{"class":"pano_photo_item_seleted"}),this.fk.style.height=this.eg.height-6+"px",this.fk.style.width=this.eg.width-6+"px",this.pc(this.k.anchor)},vH:function(t){for(var e=this.bk,i=e.length-1;i>=0;i--)if(e[i].panoId==t)return i;return-1},ly:function(t,e){if(e||!this.bk[this.Yc]||this.bk[this.Yc].panoId!=t||3===this.bk[this.Yc].recoType){var i=this,n=this.vH(t);!e&&-1!==n&&this.bk[n]&&3!==this.bk[n].recoType?this.Jp(n):this.lX(function(t){for(var e,n,s={},a=q,r=[],h=0,c=t.length;c>h;h++)e=t[h].catlog,n=t[h].floor,j!==e&&(""===e&&j!==n?(a=o,s[n]||(s[n]=[]),s[n].push(t[h])):(s[Fe[e]]||(s[Fe[e]]=[]),s[Fe[e]].push(t[h])));for(var l in s)a?r.push({data:l+"F",index:l}):r.push({data:Ge[l],index:l});i.NG=s,i.Pi=r,i.Dl(t),0==t.length?i.U():i.show()})}},FV:function(){if(!this.Mi){var t=this.$W(this.Pi),e=K("div");e.style.cssText=["width:"+134*this.Pi.length+"px;","overflow:hidden;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;"].join(""),e.innerHTML=t,t=K("div"),t.appendChild(e),t.style.cssText="position:absolute;top:-25px;background:rgb(37,37,37);background:rgba(37,37,37,0.9);border-bottom:1px solid #4e596a;width:100%;line-height:25px;height:25px;overflow:scroll;outline:0",new Ce(t,{Bo:q,Sx:o,mi:q,Ci:q,vn:q,xE:o,Aw:o,xx:o}),this.B.appendChild(t);for(var i=this,n=e.getElementsByTagName("span"),s=0,a=n.length;a>s;s++)e=n[s],x.K(e,"click",function(){if(this.getAttribute("dataindex")){i.Dl(i.NG[this.getAttribute("dataindex")]);for(var t=0,e=n.length;e>t;t++)n[t].style.color="#FFFFFF";this.style.color="#3383FF"}});this.Mi=t}},CV:function(){if(this.Mi)t=this.aL(this.Pi),this.fQ.innerHTML=t;else{var t=this.aL(this.Pi),e=K("ul"),i=this;e.style.cssText="list-style: none;padding:0px;margin:0px;display:block;width:60px;position:absolute;top:7px",e.innerHTML=t,x.K(e,"click",function(t){if(t=(t.srcElement||t.target).getAttribute("dataindex")){i.Dl(i.NG[t]);for(var n=e.getElementsByTagName("li"),o=0,s=n.length;s>o;o++)n[o].childNodes[0].getAttribute("dataindex")===t?x.D.Ta(n[o],"pano_catlogLiActive"):x.D.Rb(n[o],"pano_catlogLiActive")}});var t=K("div"),n=K("a"),o=K("span"),s=K("a"),a=K("span"),r=["background:url("+F.oa+"panorama/catlog_icon.png) no-repeat;","display:block;width:10px;height:7px;margin:0 auto;"].join("");o.style.cssText=r+"background-position:-18px 0;",n.style.cssText="background:#1C1C1C;display:block;position:absolute;width:58px;",a.style.cssText=r+"background-position:0 0;",s.style.cssText="background:#1C1C1C;display:block;position:absolute;width:58px;",s.style.top=this.k.imageHeight-7+"px",t.style.cssText="position:absolute;top:0px;left:0px;width:60px;",n.appendChild(o),s.appendChild(a),x.K(n,"mouseover",function(){var t=parseInt(e.style.top,10);7!==t&&(o.style.backgroundPosition="-27px 0"),new rb({Gc:60,hc:sb.Cs,duration:300,ta:function(i){e.style.top=t+(7-t)*i+"px"}})}),x.K(n,"mouseout",function(){o.style.backgroundPosition="-18px 0"}),x.K(s,"mouseover",function(){var t=parseInt(e.style.top,10),n=i.k.imageHeight-14;if(!(parseInt(e.offsetHeight,10)<n)){var o=n-parseInt(e.offsetHeight,10)+7;o!==t&&(a.style.backgroundPosition="-9px 0"),new rb({Gc:60,hc:sb.Cs,duration:300,ta:function(i){e.style.top=t+(o-t)*i+"px"}})}}),x.K(s,"mouseout",function(){a.style.backgroundPosition="0 0"}),t.appendChild(n),t.appendChild(s),n=K("div"),n.style.cssText=["position:absolute;z-index:2001;left:20px;","height:"+this.k.imageHeight+"px;","width:62px;overflow:hidden;background:rgb(37,37,37);background:rgba(37,37,37,0.9);"].join(""),n.appendChild(e),n.appendChild(t),this.Mi=n,this.fQ=e,this.B.appendChild(n)}},DV:function(){if(this.Pi&&!(0>=this.Pi.length)){var t=K("div");t.innerHTML=this.Vz,t.style.cssText="position:absolute;background:#252525",this.B.appendChild(t),this.Gs=t,this.Pc.fg.style.left=this.eg.width+8+"px",this.Mi&&(this.Mi.style.left=parseInt(this.Mi.style.left,10)+this.eg.width+8+"px");var e=this;x.K(t,"click",function(){e.P.qc(e.nW)})}},Dl:function(t){this.bk=t,this.k.showCatalog&&(0<this.Pi.length?(Sa()?this.CV():this.FV(),this.Pc.offsetLeft=60):(this.Gs&&(this.B.removeChild(this.Gs),this.Gs=p,this.Pc.fg.style.left="0px"),this.Mi&&(this.B.removeChild(this.Mi),this.Mi=p),this.Pc.offsetLeft=0));var e=this.UW(t);Sa()&&this.Pi&&0<this.Pi.length&&this.k.showExit&&this.Vz&&(this.Pc.offsetLeft+=this.eg.width+8,this.Gs?this.Gs.innerHTML=this.Vz:this.DV()),this.Wh.innerHTML=e,this.Wh.style.width=(this.eg.width+8)*t.length+8+"px",t=this.B.offsetWidth,e=this.Wh.offsetWidth,this.Pc.Ns&&(e+=this.Pc.Ns()),e<t-2*this.Pc.Gi-this.Pc.offsetLeft?this.B.style.width=e+this.Pc.offsetLeft+"px":(this.B.style.width=isNaN(Number(this.k.maxWidth))===o?this.k.maxWidth:this.k.maxWidth+"px",e<this.B.offsetWidth-2*this.Pc.Gi-this.Pc.offsetLeft&&(this.B.style.width=e+this.Pc.offsetLeft+"px")),this.Pc.refresh(),this.mB=this.Wh.children,this.Wh.appendChild(this.fk),this.fk.style.left="-100000px",t=this.vH(this.P.Xb(),this.N0),-1!==t&&this.Jp(t)},$W:function(t){for(var e,i="",n=0,o=t.length;o>n;n++)e='<div style="color:white;opacity:0.5;margin:0 35px;float:left;text-align: center"><span  dataIndex="'+t[n].index+'">'+t[n].data+"</span></div>",i+=e;return i},aL:function(t){for(var e,i="",n=0,o=t.length;o>n;n++)e='<li class="pano_catlogLi"><span style="display:block;width:100%;" dataIndex="'+t[n].index+'">'+t[n].data+"</span></li>",i+=e;return i},UW:function(t){for(var e,i,n,o,s=[],a=this.eg.height,r=this.eg.width,h=0;h<t.length;h++)e=t[h],recoType=e.recoType,n=e.panoId,o=e.name,i=e.heading,e=e.pitch,i=Vd.mL(n,i,e,198,108),e='<a href="javascript:void(0);" class="pano_photo_item" data-index="'+h+'"><img style="width:'+(r-2)+"px;height:"+(a-2)+'px;" data-index="'+h+'" name="'+o+'" src="'+i+'" alt="'+o+'"/><span class="pano_photo_decs" data-index="'+h+'" style="width:'+r+"px;font-size:"+Math.floor(a/6)+"px; line-height:"+Math.floor(a/6)+'px;"><em class="pano_poi_'+recoType+'"></em>'+o+"</span></a>",3===recoType?Sa()?(this.Vz=e,this.nW=n,t.splice(h,1),h--):(e='<a href="javascript:void(0);" class="pano_photo_item" data-index="'+h+'"><img style="width:'+(r-2)+"px;height:"+(a-2)+'px;" data-index="'+h+'" name="'+o+'" src="'+i+'" alt="'+o+'"/><div style="background:rgba(37,37,37,0.5);position:absolute;top:0px;left:0px;width:100%;height:100%;text-align: center;line-height:'+this.k.imageHeight+'px;" data-index="'+h+'"><img src="'+F.oa+'panorama/photoexit.png" style="border:none;vertical-align:middle;" data-index="'+h+'" alt=""/></div></a>',s.push(e)):s.push(e);return s.join("")},lX:function(t){var e=this,i=this.P.Xb();i&&this.Hl.ux(i,function(n){e.P.Xb()===i&&t(n)})},pc:function(t){(!Ua(t)||isNaN(t)||Sb>t||t>3)&&(t=this.defaultAnchor);var e=this.B,i=this.k.offset.width,n=this.k.offset.height;switch(e.style.left=e.style.top=e.style.right=e.style.bottom="auto",t){case Sb:e.style.top=n+"px",e.style.left=i+"px";break;case Tb:e.style.top=n+"px",e.style.right=i+"px";break;case Ub:e.style.bottom=n+"px",e.style.left=i+"px";break;case 3:e.style.bottom=n+"px",e.style.right=i+"px"}},QP:function(){this.OP()},OP:function(){var t=this;x.K(this.B,"touchstart",function(t){t.stopPropagation()}),x.K(this.gk,"click",function(e){(e=(e.srcElement||e.target).getAttribute("data-index"))&&e!=t.Yc&&(t.Jp(e),t.P.qc(t.bk[e].panoId))}),x.K(this.Wh,"mouseover",function(e){e=(e.srcElement||e.target).getAttribute("data-index"),e!==p&&t.cK(e,o)}),this.P.addEventListener("size_changed",function(){isNaN(Number(t.k.maxWidth))&&t.Lk({maxWidth:t.k.maxWidth})})},Jp:function(t){this.fk.style.left=this.mB[t].offsetLeft+8+"px",this.fk.setAttribute("data-index",this.mB[t].getAttribute("data-index")),this.Yc=t,this.cK(t)},cK:function(t,e){var i=this.eg.width+8,n=0;this.Pc.Ns&&(n=this.Pc.Ns()/2);var o=this.gk.offsetWidth-2*n,s=this.Wh.offsetLeft||this.Pc.x,s=s-n,a=-t*i;a>s&&this.Pc.scrollTo(a+n),i=a-i,s-=o,s>i&&(!e||e&&a-s>8)&&this.Pc.scrollTo(i+o+n)},VX:function(){this.Pc=G()?new Ce(this.gk,{Bo:q,Sx:o,mi:q,Ci:q,vn:q,xE:o,Aw:o,xx:o}):new He(this.gk)},U:function(){this.B.style.visibility="hidden"},show:function(){this.B.style.visibility="visible"}}),He.prototype={pa:function(){this.Ug.style.position="relative",this.refresh(),this.ds(),this.Yl()},refresh:function(){this.co=this.B.offsetWidth-this.Ns(),this.MA=-(this.Ug.offsetWidth-this.co-this.Gi),this.rv=this.Gi+this.offsetLeft,this.Ug.style.left=this.rv+"px",this.Ug.children[0]&&(this.Lr=this.Ug.children[0].offsetWidth),this.fg&&(this.fg.children[0].style.marginTop=this.Dr.children[0].style.marginTop=this.fg.offsetHeight/2-this.fg.children[0].offsetHeight/2+"px")},Ns:function(){return 2*this.Gi},ds:function(){this.Fv=K("div"),this.Fv.innerHTML='<a class="pano_photo_arrow_l" style="background:rgb(37,37,37);background:rgba(37,37,37,0.9);" href="javascript:void(0)" title="上一页"><span class="pano_arrow_l"></span></a><a class="pano_photo_arrow_r" style="background:rgb(37,37,37);background:rgba(37,37,37,0.9);" href="javascript:void(0)" title="下一页"><span class="pano_arrow_r"></span></a>',this.fg=this.Fv.children[0],this.Dr=this.Fv.children[1],this.B.appendChild(this.Fv),this.fg.children[0].style.marginTop=this.Dr.children[0].style.marginTop=this.fg.offsetHeight/2-this.fg.children[0].offsetHeight/2+"px"},Yl:function(){var t=this;x.K(this.fg,"click",function(){t.scrollTo(t.Ug.offsetLeft+t.co)}),x.K(this.Dr,"click",function(){t.scrollTo(t.Ug.offsetLeft-t.co)})},sU:function(){x.D.Rb(this.fg,"pano_arrow_disable"),x.D.Rb(this.Dr,"pano_arrow_disable");var t=this.Ug.offsetLeft;t>=this.rv&&x.D.Ta(this.fg,"pano_arrow_disable"),t-this.co<=this.MA&&x.D.Ta(this.Dr,"pano_arrow_disable")},scrollTo:function(t){t=t<this.Ug.offsetLeft?Math.ceil((t-this.Gi-this.co)/this.Lr)*this.Lr+this.co+this.Gi-8:Math.ceil((t-this.Gi)/this.Lr)*this.Lr+this.Gi,t<this.MA?t=this.MA:t>this.rv&&(t=this.rv);var e=this.Ug.offsetLeft,i=this;new rb({Gc:60,hc:sb.Cs,duration:300,ta:function(n){i.Ug.style.left=e+(t-e)*n+"px"},finish:function(){i.sU()}})}},z.Map=Ka,z.Hotspot=hb,z.MapType=Qc,z.Point=H,z.Pixel=Q,z.Size=L,z.Bounds=eb,z.TileLayer=Dc,z.Projection=fc,z.MercatorProjection=R,z.PerspectiveProjection=gb,z.Copyright=function(t,e,i){this.id=t,this.fb=e,this.content=i},z.Overlay=ic,z.Label=qc,z.GroundOverlay=rc,z.PointCollection=vc,z.Marker=T,z.Icon=mc,z.IconSequence=oc,z.Symbol=nc,z.Polyline=zc,z.Polygon=yc,z.InfoWindow=pc,z.Circle=Ac,z.Control=Rb,z.NavigationControl=ib,z.GeolocationControl=Vb,z.OverviewMapControl=kb,z.CopyrightControl=Wb,z.ScaleControl=jb,z.MapTypeControl=lb,z.CityListControl=Xb,z.PanoramaControl=Zb,z.TrafficLayer=Mc,z.CustomLayer=mb,z.ContextMenu=bc,z.MenuItem=ec,z.LocalSearch=ab,z.TransitRoute=qd,z.DrivingRoute=td,z.WalkingRoute=ud,z.Autocomplete=Gd,z.RouteSearch=yd,z.Geocoder=zd,z.LocalCity=Bd,z.Geolocation=Geolocation,z.Convertor=hc,z.BusLineSearch=Fd,z.Boundary=Ed,z.VectorCloudLayer=Kc,z.VectorTrafficLayer=Lc,z.Panorama=Ma,z.PanoramaLabel=Md,z.PanoramaService=ac,z.PanoramaCoverageLayer=$b,z.PanoramaFlashInterface=Td,S(window,{BMap:z,_jsload2:function(t,e){ja.Gy.eY&&ja.Gy.set(t,e),I.gV(t,e)},BMAP_API_VERSION:"2.0"});var W=Ka.prototype;S(W,{getBounds:W.Fd,getCenter:W.Ka,getMapType:W.va,getSize:W.wb,setSize:W.we,getViewport:W.Zs,getZoom:W.fa,centerAndZoom:W.Xd,panTo:W.ui,panBy:W.yg,setCenter:W.Vf,setCurrentCity:W.kF,setMapType:W.Bg,setViewport:W.Bh,setZoom:W.Oc,highResolutionEnabled:W.DL,zoomTo:W.Fg,zoomIn:W.PF,zoomOut:W.QF,addHotspot:W.nw,removeHotspot:W.eZ,clearHotspots:W.bm,checkResize:W.jV,addControl:W.lw,removeControl:W.mN,getContainer:W.Na,addContextMenu:W.uo,removeContextMenu:W.zp,addOverlay:W.Ja,removeOverlay:W.Sb,clearOverlays:W.$J,openInfoWindow:W.Mb,closeInfoWindow:W.Xc,pointToOverlayPixel:W.Re,overlayPixelToPoint:W.bN,getInfoWindow:W.jh,getOverlays:W.qx,getPanes:function(){return{floatPane:this.Sd.oD,markerMouseTarget:this.Sd.AE,floatShadow:this.Sd.SK,labelPane:this.Sd.tE,markerPane:this.Sd.vM,markerShadow:this.Sd.wM,mapPane:this.Sd.ot,vertexPane:this.Sd.FO}},addTileLayer:W.Yg,removeTileLayer:W.zh,pixelToPoint:W.zb,pointToPixel:W.fc,setFeatureStyle:W.Ip,selectBaseElement:W.I3,setMapStyle:W.Nt,enable3DBuilding:W.Mo,disable3DBuilding:W.TV,getPanorama:W.rm});var Ie=Qc.prototype;S(Ie,{getTileLayer:Ie.xX,getMinZoom:Ie.Xo,getMaxZoom:Ie.qm,getProjection:Ie.bp,getTextColor:Ie.wm,getTips:Ie.Ys}),S(window,{BMAP_NORMAL_MAP:La,BMAP_PERSPECTIVE_MAP:Na,BMAP_SATELLITE_MAP:Wa,BMAP_HYBRID_MAP:Pa});var Je=R.prototype;S(Je,{lngLatToPoint:Je.nh,pointToLngLat:Je.wi});var Ke=gb.prototype;S(Ke,{lngLatToPoint:Ke.nh,pointToLngLat:Ke.wi});var Le=eb.prototype;S(Le,{equals:Le.lb,containsPoint:Le.bs,containsBounds:Le.uV,intersects:Le.ft,extend:Le.extend,getCenter:Le.Ka,isEmpty:Le.yj,getSouthWest:Le.qe,getNorthEast:Le.kf,toSpan:Le.EF});var Me=ic.prototype;S(Me,{isVisible:Me.mh,show:Me.show,hide:Me.U}),ic.getZIndex=ic.ym;var Ne=fb.prototype;S(Ne,{openInfoWindow:Ne.Mb,closeInfoWindow:Ne.Xc,enableMassClear:Ne.ii,disableMassClear:Ne.VV,show:Ne.show,hide:Ne.U,getMap:Ne.lx,addContextMenu:Ne.uo,removeContextMenu:Ne.zp});var Oe=T.prototype;S(Oe,{setIcon:Oe.Tb,getIcon:Oe.Wo,setPosition:Oe.ra,getPosition:Oe.ha,setOffset:Oe.Te,getOffset:Oe.Pf,getLabel:Oe.GD,setLabel:Oe.fn,setTitle:Oe.Bc,setTop:Oe.zi,enableDragging:Oe.bc,disableDragging:Oe.GC,setZIndex:Oe.St,getMap:Oe.lx,setAnimation:Oe.dn,setShadow:Oe.xy,hide:Oe.U,setRotation:Oe.Lp,getRotation:Oe.qL}),S(window,{BMAP_ANIMATION_DROP:1,BMAP_ANIMATION_BOUNCE:2});var Pe=qc.prototype;S(Pe,{setStyle:Pe.Jd,setStyles:Pe.yi,setContent:Pe.bd,setPosition:Pe.ra,getPosition:Pe.ha,setOffset:Pe.Te,getOffset:Pe.Pf,setTitle:Pe.Bc,setZIndex:Pe.St,getMap:Pe.lx,getContent:Pe.uk});var Qe=mc.prototype;S(Qe,{setImageUrl:Qe.DN,setSize:Qe.we,setAnchor:Qe.pc,setImageOffset:Qe.Mt,setImageSize:Qe.HZ,setInfoWindowAnchor:Qe.KZ,setPrintImageUrl:Qe.UZ});var Te=pc.prototype;S(Te,{redraw:Te.fe,setTitle:Te.Bc,setContent:Te.bd,getContent:Te.uk,getPosition:Te.ha,enableMaximize:Te.dh,disableMaximize:Te.Sw,isOpen:Te.Va,setMaxContent:Te.Ot,maximize:Te.Rx,enableAutoPan:Te.Ds});var Ue=kc.prototype;S(Ue,{getPath:Ue.oe,setPath:Ue.ge,setPositionAt:Ue.hn,getStrokeColor:Ue.rX,setStrokeWeight:Ue.Op,getStrokeWeight:Ue.tL,setStrokeOpacity:Ue.Mp,getStrokeOpacity:Ue.sX,setFillOpacity:Ue.Lt,getFillOpacity:Ue.PW,setStrokeStyle:Ue.Np,getStrokeStyle:Ue.sL,getFillColor:Ue.OW,getBounds:Ue.Fd,enableEditing:Ue.Nf,disableEditing:Ue.UV});var Ve=Ac.prototype;S(Ve,{setCenter:Ve.Vf,getCenter:Ve.Ka,getRadius:Ve.oL,setRadius:Ve.qf});var We=yc.prototype;S(We,{getPath:We.oe,setPath:We.ge,setPositionAt:We.hn});var Xe=hb.prototype;S(Xe,{getPosition:Xe.ha,setPosition:Xe.ra,getText:Xe.RD,setText:Xe.Rt}),H.prototype.equals=H.prototype.lb,Q.prototype.equals=Q.prototype.lb,L.prototype.equals=L.prototype.lb,S(window,{BMAP_ANCHOR_TOP_LEFT:Sb,BMAP_ANCHOR_TOP_RIGHT:Tb,BMAP_ANCHOR_BOTTOM_LEFT:Ub,BMAP_ANCHOR_BOTTOM_RIGHT:3});var Ye=Rb.prototype;S(Ye,{setAnchor:Ye.pc,getAnchor:Ye.uD,setOffset:Ye.Te,getOffset:Ye.Pf,show:Ye.show,hide:Ye.U,isVisible:Ye.mh,toString:Ye.toString});var Ze=ib.prototype;S(Ze,{getType:Ze.fp,setType:Ze.jn}),S(window,{BMAP_NAVIGATION_CONTROL_LARGE:0,BMAP_NAVIGATION_CONTROL_SMALL:1,BMAP_NAVIGATION_CONTROL_PAN:2,BMAP_NAVIGATION_CONTROL_ZOOM:3});var $e=kb.prototype;S($e,{changeView:$e.le,setSize:$e.we,getSize:$e.wb});var af=jb.prototype;S(af,{getUnit:af.BX,setUnit:af.sF}),S(window,{BMAP_UNIT_METRIC:"metric",BMAP_UNIT_IMPERIAL:"us"});var bf=Wb.prototype;S(bf,{addCopyright:bf.mw,removeCopyright:bf.XE,getCopyright:bf.om,getCopyrightCollection:bf.AD}),S(window,{BMAP_MAPTYPE_CONTROL_HORIZONTAL:Yb,BMAP_MAPTYPE_CONTROL_DROPDOWN:1,BMAP_MAPTYPE_CONTROL_MAP:2});var cf=Dc.prototype;S(cf,{getMapType:cf.va,getCopyright:cf.om,isTransparentPng:cf.lt});var df=bc.prototype;S(df,{addItem:df.ow,addSeparator:df.OB,removeSeparator:df.ZE});var ef=ec.prototype;S(ef,{setText:ef.Rt});var ff=V.prototype;S(ff,{getStatus:ff.um,setSearchCompleteCallback:ff.qF,getPageCapacity:ff.lf,setPageCapacity:ff.Kp,setLocation:ff.gn,disableFirstResultSelection:ff.HC,enableFirstResultSelection:ff.dD,gotoPage:ff.zm,searchNearby:ff.Gp,searchInBounds:ff.bn,search:ff.search}),S(window,{BMAP_STATUS_SUCCESS:0,BMAP_STATUS_CITY_LIST:1,BMAP_STATUS_UNKNOWN_LOCATION:2,BMAP_STATUS_UNKNOWN_ROUTE:3,BMAP_STATUS_INVALID_KEY:4,BMAP_STATUS_INVALID_REQUEST:5,BMAP_STATUS_PERMISSION_DENIED:6,BMAP_STATUS_SERVICE_UNAVAILABLE:7,BMAP_STATUS_TIMEOUT:8}),S(window,{BMAP_POI_TYPE_NORMAL:0,BMAP_POI_TYPE_BUSSTOP:1,BMAP_POI_TYPE_BUSLINE:2,BMAP_POI_TYPE_SUBSTOP:3,BMAP_POI_TYPE_SUBLINE:4}),S(window,{BMAP_TRANSIT_POLICY_LEAST_TIME:0,BMAP_TRANSIT_POLICY_LEAST_TRANSFER:2,BMAP_TRANSIT_POLICY_LEAST_WALKING:3,BMAP_TRANSIT_POLICY_AVOID_SUBWAYS:4,BMAP_LINE_TYPE_BUS:0,BMAP_LINE_TYPE_SUBWAY:1,BMAP_LINE_TYPE_FERRY:2});var hf=pd.prototype;S(hf,{clearResults:hf.Me}),rd=qd.prototype,S(rd,{setPolicy:rd.Qt,toString:rd.toString,setPageCapacity:rd.Kp}),S(window,{BMAP_DRIVING_POLICY_LEAST_TIME:0,BMAP_DRIVING_POLICY_LEAST_DISTANCE:1,BMAP_DRIVING_POLICY_AVOID_HIGHWAYS:2}),S(window,{BMAP_MODE_DRIVING:"driving",BMAP_MODE_TRANSIT:"transit",BMAP_MODE_WALKING:"walking",BMAP_MODE_NAVIGATION:"navigation"});var jf=yd.prototype;S(jf,{routeCall:jf.xN}),S(window,{BMAP_HIGHLIGHT_STEP:1,BMAP_HIGHLIGHT_ROUTE:2}),S(window,{BMAP_ROUTE_TYPE_DRIVING:ad,BMAP_ROUTE_TYPE_WALKING:$c}),S(window,{BMAP_ROUTE_STATUS_NORMAL:cd,BMAP_ROUTE_STATUS_EMPTY:1,BMAP_ROUTE_STATUS_ADDRESS:2});var kf=td.prototype;S(kf,{setPolicy:kf.Qt});var lf=Gd.prototype;S(lf,{show:lf.show,hide:lf.U,setTypes:lf.rF,setLocation:lf.gn,search:lf.search,setInputValue:lf.uy}),S(mb.prototype,{});var mf=Ed.prototype;S(mf,{get:mf.get}),S($b.prototype,{}),S(bb.prototype,{}),S(window,{BMAP_POINT_DENSITY_HIGH:200,BMAP_POINT_DENSITY_MEDIUM:Pc,BMAP_POINT_DENSITY_LOW:50}),S(window,{BMAP_POINT_SHAPE_STAR:1,BMAP_POINT_SHAPE_WATERDROP:2,BMAP_POINT_SHAPE_CIRCLE:sc,BMAP_POINT_SHAPE_SQUARE:4,BMAP_POINT_SHAPE_RHOMBUS:5}),S(window,{BMAP_POINT_SIZE_TINY:1,BMAP_POINT_SIZE_SMALLER:2,BMAP_POINT_SIZE_SMALL:3,BMAP_POINT_SIZE_NORMAL:tc,BMAP_POINT_SIZE_BIG:5,BMAP_POINT_SIZE_BIGGER:6,BMAP_POINT_SIZE_HUGE:7}),S(window,{BMap_Symbol_SHAPE_CAMERA:11,BMap_Symbol_SHAPE_WARNING:12,BMap_Symbol_SHAPE_SMILE:13,BMap_Symbol_SHAPE_CLOCK:14,BMap_Symbol_SHAPE_POINT:9,BMap_Symbol_SHAPE_PLANE:10,BMap_Symbol_SHAPE_CIRCLE:1,BMap_Symbol_SHAPE_RECTANGLE:2,BMap_Symbol_SHAPE_RHOMBUS:3,BMap_Symbol_SHAPE_STAR:4,BMap_Symbol_SHAPE_BACKWARD_CLOSED_ARROW:5,BMap_Symbol_SHAPE_FORWARD_CLOSED_ARROW:6,BMap_Symbol_SHAPE_BACKWARD_OPEN_ARROW:7,BMap_Symbol_SHAPE_FORWARD_OPEN_ARROW:8}),S(window,{BMAP_CONTEXT_MENU_ICON_ZOOMIN:cc,BMAP_CONTEXT_MENU_ICON_ZOOMOUT:dc}),z.KU()}();var BMapLib=window.BMapLib=BMapLib||{},BMAP_DRAWING_MARKER="marker",BMAP_DRAWING_POLYLINE="polyline",BMAP_DRAWING_CIRCLE="circle",BMAP_DRAWING_RECTANGLE="rectangle",BMAP_DRAWING_POLYGON="polygon";!function(){function t(){
this._enableEdgeMove=!1}function e(t,e){this.drawingManager=t,e=this.drawingToolOptions=e||{},this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new BMap.Size(10,10),this.defaultDrawingModes=[BMAP_DRAWING_MARKER,BMAP_DRAWING_CIRCLE,BMAP_DRAWING_POLYLINE,BMAP_DRAWING_POLYGON,BMAP_DRAWING_RECTANGLE],e.drawingModes?this.drawingModes=e.drawingModes:this.drawingModes=this.defaultDrawingModes,e.anchor&&this.setAnchor(e.anchor),e.offset&&this.setOffset(e.offset)}function i(t){for(var e=s.length;e--;)s[e]!=t&&s[e].close()}var n=n||{guid:"$BAIDU$"};!function(){window[n.guid]={},n.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},n.lang=n.lang||{},n.lang.guid=function(){return"TANGRAM__"+(window[n.guid]._counter++).toString(36)},window[n.guid]._counter=window[n.guid]._counter||1,window[n.guid]._instances=window[n.guid]._instances||{},n.lang.Class=function(t){this.guid=t||n.lang.guid(),window[n.guid]._instances[this.guid]=this},window[n.guid]._instances=window[n.guid]._instances||{},n.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},n.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},n.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},n.lang.Class.prototype.dispose=function(){delete window[n.guid]._instances[this.guid];for(var t in this)n.lang.isFunction(this[t])||delete this[t];this.disposed=!0},n.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},n.lang.Class.prototype.addEventListener=function(t,e,i){if(n.lang.isFunction(e)){!this.__listeners&&(this.__listeners={});var o,s=this.__listeners;if("string"==typeof i&&i){if(/[^\w\-]/.test(i))throw"nonstandard key:"+i;e.hashCode=i,o=i}0!=t.indexOf("on")&&(t="on"+t),"object"!=typeof s[t]&&(s[t]={}),o=o||n.lang.guid(),e.hashCode=o,s[t][o]=e}},n.lang.Class.prototype.removeEventListener=function(t,e){if(n.lang.isFunction(e))e=e.hashCode;else if(!n.lang.isString(e))return;!this.__listeners&&(this.__listeners={}),0!=t.indexOf("on")&&(t="on"+t);var i=this.__listeners;i[t]&&i[t][e]&&delete i[t][e]},n.lang.Class.prototype.dispatchEvent=function(t,e){n.lang.isString(t)&&(t=new n.lang.Event(t)),!this.__listeners&&(this.__listeners={}),e=e||{};for(var i in e)t[i]=e[i];var i,o=this.__listeners,s=t.type;if(t.target=t.target||this,t.currentTarget=this,0!=s.indexOf("on")&&(s="on"+s),n.lang.isFunction(this[s])&&this[s].apply(this,arguments),"object"==typeof o[s])for(i in o[s])o[s][i].apply(this,arguments);return t.returnValue},n.lang.inherits=function(t,e,i){var n,o,s=t.prototype,a=new Function;a.prototype=e.prototype,o=t.prototype=new a;for(n in s)o[n]=s[n];t.prototype.constructor=t,t.superClass=e.prototype,"string"==typeof i&&(o._className=i)},n.dom=n.dom||{},n._g=n.dom._g=function(t){return n.lang.isString(t)?document.getElementById(t):t},n.g=n.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},n.insertHTML=n.dom.insertHTML=function(t,e,i){t=n.dom.g(t);var o,s;return t.insertAdjacentHTML?t.insertAdjacentHTML(e,i):(o=t.ownerDocument.createRange(),e=e.toUpperCase(),"AFTERBEGIN"==e||"BEFOREEND"==e?(o.selectNodeContents(t),o.collapse("AFTERBEGIN"==e)):(s="BEFOREBEGIN"==e,o[s?"setStartBefore":"setEndAfter"](t),o.collapse(s)),o.insertNode(o.createContextualFragment(i))),t},n.ac=n.dom.addClass=function(t,e){t=n.dom.g(t);for(var i=e.split(/\s+/),o=t.className,s=" "+o+" ",a=0,r=i.length;r>a;a++)s.indexOf(" "+i[a]+" ")<0&&(o+=(o?" ":"")+i[a]);return t.className=o,t},n.event=n.event||{},n.event._listeners=n.event._listeners||[],n.on=n.event.on=function(t,e,i){e=e.replace(/^on/i,""),t=n._g(t);var o,s=function(e){i.call(t,e)},a=n.event._listeners,r=n.event._eventFilter,h=e;return e=e.toLowerCase(),r&&r[e]&&(o=r[e](t,e,s),h=o.type,s=o.listener),t.addEventListener?t.addEventListener(h,s,!1):t.attachEvent&&t.attachEvent("on"+h,s),a[a.length]=[t,e,i,s,h],t},n.un=n.event.un=function(t,e,i){t=n._g(t),e=e.replace(/^on/i,"").toLowerCase();for(var o,s,a,r=n.event._listeners,h=r.length,c=!i;h--;)o=r[h],o[1]!==e||o[0]!==t||!c&&o[2]!==i||(s=o[4],a=o[3],t.removeEventListener?t.removeEventListener(s,a,!1):t.detachEvent&&t.detachEvent("on"+s,a),r.splice(h,1));return t},n.getEvent=n.event.getEvent=function(t){return window.event||t},n.getTarget=n.event.getTarget=function(t){var t=n.getEvent(t);return t.target||t.srcElement},n.preventDefault=n.event.preventDefault=function(t){var t=n.getEvent(t);t.preventDefault?t.preventDefault():t.returnValue=!1},n.stopBubble=n.event.stopBubble=function(t){t=n.getEvent(t),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},n.browser=n.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(n.browser.ie=n.ie=document.documentMode||+RegExp.$1)}();var o=BMapLib.DrawingManager=function(t,e){t&&(s.push(this),e=e||{},this._initialize(t,e))};n.lang.inherits(o,n.lang.Class,"DrawingManager"),o.prototype.open=function(){return 1==this._isOpen?!0:(i(this),void this._open())},o.prototype.close=function(){if(0==this._isOpen)return!0;var t=this;this._close(),setTimeout(function(){t._map.enableDoubleClickZoom()},2e3)},o.prototype.setDrawingMode=function(t){this._drawingType!=t&&(i(this),this._setDrawingMode(t))},o.prototype.getDrawingMode=function(){return this._drawingType},o.prototype.enableCalculate=function(){this._enableCalculate=!0,this._addGeoUtilsLibrary()},o.prototype.disableCalculate=function(){this._enableCalculate=!1},o.prototype._initialize=function(t,i){if(this._map=t,this._opts=i,this._drawingType=i.drawingMode||BMAP_DRAWING_MARKER,i.enableDrawingTool){var n=new e(this,i.drawingToolOptions);this._drawingTool=n,t.addControl(n)}i.enableCalculate===!0?this.enableCalculate():this.disableCalculate(),this._isOpen=!(i.isOpen!==!0),this._isOpen&&this._open(),this.markerOptions=i.markerOptions||{},this.circleOptions=i.circleOptions||{},this.polylineOptions=i.polylineOptions||{},this.polygonOptions=i.polygonOptions||{},this.rectangleOptions=i.rectangleOptions||{},this.controlButton="right"==i.controlButton?"right":"left"},o.prototype._open=function(){this._isOpen=!0,this._mask||(this._mask=new t),this._map.addOverlay(this._mask),this._setDrawingMode(this._drawingType)},o.prototype._setDrawingMode=function(t){if(this._drawingType=t,this._isOpen)switch(this._mask.__listeners={},t){case BMAP_DRAWING_MARKER:this._bindMarker();break;case BMAP_DRAWING_CIRCLE:this._bindCircle();break;case BMAP_DRAWING_POLYLINE:case BMAP_DRAWING_POLYGON:this._bindPolylineOrPolygon();break;case BMAP_DRAWING_RECTANGLE:this._bindRectangle()}this._drawingTool&&this._isOpen&&this._drawingTool.setStyleByDrawingMode(t)},o.prototype._close=function(){this._isOpen=!1,this._mask&&this._map.removeOverlay(this._mask),this._drawingTool&&this._drawingTool.setStyleByDrawingMode("hander")},o.prototype._bindMarker=function(){var t=this,e=this._map,i=this._mask,n=function(i){var n=new BMap.Marker(i.point,t.markerOptions);e.addOverlay(n),t._dispatchOverlayComplete(n)};i.addEventListener("click",n)},o.prototype._bindCircle=function(){var t=this,e=this._map,i=this._mask,o=null,s=null,a=function(a){("right"!=t.controlButton||1!=a.button&&0!=a.button)&&(s=a.point,o=new BMap.Circle(s,0,t.circleOptions),e.addOverlay(o),i.enableEdgeMove(),i.addEventListener("mousemove",r),n.on(document,"mouseup",h))},r=function(e){o.setRadius(t._map.getDistance(s,e.point))},h=function(e){var a=t._calculate(o,e.point);t._dispatchOverlayComplete(o,a),s=null,i.disableEdgeMove(),i.removeEventListener("mousemove",r),n.un(document,"mouseup",h)},c=function(e){n.preventDefault(e),n.stopBubble(e),"right"==t.controlButton&&1==e.button||null==s&&a(e)};i.addEventListener("mousedown",c)},o.prototype._bindPolylineOrPolygon=function(){var t=this,e=this._map,i=this._mask,o=[],s=null;overlay=null,isBinded=!1;var a=function(n){("right"!=t.controlButton||1!=n.button&&0!=n.button)&&(o.push(n.point),s=o.concat(o[o.length-1]),1==o.length?(t._drawingType==BMAP_DRAWING_POLYLINE?overlay=new BMap.Polyline(s,t.polylineOptions):t._drawingType==BMAP_DRAWING_POLYGON&&(overlay=new BMap.Polygon(s,t.polygonOptions)),e.addOverlay(overlay)):overlay.setPath(s),isBinded||(isBinded=!0,i.enableEdgeMove(),i.addEventListener("mousemove",r),i.addEventListener("dblclick",h)))},r=function(t){overlay.setPositionAt(s.length-1,t.point)},h=function(e){n.stopBubble(e),isBinded=!1,i.disableEdgeMove(),i.removeEventListener("mousedown",a),i.removeEventListener("mousemove",r),i.removeEventListener("dblclick",h),"right"==t.controlButton?o.push(e.point):n.ie<=8||o.pop(),overlay.setPath(o);var c=t._calculate(overlay,o.pop());t._dispatchOverlayComplete(overlay,c),o.length=0,s.length=0,t.close()};i.addEventListener("mousedown",a),i.addEventListener("dblclick",function(t){n.stopBubble(t)})},o.prototype._bindRectangle=function(){var t=this,e=this._map,i=this._mask,o=null,s=null,a=function(a){if(n.stopBubble(a),n.preventDefault(a),"right"!=t.controlButton||1!=a.button&&0!=a.button){s=a.point;var c=s;o=new BMap.Polygon(t._getRectanglePoint(s,c),t.rectangleOptions),e.addOverlay(o),i.enableEdgeMove(),i.addEventListener("mousemove",r),n.on(document,"mouseup",h)}},r=function(e){o.setPath(t._getRectanglePoint(s,e.point))},h=function(e){var a=t._calculate(o,o.getPath()[2]);t._dispatchOverlayComplete(o,a),s=null,i.disableEdgeMove(),i.removeEventListener("mousemove",r),n.un(document,"mouseup",h)};i.addEventListener("mousedown",a)},o.prototype._calculate=function(t,e){var i={data:0,label:null};if(this._enableCalculate&&BMapLib.GeoUtils){var n=t.toString();switch(n){case"[object Polyline]":i.data=BMapLib.GeoUtils.getPolylineDistance(t);break;case"[object Polygon]":i.data=BMapLib.GeoUtils.getPolygonArea(t);break;case"[object Circle]":var o=t.getRadius();i.data=Math.PI*o*o}!i.data||i.data<0?i.data=0:i.data=i.data.toFixed(2),i.label=this._addLabel(e,i.data)}return i},o.prototype._addGeoUtilsLibrary=function(){if(!BMapLib.GeoUtils){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","http://api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils_min.js"),document.body.appendChild(t)}},o.prototype._addLabel=function(t,e){var i=new BMap.Label(e,{position:t});return this._map.addOverlay(i),i},o.prototype._getRectanglePoint=function(t,e){return[new BMap.Point(t.lng,t.lat),new BMap.Point(e.lng,t.lat),new BMap.Point(e.lng,e.lat),new BMap.Point(t.lng,e.lat)]},o.prototype._dispatchOverlayComplete=function(t,e){var i={overlay:t,drawingMode:this._drawingType};e&&(i.calculate=e.data||null,i.label=e.label||null),this.dispatchEvent(this._drawingType+"complete",t),this.dispatchEvent("overlaycomplete",i)},t.prototype=new BMap.Overlay,t.prototype.dispatchEvent=n.lang.Class.prototype.dispatchEvent,t.prototype.addEventListener=n.lang.Class.prototype.addEventListener,t.prototype.removeEventListener=n.lang.Class.prototype.removeEventListener,t.prototype.initialize=function(t){var e=this;this._map=t;var i=this.container=document.createElement("div"),n=this._map.getSize();return i.style.cssText="position:absolute;background:url(about:blank);cursor:crosshair;width:"+n.width+"px;height:"+n.height+"px",this._map.addEventListener("resize",function(t){e._adjustSize(t.size)}),this._map.getPanes().floatPane.appendChild(i),this._bind(),i},t.prototype.draw=function(){var t=this._map,e=t.pixelToPoint(new BMap.Pixel(0,0)),i=t.pointToOverlayPixel(e);this.container.style.left=i.x+"px",this.container.style.top=i.y+"px"},t.prototype.enableEdgeMove=function(){this._enableEdgeMove=!0},t.prototype.disableEdgeMove=function(){clearInterval(this._edgeMoveTimer),this._enableEdgeMove=!1},t.prototype._bind=function(){for(var t=this,e=(this._map,this.container),i=null,o=null,s=function(t){return{x:t.clientX,y:t.clientY}},a=function(e){var a=e.type;e=n.getEvent(e),point=t.getDrawPoint(e);var r=function(i){e.point=point,t.dispatchEvent(e)};"mousedown"==a&&(i=s(e));var h=s(e);"click"==a?Math.abs(h.x-i.x)<5&&Math.abs(h.y-i.y)<5&&(o&&Math.abs(h.x-o.x)<5&&Math.abs(h.y-o.y)<5?o=null:(r("click"),o=s(e))):r(a)},r=["click","mousedown","mousemove","mouseup","dblclick"],h=r.length;h--;)n.on(e,r[h],a);n.on(e,"mousemove",function(e){t._enableEdgeMove&&t.mousemoveAction(e)})},t.prototype.mousemoveAction=function(t){function e(t){var e=t.clientX,i=t.clientY;return t.changedTouches&&(e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY),new BMap.Pixel(e,i)}var i=this._map,n=this,o=i.pointToPixel(this.getDrawPoint(t)),s=e(t),a=s.x-o.x,r=s.y-o.y;o=new BMap.Pixel(s.x-a,s.y-r),this._draggingMovePixel=o,i.pixelToPoint(o),this._panByX=this._panByY=0,o.x<=20||o.x>=i.width-20||o.y<=50||o.y>=i.height-10?(o.x<=20?this._panByX=8:o.x>=i.width-20&&(this._panByX=-8),o.y<=50?this._panByY=8:o.y>=i.height-10&&(this._panByY=-8),this._edgeMoveTimer||(this._edgeMoveTimer=setInterval(function(){i.panBy(n._panByX,n._panByY,{noAnimation:!0})},30))):this._edgeMoveTimer&&(clearInterval(this._edgeMoveTimer),this._edgeMoveTimer=null)},t.prototype._adjustSize=function(t){this.container.style.width=t.width+"px",this.container.style.height=t.height+"px"},t.prototype.getDrawPoint=function(t){var e=this._map,i=n.getTarget(t),o=t.offsetX||t.layerX||0,s=t.offsetY||t.layerY||0;for(1!=i.nodeType&&(i=i.parentNode);i&&i!=e.getContainer();)0==i.clientWidth&&0==i.clientHeight&&i.offsetParent&&"TD"==i.offsetParent.nodeName||(o+=i.offsetLeft||0,s+=i.offsetTop||0),i=i.offsetParent;var a=new BMap.Pixel(o,s),r=e.pixelToPoint(a);return r},e.prototype=new BMap.Control,e.prototype.initialize=function(t){var e=this.container=document.createElement("div");e.className="BMapLib_Drawing";var i=this.panel=document.createElement("div");return i.className="BMapLib_Drawing_panel",this.drawingToolOptions&&this.drawingToolOptions.scale&&this._setScale(this.drawingToolOptions.scale),e.appendChild(i),i.innerHTML=this._generalHtml(),this._bind(i),t.getContainer().appendChild(e),e},e.prototype._generalHtml=function(t){var e={};e.hander="拖动",e[BMAP_DRAWING_MARKER]="标记",e[BMAP_DRAWING_CIRCLE]="圆",e[BMAP_DRAWING_POLYLINE]="折线",e[BMAP_DRAWING_POLYGON]="多边形",e[BMAP_DRAWING_RECTANGLE]="矩阵";var i=function(t,i){return'<a class="'+t+'" drawingType="'+i+'" href="javascript:void(0)" title="'+e[i]+'" onfocus="this.blur()"></a>'},n=[];n.push(i("BMapLib_box BMapLib_hander","hander"));for(var o=0,s=this.drawingModes.length;s>o;o++){var a="BMapLib_box BMapLib_"+this.drawingModes[o];o==s-1&&(a+=" BMapLib_last"),n.push(i(a,this.drawingModes[o]))}return n.join("")},e.prototype._setScale=function(t){var e=390,i=50,n=-parseInt((e-e*t)/2,10),o=-parseInt((i-i*t)/2,10);this.container.style.cssText=["-moz-transform: scale("+t+");","-o-transform: scale("+t+");","-webkit-transform: scale("+t+");","transform: scale("+t+");","margin-left:"+n+"px;","margin-top:"+o+"px;","*margin-left:0px;","*margin-top:0px;","margin-left:0px\\0;","margin-top:0px\\0;","filter: progid:DXImageTransform.Microsoft.Matrix(","M11="+t+",","M12=0,","M21=0,","M22="+t+",","SizingMethod='auto expand');"].join("")},e.prototype._bind=function(t){var e=this;n.on(this.panel,"click",function(t){var i=n.getTarget(t),o=i.getAttribute("drawingType");e.setStyleByDrawingMode(o),e._bindEventByDraingMode(o)})},e.prototype.setStyleByDrawingMode=function(t){if(t)for(var e=this.panel.getElementsByTagName("a"),i=0,n=e.length;n>i;i++){var o=e[i];if(o.getAttribute("drawingType")==t){var s="BMapLib_box BMapLib_"+t+"_hover";i==n-1&&(s+=" BMapLib_last"),o.className=s}else o.className=o.className.replace(/_hover/,"")}},e.prototype._bindEventByDraingMode=function(t){var e=this.drawingManager;"hander"==t?(e.close(),e._map.enableDoubleClickZoom()):(e.setDrawingMode(t),e.open(),e._map.disableDoubleClickZoom())};var s=[]}();var BMapLib=window.BMapLib=BMapLib||{};!function(){function t(t){var t=window.event||t;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}var e=e||{guid:"$BAIDU$"};!function(){window[e.guid]={},e.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.lang=e.lang||{},e.lang.guid=function(){return"TANGRAM__"+(window[e.guid]._counter++).toString(36)},window[e.guid]._counter=window[e.guid]._counter||1,window[e.guid]._instances=window[e.guid]._instances||{},e.lang.Class=function(t){this.guid=t||e.lang.guid(),window[e.guid]._instances[this.guid]=this},window[e.guid]._instances=window[e.guid]._instances||{},e.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},e.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},e.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},e.lang.Class.prototype.dispose=function(){delete window[e.guid]._instances[this.guid];for(var t in this)e.lang.isFunction(this[t])||delete this[t];this.disposed=!0},e.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},e.lang.Class.prototype.addEventListener=function(t,i,n){if(e.lang.isFunction(i)){!this.__listeners&&(this.__listeners={});var o,s=this.__listeners;if("string"==typeof n&&n){if(/[^\w\-]/.test(n))throw"nonstandard key:"+n;i.hashCode=n,o=n}0!=t.indexOf("on")&&(t="on"+t),"object"!=typeof s[t]&&(s[t]={}),o=o||e.lang.guid(),i.hashCode=o,s[t][o]=i}},e.lang.Class.prototype.removeEventListener=function(t,i){if(e.lang.isFunction(i))i=i.hashCode;else if(!e.lang.isString(i))return;!this.__listeners&&(this.__listeners={}),0!=t.indexOf("on")&&(t="on"+t);var n=this.__listeners;n[t]&&n[t][i]&&delete n[t][i]},e.lang.Class.prototype.dispatchEvent=function(t,i){e.lang.isString(t)&&(t=new e.lang.Event(t)),!this.__listeners&&(this.__listeners={}),i=i||{};for(var n in i)t[n]=i[n];var n,o=this.__listeners,s=t.type;if(t.target=t.target||this,t.currentTarget=this,0!=s.indexOf("on")&&(s="on"+s),e.lang.isFunction(this[s])&&this[s].apply(this,arguments),"object"==typeof o[s])for(n in o[s])o[s][n].apply(this,arguments);return t.returnValue},e.lang.inherits=function(t,e,i){var n,o,s=t.prototype,a=new Function;a.prototype=e.prototype,o=t.prototype=new a;for(n in s)o[n]=s[n];t.prototype.constructor=t,t.superClass=e.prototype,"string"==typeof i&&(o._className=i)},e.dom=e.dom||{},e._g=e.dom._g=function(t){return e.lang.isString(t)?document.getElementById(t):t},e.g=e.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},e.insertHTML=e.dom.insertHTML=function(t,i,n){t=e.dom.g(t);var o,s;return t.insertAdjacentHTML?t.insertAdjacentHTML(i,n):(o=t.ownerDocument.createRange(),i=i.toUpperCase(),"AFTERBEGIN"==i||"BEFOREEND"==i?(o.selectNodeContents(t),o.collapse("AFTERBEGIN"==i)):(s="BEFOREBEGIN"==i,o[s?"setStartBefore":"setEndAfter"](t),o.collapse(s)),o.insertNode(o.createContextualFragment(n))),t},e.ac=e.dom.addClass=function(t,i){t=e.dom.g(t);for(var n=i.split(/\s+/),o=t.className,s=" "+o+" ",a=0,r=n.length;r>a;a++)s.indexOf(" "+n[a]+" ")<0&&(o+=(o?" ":"")+n[a]);return t.className=o,t},e.event=e.event||{},e.event._listeners=e.event._listeners||[],e.on=e.event.on=function(t,i,n){i=i.replace(/^on/i,""),t=e._g(t);var o,s=function(e){n.call(t,e)},a=e.event._listeners,r=e.event._eventFilter,h=i;return i=i.toLowerCase(),r&&r[i]&&(o=r[i](t,i,s),h=o.type,s=o.listener),t.addEventListener?t.addEventListener(h,s,!1):t.attachEvent&&t.attachEvent("on"+h,s),a[a.length]=[t,i,n,s,h],t},e.un=e.event.un=function(t,i,n){t=e._g(t),i=i.replace(/^on/i,"").toLowerCase();for(var o,s,a,r=e.event._listeners,h=r.length,c=!n;h--;)o=r[h],o[1]!==i||o[0]!==t||!c&&o[2]!==n||(s=o[4],a=o[3],t.removeEventListener?t.removeEventListener(s,a,!1):t.detachEvent&&t.detachEvent("on"+s,a),r.splice(h,1));return t},e.preventDefault=e.event.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}}();var i=BMapLib.DistanceTool=function(t,i){t&&(this._map=t,i=i||{},this._opts=e.extend(e.extend(this._opts||{},{tips:"测距",followText:"单击确定地点，双击结束",unit:"metric",lineColor:"#ff6319",lineStroke:2,opacity:.8,lineStyle:"solid",cursor:"http://api.map.baidu.com/images/ruler.cur",secIcon:null,closeIcon:null}),i),this._followTitle=null,this._points=[],this._paths=[],this._dots=[],this._segDistance=[],this._overlays=[],this._enableMassClear=!0,this._units={metric:{name:"metric",conv:1,incon:2e3,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}},this._isOpen=!1,this._startFollowText="单击确定起点",this._movingTimerId=null,this._styles={BMapLib_diso:"height:17px;width:5px;position:absolute;background:url(http://api.map.baidu.com/images/dis_box_01.gif) no-repeat left top",BMapLib_disi:"color:#7a7a7a;position:absolute;left:5px;padding:0 4px 1px 0;line-height:17px;background:url(http://api.map.baidu.com/images/dis_box_01.gif) no-repeat right top",BMapLib_disBoxDis:"color:#ff6319;font-weight:bold"},this._opts.lineStroke<=0&&(this._opts.lineStroke=2),this._opts.opacity>1?this._opts.opacity=1:this._opts.opacity<0&&(this._opts.opacity=0),"solid"!=this._opts.lineStyle&&"dashed"!=this._opts.lineStyle&&(this._opts.lineStyle="solid"),this._units[this._opts.unit]||(this._opts.unit="metric"),this.text="测距")};e.lang.inherits(i,e.lang.Class,"DistanceTool"),i.prototype._bind=function(){this._setCursor(this._opts.cursor);var t=this;e.on(this._map.getContainer(),"mousemove",function(e){if(t._isOpen&&t._followTitle){e=window.event||e;var i=e.target||e.srcElement;if(i!=n.getDom(t._map))return void t._followTitle.hide();t._mapMoving||t._followTitle.show();var o=n.getDrawPoint(e,!0);t._followTitle.setPosition(o)}}),this._startFollowText&&(this._followTitle=new BMap.Label(this._startFollowText,{offset:new BMap.Size(14,16)}),this._followTitle.setStyles({color:"#333",borderColor:"#ff0103"}))},i.prototype.open=function(){if(1==this._isOpen)return!0;if(!BMapLib._toolInUse){this._isOpen=!0,BMapLib._toolInUse=!0,this._mapMoving&&delete this._mapMoving;var t=this;this._binded||(this._binded=!0,this._bind(),this._map.addEventListener("moving",function(){t._hideCurrent()})),this._followTitle&&(this._map.addOverlay(this._followTitle),this._followTitle.hide());var i=function(i){var o=t._map;if(t._isOpen){i=window.event||i;var s=n.getDrawPoint(i,!0);if(t._isPointValid(s)){if(t._bind.initX=i.pageX||i.clientX||0,t._bind.initY=i.pageY||i.clientY||0,t._points.length>0){var a=o.pointToPixel(t._points[t._points.length-1]),r=o.pointToPixel(s),h=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));if(5>h)return}t._bind.x=i.layerX||i.offsetX||0,t._bind.y=i.layerY||i.offsetY||0,t._points.push(s),t._addSecPoint(s),0==t._paths.length&&t._formatTitle(1,t._opts.followText,t._getTotalDistance()),t._paths.length>0&&(t._paths[t._paths.length-1].show(),t._paths[t._paths.length-1].setStrokeOpacity(t._opts.opacity));var c=new BMap.Polyline([s,s],{enableMassClear:t._enableMassClear});if(t._map.addOverlay(c),t._paths.push(c),t._overlays.push(c),c.setStrokeWeight(t._opts.lineStroke),c.setStrokeColor(t._opts.lineColor),c.setStrokeOpacity(t._opts.opacity/2),c.setStrokeStyle(t._opts.lineStyle),t._mapMoving&&c.hide(),t._points.length>1){var l=t._paths[t._points.length-2];l.setPositionAt(1,s)}var p="";if(t._points.length>1){var d=(t._setSegDistance(t._points[t._points.length-2],t._points[t._points.length-1]),t._getTotalDistance());p=t._formatDisStr(d)}else p="起点";var u=new BMap.Label(p,{offset:new BMap.Size(10,-5),enableMassClear:t._enableMassClear});u.setStyles({color:"#333",borderColor:"#ff0103"}),t._map.addOverlay(u),t._formatSegLabel(u,p),t._overlays.push(u),s.disLabel=u,u.setPosition(s);var f=new e.lang.Event("onaddpoint");f.point=s,f.pixel=t._map.pointToPixel(s),f.index=t._points.length-1,f.distance=t._getTotalDistance().toFixed(0),t.dispatchEvent(f)}}},o=function(e){if(t._isOpen)if(t._paths.length>0){e=window.event||e;var i=e.pageX||e.clientX||0,s=e.pageY||e.clientY||0;"undefined"==typeof t._bind.initX&&(t._bind.x=e.layerX||e.offsetX||0,t._bind.y=e.layerY||e.offsetY||0,t._bind.initX=i,t._bind.initY=s);var a=t._bind.x+i-t._bind.initX,r=t._bind.y+s-t._bind.initY,h=t._paths[t._paths.length-1],c=t._map.pixelToPoint(new BMap.Pixel(a,r));h.setPositionAt(1,c),t._mapMoving||h.show();var l=0,p=0;if(10>a?l=8:a>t._map.getSize().width-10&&(l=-8),10>r?p=8:r>t._map.getSize().height-10&&(p=-8),0!=l||0!=p)o._movingTimerId||(t._mapMoving=!0,t._map.panBy(l,p,{noAnimation:!0}),t._movingTimerId=o._movingTimerId=setInterval(function(){t._map.panBy(l,p,{noAnimation:!0})},30),h.hide(),t._followTitle&&t._followTitle.hide());else if(o._movingTimerId){clearInterval(o._movingTimerId),delete o._movingTimerId,delete t._movingTimerId;var d=t._paths[t._paths.length-1],u=t._map.pixelToPoint(new BMap.Pixel(a,r));if(!d)return;d.setPositionAt(1,u),d.show(),t._followTitle&&(t._followTitle.setPosition(u),t._followTitle.show()),t._bind.i=0,t._bind.j=0,delete t._mapMoving}if(t._followTitle){var f=t._getTotalDistance(),g=t._map.getDistance(t._points[t._points.length-1],c);t._updateInstDis(t._followTitle,f+g)}}else if(t._followTitle){t._followTitle.show(),e=window.event||e;var m=e.target||e.srcElement;m!=n.getDom()&&t._followTitle.hide()}},s=function(h){t._isOpen&&(e.un(n.getDom(t._map),"click",i),e.un(document,"mousemove",o),e.un(n.getDom(t._map),"dblclick",s),e.un(document,"keydown",a),e.un(n.getDom(t._map),"mouseup",r),setTimeout(function(){t.close()},50))},a=function(e){e=window.event||e,27==e.keyCode&&(t._clearCurData(),setTimeout(function(){t.close()},50))},r=function(e){e=window.event||e;var i=0;/msie (\d+\.\d)/i.test(navigator.userAgent)&&(i=document.documentMode||+RegExp.$1),(i&&1!=e.button||2==e.button)&&t.close()};return t._initData(),this._formatTitle(),n.show(this._map),this._setCursor(this._opts.cursor),e.on(n.getDom(this._map),"click",i),e.on(document,"mousemove",o),e.on(n.getDom(this._map),"dblclick",s),e.on(document,"keydown",a),e.on(n.getDom(this._map),"mouseup",r),this.bindFunc=[{elem:n.getDom(this._map),type:"click",func:i},{elem:n.getDom(this._map),type:"dblclick",func:s},{elem:document,type:"mousemove",func:o},{elem:document,type:"keydown",func:a},{elem:n.getDom(this._map),type:"mouseup",func:r}],!0}},i.prototype._dispatchLastEvent=function(){var t=new e.lang.Event("ondrawend");t.points=this._points?this._points.slice(0):[],t.overlays=this._paths?this._paths.slice(0,this._paths.length-1):[],t.distance=this._getTotalDistance().toFixed(0),this.dispatchEvent(t)},i.prototype.close=function(){if(0!=this._isOpen){this._isOpen=!1,BMapLib._toolInUse=!1,this._mapMoving&&delete this._mapMoving;var t=this;if(t._dispatchLastEvent(),t._points.length<2)t._clearCurData();else{t._paths[t._paths.length-1].remove(),t._paths[t._paths.length-1]=null,t._paths.length=t._paths.length-1;var i=t._points[t._points.length-1];i.disLabel&&i.disLabel.remove(),t._processLastOp()}n.hide();for(var o=0,s=this.bindFunc.length;s>o;o++)e.un(this.bindFunc[o].elem,this.bindFunc[o].type,this.bindFunc[o].func);t._movingTimerId&&(clearInterval(t._movingTimerId),t._movingTimerId=null),this._followTitle&&this._followTitle.hide()}},i.prototype._clearCurData=function(){for(var t=0,e=this._points.length;e>t;t++)this._points[t].disLabel&&this._points[t].disLabel.remove();for(var t=0,e=this._paths.length;e>t;t++)this._paths[t].remove();for(var t=0,e=this._dots.length;e>t;t++)this._dots[t].remove();this._initData()},i.prototype._initData=function(){this._points.length=0,this._paths.length=0,this._segDistance.length=0,this._dots.length=0},i.prototype._setSegDistance=function(t,e){if(t&&e){var i=this._map.getDistance(t,e);return this._segDistance.push(i),i}},i.prototype._getTotalDistance=function(){for(var t=0,e=0,i=this._segDistance.length;i>e;e++)t+=this._segDistance[e];return t},i.prototype._convertUnit=function(t,e){return e=e||"metric",this._units[e]?t*this._units[e].conv:t},i.prototype._addSecPoint=function(t){var e=this._opts.secIcon?this._opts.secIcon:new BMap.Icon("http://api.map.baidu.com/images/mapctrls.png",new BMap.Size(11,11),{imageOffset:new BMap.Size(-26,-313)}),i=new BMap.Marker(t,{icon:e,clickable:!1,baseZIndex:35e5,zIndexFixed:!0,enableMassClear:this._enableMassClear});this._map.addOverlay(i),this._dots.push(i)},i.prototype._formatDisStr=function(t){var e=this._opts.unit,i=this._units[e].u1,n=this._convertUnit(t,e);return n>this._units[e].incon?(n/=this._units[e].incon,i=this._units[e].u2,n=n.toFixed(1)):n=n.toFixed(0),n+i},i.prototype._setCursor=function(t){var e=/webkit/.test(navigator.userAgent.toLowerCase())?"url("+this._opts.cursor+") 3 6, crosshair":"url("+this._opts.cursor+"), crosshair";n._setCursor(e)},i.prototype._getCursor=function(){return this._opts.cursor},i.prototype._formatSegLabel=function(t,e){t.setStyle({border:"none",padding:"0"}),t.setContent("<span style='"+this._styles.BMapLib_diso+"'><span style='"+this._styles.BMapLib_disi+"'>"+e+"</span></span>")},i.prototype._processLastOp=function(){var i=this;if(delete i._bind.x,delete i._bind.y,delete i._bind.initX,delete i._bind.initY,i._paths.length>i._points.length-1){var n=i._paths.length-1;i._paths[n].remove(),i._paths[n]=null,i._paths.length=n}var o={};o.points=i._points.slice(0),o.paths=i._paths.slice(0),o.dots=i._dots.slice(0),o.segDis=i._segDistance.slice(0);var s=i._map.pointToPixel(o.points[o.points.length-1]),a=i._map.pointToPixel(o.points[o.points.length-2]),r=[0,0],h=[0,0];h=s.y-a.y>=0?[-5,11]:[-5,-35],r=s.x-a.x>=0?[14,0]:[-14,0];var c=o.points[o.points.length-1];c.disLabel=new BMap.Label("",{offset:new BMap.Size(-15,-40),enableMassClear:i._enableMassClear}),c.disLabel.setStyles({color:"#333",borderColor:"#ff0103"}),i._map.addOverlay(c.disLabel),c.disLabel.setOffset(new BMap.Size(h[0],h[1])),c.disLabel.setPosition(c),i._formatTitle(2,"","",c.disLabel);var l=this._opts.closeIcon?this._opts.closeIcon:new BMap.Icon("http://api.map.baidu.com/images/mapctrls.gif",new BMap.Size(12,12),{imageOffset:new BMap.Size(0,-14)});o.closeBtn=new BMap.Marker(o.points[o.points.length-1],{icon:l,offset:new BMap.Size(r[0],r[1]),baseZIndex:36e5,enableMassClear:i._enableMassClear}),i._map.addOverlay(o.closeBtn),o.closeBtn.setTitle("清除本次测距"),o.closeBtn.addEventListener("click",function(n){for(var s=0,a=o.points.length;a>s;s++)o.points[s].disLabel.remove(),o.points[s].disLabel=null;for(var s=0,a=o.paths.length;a>s;s++)o.paths[s].remove(),o.paths[s]=null;for(var s=0,a=o.dots.length;a>s;s++)o.dots[s].remove(),o.dots[s]=null;o.closeBtn.remove(),o.closeBtn=null,t(n);var r=new e.lang.Event("onremovepolyline");i.dispatchEvent(r)}),i._initData()},i.prototype._formatTitle=function(t,e,i,n){var o=n||this._followTitle;if(o){o.setStyle({lineHeight:"16px",zIndex:"85",padding:"3px 5px"});var s=this._startFollowText||"",a=[];if(1==t){o.setOffset(0,25);var r=this._opts.unit,h=this._units[r].u1,c=this._convertUnit(i,r);c>this._units[r].incon?(c/=this._units[r].incon,h=this._units[r].u2,c=c.toFixed(1)):c=c.toFixed(0),a.push("<span>总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+c+"</span>"+h+"</span><br />"),a.push("<span style='color:#7a7a7a'>"+e+"</span>")}else if(2==t){var r=this._opts.unit,h=this._units[r].u1,c=this._convertUnit(this._getTotalDistance(),r);c>this._units[r].incon?(c/=this._units[r].incon,h=this._units[r].u2,c=c.toFixed(1)):c=c.toFixed(0),a.push("总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+c+"</span>"+h)}else o.setOffset(0,25),a.push(s);o.setContent(a.join(""))}},i.prototype._updateInstDis=function(t,e){var i=this._opts.unit,n=this._units[i].u1;if(e>this._units[i].incon?(e/=this._units[i].incon,n=this._units[i].u2,e=e.toFixed(1)):e=e.toFixed(0),t){var o=[];o.push("<span>总长：<span style='"+this._styles.BMapLib_disBoxDis+"'>"+e+"</span>"+n+"</span><br />"),o.push("<span style='color:#7a7a7a'>"+this._opts.followText+"</span>"),t.setContent(o.join(""))}},i.prototype._hideCurrent=function(){if(this._isOpen){if(this._paths.length>0){var t=this._paths[this._paths.length-1];t.hide()}this._followTitle&&this._followTitle.hide()}},i.prototype._isPointValid=function(t){if(!t)return!1;var e=this._map.getBounds(),i=e.getSouthWest(),n=e.getNorthEast();return!(t.lng<i.lng||t.lng>n.lng||t.lat<i.lat||t.lat>n.lat);
};var n={_map:null,_html:"<div style='background:transparent url(http://api.map.baidu.com/images/blank.gif);position:absolute;left:0;top:0;width:100%;height:100%;z-index:1000' unselectable='on'></div>",_maskElement:null,_cursor:"default",_inUse:!1,show:function(t){this._map||(this._map=t),this._inUse=!0,this._maskElement||this._createMask(t),this._maskElement.style.display="block"},_createMask:function(i){if(this._map=i,this._map){e.insertHTML(this._map.getContainer(),"beforeEnd",this._html);var n=this._maskElement=this._map.getContainer().lastChild,o=function(i){return t(i),e.preventDefault(i)};e.on(n,"mouseup",function(t){2==t.button&&o(t)}),e.on(n,"contextmenu",o),n.style.display="none"}},getDrawPoint:function(t,e){t=window.event||t;var i=t.layerX||t.offsetX||0,o=t.layerY||t.offsetY||0,s=t.target||t.srcElement;if(s!=n.getDom(this._map)&&1==e)for(;s&&s!=this._map.getContainer();)0==s.clientWidth&&0==s.clientHeight&&s.offsetParent&&"td"==s.offsetParent.nodeName.toLowerCase()||(i+=s.offsetLeft,o+=s.offsetTop),s=s.offsetParent;return s!=n.getDom(this._map)&&s!=this._map.getContainer()||"undefined"==typeof i||"undefined"==typeof o||isNaN(i)||isNaN(o)?void 0:this._map.pixelToPoint(new BMap.Pixel(i,o))},hide:function(){this._map&&(this._inUse=!1,this._maskElement&&(this._maskElement.style.display="none"))},getDom:function(t){return this._maskElement||this._createMask(t),this._maskElement},_setCursor:function(t){this._cursor=t||"default",this._maskElement&&(this._maskElement.style.cursor=this._cursor)}}}();
